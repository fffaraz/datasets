This formula does work. keeps giving the same error : Variable debt has an incorrect value.
Ah. Yeah, their method is a "if you want to be clever, and have the ability to analyze gradients and trends in the data." The `fzero` method is like using a sledgehammer to beat the problem into submission.
%\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* %%This fucntion will graph waveforms and their hilbert transform from one %%waveform .csv file %%must add labeling for first peak and this function needs an input %\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* &amp;#x200B; function g = graphData(file) &amp;#x200B; File\_names = dir('\*.csv'); %attain every waveform in the event folder numFiles = length(File\_names); &amp;#x200B; table = readtable(file); %read the data into a table &amp;#x200B; % for i = 1: length(numFiles) xr = table2array(table); %convert the table into an array(matrix) x = xr(:,1); y = xr(:,2); &amp;#x200B; \[up,lo\] = envelope(y); %attain the hilbert envelope m = \[up,lo\]; &amp;#x200B; M = find(\[up,lo\] == max(m)); %find the max amplitude of the hilbert transform envelope &amp;#x200B; &amp;#x200B; hold on % for i = 1:length(numFiles) % % figure(i); % % % subplot(numFiles,1,i); % % end hold on g = plot( x,y, x, up,'-p','MarkerIndices',(M),... 'MarkerFaceColor','blue',... 'MarkerSize',10 ); %plot time vs. amplitude vs. hilbert and mark max amplitude of hilbert xlabel('time (seconds)'); ylabel('volts'); title("Peak in Hilbert Transform of Signal"); &amp;#x200B; &amp;#x200B; &amp;#x200B; &amp;#x200B; end
Neither does anyone else without the model. ;) Do you have the algebraic and differential equations used to model the servo's states and output? Something like: *M* *dx*/*dt* = *Ax* + *Bu* + *f*(*x*, *u*, *t*) *y* = *Cx* + *Du* + *f*(*x*, *u*, *t*) Barring that, what is the plant transfer function from control input to position output? If you have a state space model, the transfer function is: *H* = *C*(*sI* - *A*)^(-1)*B* + *D* Without any of that, you're getting into [system identification](https://www.mathworks.com/help/ident/gs/about-system-identification.html) territory.
I think I might use: * A main script that imports the CSV and prepares it for reading * A function to parse the text line-by-line, identifying variables for replacement, Excel functions (including "IF") for (possibly recursive) parsing of their own, and operators for replacement with the text version (the workhorse function) * As many functions as necessary to handle specific Excel function parsing * A function to perform line formatting that accepts a "level" argument to keep track of tabs for alignment and modifies a running "document", which it accepts and returns * An output function to spit out the final, formatted document when all lines are completely parsed That's just the first set of stuff that comes to mind. Hard to say what of that would be needed, or if there would be more without having the actual task in my to-do's. Might be overkill, might be a severe underestimate of the task. Hope it helps anyway.
This is great! I actually already started this exact approach, but seeing it written out instead of keeping it in my head makes it seem a little less daunting. Thank you!
What do you mean by a "jumbled mess"? Can you tell us what your code for converting these statements is and what the undesirable output looks like? An idea to throw out there is use strfind to find "IF(" indexes, to find ")" indexes and to find "," indexes. Then use for loops to created your nex statement with these indexes.
This is more a of a general statistics question than a Matlab one. I also don't quite understand why you want to do this. Do you not believe Matlab when it says these are drawn from the exponential distribution? In any case, there are a number of options for checking whether a sample is drawn from a particular distribution. An informal approach would be to plot a histogram of the sample draw together with a plot of the exponential pdf (with appropriate re-scaling, e.g., by using the `'Normalization', 'pdf'` option in Matlab's `histogram` function) and see whether they seem to coincide. Alternatively you could plot the cumulative histogram (using the `'Normalization', 'cdf'` option in Matlab's `histogram` function) together with a plot of the exponential cdf. For a formal approach, you could conduct an [Anderson-Darling](https://www.itl.nist.gov/div898/handbook/eda/section3/eda35e.htm), [Kolmogorov-Smirnov](https://www.itl.nist.gov/div898/handbook/eda/section3/eda35g.htm), or a [chi-squared](https://www.itl.nist.gov/div898/handbook/eda/section3/eda35f.htm) goodness-of-fit test.
What's the other problem? Can you give me a set of reproduction steps that I can try on my machine? I'm at CVPR so I might respond late, but I'll respond
Not a problem, this part was easy. You've got the tough job! A pointer, if you don't mind: at the start of any project, I type a stack of comments much like the bullet points I gave you above into an empty m-file. I gradually replace the comments with code until the file runs properly. It's been a *very* helpful method for me over the years, and you're welcome to adopt it if you think it would help you too. All the best!
&gt; I just to plot the derivative of the signal. Any advice? If you are okay amplifying noise (i.e. not using a differential filter), then you can just implement the discrete version of the derivative: the finite difference. For sampling time *T*_*s* at sample *k* the finite difference is: *y*[*k*] = (*u*[*k*] - *u*[*k* - 1])/*T*_*s* This is the same as taking the output of `diff` and dividing it by the sampling time. Best of luck!
You could fit a sine function, and then used the obtained variable values for the sine to find the derivative
I have the code functioning, for the most part. I'll update my above post when I've cleaned it up a bit. fwiw, I've been coding for 20+ years, and usually do what you indicated. I do not in any way wish to come off as "I know what I'm doing!" though! I admire the manner in which you expressed your idea, and how it was suggested that I adopt a similar practice without in any way being pushy or assuming. Thank you for not only your input, but your kind approach as well.
You're asking to verify that the numbers generated by a function that produces exponentially distributed numbers, are indeed exponentially distributed? Depends how strongly you feel like distrusting the proper design of that function. If you're only mildly distrustful, you could just histogram the data. If you're severely distrustful, you could apply any of a variety of statistical tests to determine the probability that a sample is drawn for a given distribution. Matlab implements a number of these. For example, the Kolmogorov-Smirnov test, implemented by the function `kstest`. That particular test only works for normal distributions, but you can do your own research using that starting point. Of course, if the whole point is that you don't trust the functions provided by Matlab, you might want to implement this yourself. Good luck.
The golden rule is a real son of a gun for getting the job done. :) I'll check back to see how you've implemented it when I get a chance. I recently read an article about code translator design ("Code that writes code" or something like that) so this is pretty timely!
I don't want to amplify the noise. The problem is I'm not sure how to use the differential filter for my data. The examples has dB/Frequency as the Y-axis and Frequency as the X-axis. I have Amplitude as the Y-axis and time as the X-axis. I'm new to signal processing so I'm not sure how I would find out what to set `Fpass` and `Fstop` to in order to follow the tutorial.
The derivative of a constant is 0. &gt;I can plot them using the `plot` function and get the signal I expect so I know those values are correct, but I don't know how I would take the derivative since there is not fixed signal. The function `diff`does not work as you stated in your OP, unless you are using symbolic functions, which generally you should not be. In fact, as the documentation states, if will produce the numerical derivative of the input you provide. &gt;I found [this page](https://www.mathworks.com/help/signal/ug/take-derivatives-of-a-signal.html) which talked about using a differential filter to achieve my goal, but I don't want to set a passband or stopband. I just to plot the derivative of the signal. Any advice? Often in numerical analysis, what you *want* is irrelevant when it conflicts with what *must be*. That said, if you don't want to do this in a nice way, you can do it in a mediocre way quite easily using the `diff` function.
I wouldn't know how to do that either. Also, how accurate would that approach actually be? I feel like MATLAB must have a way to allow people to take the derivative of signals coming in from radar device.
What you are approaching here is the kind of text parsing that allows programming languages to be digested by compilers or interpreters and executed or converted to machine instructions. This is in general extremely complicated, and is the domain of PhD level computer scientists. You don't want to solve your problem this way. A better solution would be to find people using excel and make fun of them until they stop using excel.
Understandable. You're looking at the difference between working in the frequency domain and the time domain. The time domain is simple, intuitive, and common, but in signal processing the frequency domain makes differential equations into algebraic equations (and often avoids [convolution](https://en.wikipedia.org/wiki/Convolution)), so it's preferred. A couple of steps to get you going in the right direction: 1. You have your measured data in the time domain, and you know the sampling frequency, I assume. If not, find that out first, as it's specific to your experiment/setup. 2. Follow the first set of instructions in the page you linked to find the frequency at which the signal drops below about -60 dB (this is about 0.1% in amplitude, relative to the frequency at which it was measured) on the Welch spectrum. 3. Use that value as Fpass, and set Fstop somewhere between 1.2 and 10 times that value; you probably won't know how much high-frequency noise you need to reject beforehand. 4. If it doesn't look approximately like a cosine waveform, change the values a little bit at a time until it looks right. [Here's a starting point](https://en.wikipedia.org/wiki/Frequency_domain) if you want to learn more. There's plenty of links there to send you down this rabbit hole as far as you're willing to go.
Just to point out- diff doesn't exactly do the approximate numeric derivative, since it doesn't divide by the distance between the points.
True, it just does array finite differences.
&gt; What you are approaching here is ... *nods* &gt; You don't want to solve your problem this way. *pensive look* &gt; A better solution would be to find people using excel and make fun of them until they stop using excel. [my sides](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTaUxp1ZjKhHgx-9c8zYymwTEhG856PU3YX9dFVekjphm9-Ak8_)
Look in your workspace and see what sizes do not match for variables. An even better option is to go through each line with debugger and figure with out the line with the error. Then look at the variables in the line and compare the sizes.
Thank you so much for your advice I have followed your instructions as well as the ones on the page and I have what I assume is the derivative. I do have a few questions though and would appreciate your feedback. 1. Based on this [Welch Power graph] (https://imgur.com/a/OGSJARV) I choose to set my Fpass to 0.300 and my Fstop to 0.320 because it seems to get less noisy after 0.3. Is that the wrong parameter to consider when choosing Fpass? 2. Why is Fstop between 1.2 and 10 times the Fpass value? I understand the Fstop is to help eliminate noise but are those ranges arbitrary. 3. Is there any way to verify that the output of the derivative is actually the derivative? It "looks" right but it would great if I could verify that my output is correct.
^(Hi, I'm a bot for linking direct images of albums with only 1 image) **https://i.imgur.com/XPObi8b.png** ^^[Source](https://github.com/AUTplayed/imguralbumbot) ^^| ^^[Why?](https://github.com/AUTplayed/imguralbumbot/blob/master/README.md) ^^| ^^[Creator](https://np.reddit.com/user/AUTplayed/) ^^| ^^[ignoreme](https://np.reddit.com/message/compose/?to=imguralbumbot&amp;subject=ignoreme&amp;message=ignoreme)^^| ^^[deletthis](https://np.reddit.com/message/compose/?to=imguralbumbot&amp;subject=delet%20this&amp;message=delet%20this%20erlh4xi)
Dlmread will remove whitespace on text file load.
Measured data, from radar or whatever, tends to be noisy. Taking a derivative of such data will be difficult. There are a few ways to make this easier but they can depend on your data. One very simple method is to use a median filter (`medfilt1‚Äô) with a suitable span. This is pretty good for images too in 2D. There are plenty of smoothing methods in Matlab that would be worth looking into. A method I found worked well for taking the Laplacian of IR imagery was weighting the data based on Pascal‚Äôs Triangle, kinda like how Pixar do subdivision surfaces. You can curve fit the data with an appropriate model and symbolically differentiate that. The curve fitting tool (`cftool‚Äô) is pretty intuitive.
I didn't realize that `Ctrl-I` trimmed trailing spaces, thank you!
Thanks for the tip!
Thanks for the tip!
I try :)
You set Fpass to 0.300? Not 300? Note that the scale is in kHz, not Hz. Also, at that point you will be capturing quite a lot of data that is not necessarily part of the signal you want to measure. You'd probably be safe at about 100 Hz, judging by the plot, but perhaps you need the harmonics, too. The "noisiness" of ***this plot*** is not the guiding factor in determining your pass/stop frequencies, you'll want to use the resulting ***time domain waveform*** after filtering (the derivative) to make that decision. Fstop is between 1.2 and 10 times the Fpass value because of experience! 1.2 gives a tight margin when you're very certain that your signal is at or near a specific frequency, and 10 gives you a lot of wiggle room for a couple of harmonics (integer multiples of the fundamental frequency) to make it through. Maybe you're interested in them, maybe your signal depends on them, whatever the reason. Much higher than that and you're almost certainly in the noise range, so you're just making a mess. For your third question, you have hit upon one of the fundamental questions in experimental science: how do I know these values are real? There is no great answer for you, unfortunately. If you trust the work, and your measurement process, then you can try to make up reasons why it might be wrong, and check for them. Failing to find any means you might be right! For a simple check, you can make a model of your signal using the fundamental frequency, take its derivative, and overlay that on your result to see how closely they match, but this assumes you know your signal's amplitude, frequency, DC shift, and any important harmonics, etc. The basic idea is: Tend = 5; % some time value matching your signal length t = linspace(0, Tend, 1025); % the time vector f = 60; % some frequency value in Hz matching your signal's fundamental w = 2*pi*f; % frequency in rad/s A = 1; % some amplitude matching your signal D = 0; % some DC shift value y = A*sin(w*t) + D; dy = diff(y)/(t(2) - t(1)); % point-wise finite difference tplot = t(1:end - 1); % leave out the last (or first) point when plotting Plot that on top of your actual work and see how it looks. Don't forget `hold on`. Another option is to check with someone who'd know (your boss, a coworker, a classmate, the professor, etc.). Hope all ends well for you!
What error does it give? It doesn't just say a line, it says what's wrong.
That line is in Findeaks.m and I dont understand how it pertains to my code.
It's saying more than that, no?
It's saying more than that, no?
It just directs me to line 136 of Findpeaks.m I saw online that one issue could be that the data has negative values but thats not the case here as the envelope() creates an envelope with positive amplitudes.
Keep reading the error message. It says "Error in findpeaks (line 136)..." but there's more, where it says the problem. There's always a second line to Matlab error codes.
This is the complete error message, the code complied and ran but not after I added findpeaks(): &amp;#x200B; "Error in findpeaks (line 136) = parse\_inputs(isInMATLAB,Yin,varargin{:}); &amp;#x200B; Error in graphData (line 28) \[pks,locs\] = findpeaks(xr); &amp;#x200B; Error in frstarrv (line 19) graphData(file); "
I guess you have to do interpolation... Don't know how, but google it üòÖ
I keep editing to add spaces before the code so it shows up in Matlab formatting markup, but those edits don't stick. I feel like r/oldpeoplefacebook on this sub when the suggested formatting doesn't work. Really sorry about that.
I think you have Y defined as both the upper and lower envelopes, so Y is probably a matrix with 2 row or 2 columns, for both sides of the envelope. Try setting Y as just the upper, if you just want the positive envelope, or half wave rectifying the total envelope. Then run findpeaks(Y).
Assuming that `handles` is a struct based on the dot access, seems like [isfield](https://www.mathworks.com/help/matlab/ref/isfield.html) is what you want.
Already did this actually!!!! And it worked! Now I just need to plot the first peak.
Thanks for a great suggestion. check = isfield(handles.planPath); returns error Reference to non-existent field 'planPath'.
If you look at the documentation, the syntax for `isfield` is `TF = isfield(S,field)` so you would do `check = isfield(handles, 'planPath');`
You can get the parameter a by using fitresult.a
\[pks,locs\] = findpeaks(m,'NPeaks',300,'Annotate','peaks','MinPeakWidth', 80);% find the first peak of the hilbert envelope % loc1 = \[locs\]; g = plot( x,y, x, up,'-p','MarkerIndices',locs,... 'MarkerFaceColor','blue',... 'MarkerSize',10 ); %plot time vs. amplitude vs. hilbert and mark max amplitude of hilbert
Thanks. Turns out that it was indeed a bug with the PDE solver, where it can't differentiate between the different subdomains. I found a workaround now, but will keep FEATool in the back of my mind.
It's like you don't even try to read the documentation.
The first loop begins with i=4 This i value is used as an argument for the OrbitA callback function defined elsewhere in the script. OrbitA takes a range of values for its first argument. Does that help? I'd also have to see the whole script to tell you what the 7x1 output means.
Got any sample code?
&gt; You set Fpass to 0.300? Not 300? Note that the scale is in kHz, not Hz. Isn't 0.300 kHz = 300 Hz? &gt; You'd probably be safe at about 100 Hz, judging by the plot I believe you, but I just want to try to understand what you look for. I chose 300 Hz because it seemed like the power decay of the signal really slowed down after 300 Hz. Can I ask what you looked at when you determined 100 Hz was a good stopping point.
How is the median filtering different from the differential filter? I don't really understand how filters can be used to produce the derivative of a signal so I'm trying to understand the logic behind the process so I know which option to choose in the future.
Edited my post
OrbitA looks like a vector, not a function.
&gt; Isn't 0.300 kHz = 300 Hz? It is indeed. You said you set the value to 0.3, so I wanted to make sure you caught that too! For your other question, I looked for where the signal dropped below -60 dB. The reason for that is that -60 dB represents 0.1% magnitude: *x*\_*dB* = 20log(*x*) &lt;-&gt; *x* = 10^(*x*_*dB*/20) If you have a sine wave with amplitude of 1, anything at that frequency is only changing the value by 0.001 (i.e. 0.999 to 1.001), and oscillations that small are not likely to be valuable to your investigation.
* `OrbitA((i-3):(i+3),2)` takes a vector from the vector OrbitA, from the line `i-3` to `i+3`, from the second column. The `:` means a range, here. So, for `i=4`, `OrbitA((i-3):(i+3),2)` is `OrbitA(1:7,2)`, that is, the lines 1 to 7, of column 2, from OrbitA. That's why you have 7x1 vectors * x_1((i-3),:)=Y_1' takes the transposed Y_1 (the `'` transposes the matrix) to all columns (the `:` here) of the line `i-3` of x_i I think that's all.
OrbitA is a matrix
Maybe I just haven‚Äôt seen it but mathematically speaking how exactly do you use fft to get the integral or derivative? I know it‚Äôs a good strategy for calculating convolutions since convolution becomes multiplication in the Fourier domain, I don‚Äôt know if you can use it for just any old integral though. Why not just use the integrate or derivative functions that are built in?
Okay nevermind me
If your function is two-dimensional, you really should be using `fft2`; if it's an array of one-dimensional functions then you can use `fft`. The documentation gives a good example of how to use `fft2` and `fftshift` to set things up.
The filter just smooths the noise. Then you can use gradient for example to get the derivative of the smoothed signal.
fft calculates the fourier coefficients for f(x) = sum c_n *exp(i*k*n*x). If I differentiate the function, the exp(...) stays the same, and the c_n become c_n *i*k*n, then I can just transform back. But my problem is with all those fftshift and ifftshift and when to use them
If you're only using `fft`, you're operating only along columns, not really doing anything "2D". You will need to account for this when dividing by *i*\*`omega`. Whether you use `fftshift` is up to you. Just keep in mind the value of `omega` must be correct for the arrangement of the array you choose to use.
The transform of the n-th derivative of a function is (*i*\*`omega`)^n times the transform of the function. This is a common and useful identity in all kinds of signals analysis. It doesn't hold trivially in 2 dimensions though. The equivalent for the Laplace transformation is a basic and critical tool used in controls theory and circuits analysis.
i only found this [https://www.mathworks.com/matlabcentral/answers/230619-count-word-frequency-please-help](https://www.mathworks.com/matlabcentral/answers/230619-count-word-frequency-please-help) but i did¬¥t understant nothing :(
A matrix is a vector of multiple dimensions, after all... Haha
You should read the documentation on indexing.
Okay that does make sense now, does this make the derivative less noisey? I would worry about losing some of the quality of your original function though to be honest
So, first thing I would do is to look for all the spaces and ', to find out the words. You might break the main string in a vector of words. Then you cycle through this vector counting the words word by word, look at it and try to find similar words in the vector. It's not efficient nor beautiful, but it's easy to do. If you want a beautiful code, use logical indexing.
I think *Text Analytics Toolbox" has that covered. Check it out.
This is a final project, and you don't even know where to begin? Or even enough to pretend you made an effort before asking a question? We don't do your work for you. We can't fix the fact that you didn't pay attention all semester.
The problem is ..... he didn¬¥t explain nothing about it. Was like you have 5 days to do this.
You will probably have difficulty finding a lot of HDL Coder users here, and your workflow sounds fairly complex. I strongly recommend that you [contact MathWorks Technical Support](https://www.mathworks.com/help/matlab/matlab_env/contact-technical-support.html).
Let's start off with: what have you tried so far? What's driving you crazy?
I assume the whole semester leading up to this has been "explaining". The expectation is that you now know enough to *learn what you need on your own*. You can do that by using the knowledge you already have, and combining it with what you teach yourself, for example by reading the documentation.
I've made the real plant but I can't set a fine pid control over it in simulink because I have no idea how to do it
Probably not, I mainly want to use it for Integration, because it might be faster than usual integrals
Check if this is helpful https://www.mathworks.com/help/slcontrol/gs/automated-tuning-of-simulink-pid-controller-block.html
Thank you so much for all your help :)
Thanks but you can't tune a nonlinear plant so I can't use this
Got it. Can you linearize it from a equilibrium point?
You're most welcome.
UmmI think so. I'll try with the videos suggested above see where it leads
Mate, we aint doing your work for you.
Ok. I'm going to give you some help on how to learn what is going on here. 1) Cut and paste that code into Matlab. DO NOT TURN IT IN AS YOUR ORIGINAL WORK! 2) Step through the code line by line and look at the variables to better understand what is going on. 3) Once you under stand how it works, create a new script and start writing your own function.
What happens when you click on 'save'?
I can't, it's grayed out. Probably should have said that in the main post tho so thank you for reminding me
Sorry, just never heard of this before. If you write a function, or regular script, you can save just fine? Just live scripts? As a temp work around, you can copy and paste your text into a regular text file and save that, but I don't think that should be necessary. Never heard of this before.
Yup, scripts and functions work and save just fine. The problem's with the live scripts only. I've saved my live scripts in a .txt file, copying from that and adjusting the code and text is a bit tedious but still doable. Still, thanks :)
Googling I found this &gt; if you have .m file with the same name you cant save live editor with the same name rename and then save your file as .mlx Any chance that helps?
What does the model you're trying to build look like?
I think you'd find better responses over at r/FPGA. But even there, most people still don't use Simulink's HDL Coder.
Thanks i'll look into that
Ya, it seems like it's not commonly used
Awesome! Thanks mate! Sorry I was gone with the family the past few days so I just saw this! Basically this is my problem in figure 3: https://gyazo.com/fbff416c5765c953a52e00067b5b70f9 Variables/Workspace: https://gyazo.com/7b19e023af96ad7dc1fd547c487793d7 It only does object detection for 1 surgical tool instead of multiple despite me using bboxes (the plural variant). I'm not sure if there is more for me to edit in order to detect and label multiple surgical tools.. Full code: https://pastebin.com/CiLYqNRm Any insight would be much appreciated
Can't you take a stake and bind the stem of the plant to it so the flower is straight?
%\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* %this function plots the first amplitude and arrival arrival time of the %acoustic wave to each transducer in one event %\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* function frstarrv() fid = fopen('event\_1'); %open the event folder &amp;#x200B; File\_names = dir('\*.csv'); %attain every waveform in the event folder numFiles = length(File\_names); % numFiles = 2; % csvFiles = cell(1,numFiles); incr = \[ 1,2,3,4,5,6,7,8,9,10\]; % leg = zeros(1,numFiles); for i = 1:numFiles %call graphData() for each waveform file = File\_names(i).name; % newStr = extractBetween(file,"\_","\_"); %get transducer name % legend("Transducer" + " " + newStr) % subplot(2,1,i); hold on plus = incr(i); % newStr = extractBetween(file(i),"\_","\_"); %get transducer name \[pksa(i,1),loca(i,1)\]= graphData(file,plus); % hold on % legend("Transducer" + " " + newStr); &amp;#x200B; end &amp;#x200B; newStr = extractBetween(file,"\_","\_"); %get transducer name legend("Transducer" + " " + newStr, 'location', 'northwest') end &amp;#x200B; &amp;#x200B; &amp;#x200B; %\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* %%This fucntion will graph waveforms and their hilbert transform from one %%waveform .csv file %%must add labeling for first peak and this function needs an input %\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* &amp;#x200B; function \[p,l\] = graphData(file,plus) % newStr = extractBetween(file,"\_","\_"); %get transducer name % legend("Transducer" + " " + newStr); &amp;#x200B; table = readtable(file); %read the data into a table &amp;#x200B; xr = table2array(table); %convert the table into an array(matrix) x = xr(:,1); y = xr(:,2); &amp;#x200B; \[up\] = envelope(y); %attain the hilbert envelope fo the amplitude m = \[up\]; &amp;#x200B; % M = find(up == max(m)); %find the max amplitude of the hilbert transform envelope \[pks,loc\] = findpeaks(m);% find the peaks of the hilbert envelope p = pks(1,1); l = loc(1,1); &amp;#x200B; %I want to offset each waveform vertically so that all waveforms are on one %figure % incr = rand(); % % if incr &lt; .5 % incr = 2; % else % incr = -3; % end %I want to limit the range of of peak locations when plotting % newStr = extractBetween(file,"\_","\_"); %get transducer name % legend("Transducer" + " " + newStr); plot( x,y + plus , x, up + plus ,'-p','MarkerIndices',l,... 'MarkerFaceColor','blue',... 'MarkerSize',5) %plot time vs. amplitude vs. hilbert and mark max amplitude of hilbert xlabel('Time (seconds)'); % ylabel('Volts'); title("Peak in Hilbert Transform of Signal") % hold off % legend("Transducer" + " " + newStr); &amp;#x200B; &amp;#x200B; &amp;#x200B; &amp;#x200B; end
You can try Xilinx Vivado. It has an IP core generator and integrator where you can create and import blocks/modules. The learning curve for Vivado is steep (af) but it has all the tools you need and it's mostly free.
I don't understand you :(
I don't think it'll help because I don't even get to save the live script under any name, let alone under the same name with a .m file.
Ok, I managed get the value of y for 1 value of x. I used the fzero in Octave 5.1. I followed the standardized steps: \- defined the function in separate f.m file in the same directory: function y = f(x) y=x\*log(1+x/62.7) + 1\*0.459 endfunction \- called this function in the file, where I used the fzero: fun = @f x0 = 0 z = fzero(fun,x0) I get the correct result, but now I would like to do it for all the values of x (0-360¬∞). I tried defining the function in the solver file, but I get the error: fzero: not a valid initial bracketing w=0.459; fun=@(x) (x.\*log(1+x/62.7)+w); y0=0 z=fzero(fun,y0) &amp;#x200B; Now I'm lost. How can I make a for loop to loop the x values if I cannot define the function?
\[r,c\] = size(A) vec = ones(r)
Please don't do peoples homework for them.
What would have been acceptable? Telling him the definition of one?
I do not understand the question. Please reformulated. Are you doing a regression?
What does excel have to do with this? Are you trying to do a fit? It sounds like you already know the equation.
I tired a non linear regression in mathematica, my adjusted Rsquared was around 0.974. But when I run the function for a know value, I'm off by 7 units.
Excel has nothing to do with this lol, I just have it in excel. Yeah, I'm trying to fit, but my equation isn't right. Is there anyway in Matlab I can do this?
Have you read the documentation for the `fit` function?
What model did you use. A polynomial model? The model should be chosen according to the data. If you want to just interpolate, this can be done in Matlab using griddata function. I do not have Matlab now, but there are all the functions needed.
Thanks a lot that really helped. I have computed the parameters of the polynomial for 1080 observations. Now, I have to compute the velocity and acceleration of each position (x y z). Does the following code achieve that? for i=1:1074 v(i)=norm(\[x\_1(i,2) y\_1(i,2) z\_1(i,2)\]); % compute velocity a(i)=norm(2\*\[x\_1(i,3) y\_1(i,3) z\_1(i,3)\]); % compute acceleration Velocity values for each component x,y,z vel\_x = x\_1(:,2); % Velocity of X component vel\_y = y\_1(:,2); % Velocity of Y component vel\_z = z\_1(:,2); % Velocity of Z component &amp;#x200B; x\_1, y\_1 and z\_1 variables are the parameters that were computed using least square method.
ok Thanks
The function I tired was &amp;#x200B; T= (k\*X^(a) \*Z^(c) ) / Y^(b) But this empirical did not give me the expected values. Could please guide me on how to choose the model?
I was just going through this but I do not know the co-efficient values which are needed by the fit function (correct me if I am wrong).
Can't you just do OLS with log(T) as the regressand and log(k) your constant term and log(X),log(Z),log(Y) your other regressors. That is, take logs on T= k\*X\^a \*Z\^c/(Y\^b) to get log(T)=log(k)+a\*log(X)+c\*log(Z)-b\*log(Y).. you then get your estimates linearly and can use them on your initial formulation for extrapolation.
Mathworks developer here. I highly recommend you create a tech support case for this. It will most likely go directly to the editor team who will be the best people to figure this out.
that happens when you are fitting a function to real data. If it matters that much to you use a higher degree polynomial.
The whole point of a fit is that it finds the coefficients for you
I don't know what the `A` matrix in your previous code is. So I don't get the meaning of `Y_1`, `Y_2` and `Y_3`. If you have the time distance between measurements, you can always use the derivatives, v=dx/dt and a=dv/dt
There's a couple of things that come to mind: 1. Have you looked at the training progress to see how the list changes? This may give you some clues. 2. Shuffle your input data and reduce your batch size. Right now the network sees a sequence of images from the first class and then another sequence all of the second class. 3. You have very few images and so this approach won't scale very well. Consider using transfer learning. With such a small dataset, the best you can hope for is overfitting on the dataset. A traditional object detector like ACF may do better when you don't have as much data. Hope this helps. Good luck!
They want a row vector where all elements are the number 1. Check out: help ones help size
Question like these really annoy me for some reason. People treat matlab like a black box and refuse to learn math. Your problem isn't matlab, its that you don't know math/statistics. Go read a stats book and then try your problem.
Har har har. Classic controls joke!
Will do. Thanks a lot :)
Use a spline fit. Its going to be comically useless though
Spline
Watch some YouTube videos on what regression and curve fitting is. There isnt a program that can perfectly predict the funtion; that would be the world‚Äôs most powerful neural network if it existed. You‚Äôre gonna get an ‚Äúestimation‚Äù based on the data u fit with, and a reasonable error from other inputs and real values
Its 2019 da fucks is a ‚Äúbook‚Äù. Go find some Indian youtuber
Everything you need should be found [here.](https://www.mathworks.com/help/matlab/matlab_prog/formatting-strings.html)
'%d' is an integer '%s' is a string '%c' is a character etc.
Hey man, thank you for your constructive comment. I do have a bachelors in Engineering, but I am new to Matlab. This was the only time in my life I have had to use the software. I am open to learning it, but due to lack of time, I had to rush. I do know the math behind it, all I am asking for is that is it possible on Matlab and what function will help me. I have never asked anyone here to write the code for me, instead I am asking for help which will guide me in the right direction, unfortunately your comment is not doing that.
And you failed in engineering clearly since you can't Google and don't know basic math. You had to option to Google and not waste everyone's time.
I'm sorry about that last message that was uncalled for and I guess I'm just in a bad mood today
If possible, write your code to operate on vectors. Since you haven't given any indication of what your mystery model is, here is an example: A single line (all scalar): y = a*x + b; A system of *n* equations in *n* variables (*y*:*n* x 1, *A*:*n* x *n*, *x*:*n* x 1, *b*:*n* x 1): y = A*x + b; Many built-in MATLAB functions operate on vectors naturally; see the documentation for each to determine suitability. For a more general approach, see [the vectorization documentation](https://www.mathworks.com/help/matlab/matlab_prog/vectorization.html).
If you have access to the image processing toolbox, there are a bunch of demos and examples that could spark some ideas for you. Just type in ‚Äúdemo‚Äù at the Matlab prompt and look for the toolbox. Also, I‚Äôm assuming the course you‚Äôre taking is related to image processing, so I think learning about the theory is necessary, otherwise it‚Äôs just an exercise on applying Matlab. Good luck!
Here is a PDF of digital image processing using MATLAB. https://github.com/ViachaslauBohdan/mgr/blob/master/Digital%20Image%20Processing%20Using%20Matlab%20-%20Gonzalez%20Woods%20%26%20Eddins.pdf
Interesting - as a heavy Stateflow user I'm going to have to check this out.
If you don‚Äôt have to use Matlab, you can also use National Instruments LabView with IMAQ vision for image processing. I have worked with both of them doing image processing.
Inside of a command like `fprintf` you can think of these as a ‚Äúplace a variable here‚Äù command, where you are specifying the type of variable that you want placed in the string. As an example, let‚Äôs say that I have a string `myString` and float `myFloat` defined myString=‚ÄòPie‚Äô; myFloat=pi; Now I can call the function `fprintf` to print a string to the command window fprintf(‚ÄòI like apple %s, physics %.2f, and engineering %i‚Äô, myString, myFloat, myFloat) This will result in the following message being printed to the command window: I like apple Pie, physics 3.14, and engineering 3 Note that I use %.2f to specify that I want to print a float to 2 decimal places.
Thank you!
But what if you have more than 1 Variable with a string or a number, how does matlab know which one to take?
If you don't have access to Matlab you could look at OpenCV with Python. There are a ton of tutorials online for it.
It just looks at the order in which you include the `%s`,`%f`, etc. command and the order of inputs. In my example, I gave a `%s`, then `%.2f`, then `%i`, so the command knew to look for a string input, then a float input, then an integer input.
sqrt((xti - xs)\^2 + (yti - ys)\^2 + (zti - zs)\^2/v) - (ts - deltai); &amp;#x200B; I plan to enter this function in a broyden solver I have found online and get signal locations.
if you're dealing with a single case, i don't think you'll get much more improvement. you can put it all in one line, which could help. you can test it out yourself with some tic-toc combos or using the profiler. &amp;#x200B; if you're dealing with a lot of independent cases, you should vectorize this.
Apologies for digging up the ghosts of the past here, but I'm interested to know what you mean the license is locked when you lose the email. Asking as I'm graduating soon and am debating to purchase now, but I know I will lose the email within weeks of graduation. If the license gets lock, does that mean you're locked out of the software? Thx
It means you should move to a personal license which is $150 or try out Python. Matlab seems to be locking down the student licenses harder so with some frequency they will send you and email to verify your student status but if you don‚Äôt have access to the email, you‚Äôll lose the ability to use matlab
I do not know scilab, you are in the wrong sub. but for matlab "endfunction" should be "end". /*** is a comment ?! comments are noted by % Why choose x and z for your two variables? By convention choose x and y then use z for a third dimension of the data, it will make things easier later in learning. Your problem is probably setting z as a string input and need to convert the expression from a string into something useful for math. Everytime your function sets idk as a string. Your error messages are all the ways we can not take a derivative of a string. I do not see where you called your new function, so is possible you never use the string in the first place. I store functions in seperate files and call them from the script. plenty of examples in the user base of other ways. try a google for "matlab,my question" to access the online help which is very good. 1. You need to handle your user input - convert the contents of the string into something that can math. 2. If you have some symbolic toolbox differentiate or like you try here to generate a vector and differentiate numerically. 3. start with input expressions like 'x' or 'x^2" or 'exp(x)' to confirm your code works then try more difficult things. good luck
Yes, you can't instantiate abstract classes. Did you write your own custom class that derives from 'arima'? If so you need to provide definitions for the methods mentioned in your post in the custom class. Or are you getting the error when using the 'arima' function itself in MATLAB? If so, can you provide the exact command that's throwing the error?
I am getting this error by just calling the arima function. I'm calling `Mdl = arima(2,1,0);` this error also appears as a popup by opening the econometric modeler and fitting either an ARMA, ARIMA etc model.
On my end, I am able to call the "arima" function without error: &gt;&gt; mdl = arima(2, 1, 0); It may be good to check your path to see if there's anything shadowing the "arima" class. What version of MATLAB are you using (e.g. R2019a), and what's the result from calling "which -all"? &gt;&gt; which -all arima You could also try restoring your default path to see if that resolved the issue: &gt;&gt; restoredefaultpath % Make a backup of your "pathdef.m" before calling this &gt;&gt; rehash toolboxcache &gt;&gt; savepath
\&gt;&gt; which -all arima C:\\Users\\user\\Documents\\MATLAB\\arima.m % arima constructor C:\\Program Files\\MATLAB\\R2018a\\toolbox\\econ\\econ\\@regARIMA\\arima.m % regARIMA method C:\\Program Files\\MATLAB\\R2018a\\toolbox\\econ\\econ\\@arima\\arima.m % Shadowed arima constructor &amp;#x200B; after deleting Documents\\MATLAB\\arima.m it's working. Thanks a lot!
Are you sure you dont have an array instead ??
Can you post your code or the excerpt with definition and assignment of your variable ?
For loops and questdlg will be your friend
For your loop you can go about it 2 ways: 1. Make a while loop and an array of 11 elements. Use a random generator to generate 1 to 11 and increment that value in your array with an if statement that doesn't allow that value to me used if that element in your array equals to 10. This is probably the best solution but your loop will run more than 110 times (though the conditions will only be accessed 10 time each). You'll need an if statement to quit the loop if all 11 elements equal to 10. If you want to use a for loop that runs 110 times you can use a similar approach, but you'll have to add more code to select a different number if you've already called it 10 times. 2. Do you want to quit the loop immediately when the button is pressed even if it isn't done executing? Do you need the loop not to move on till the button is pressed?
1) One way would be to create a for loop that loops 11 times. In this loop, you could randomize a number and have a switch statements for each condition. You can create a loop for it to run the condition 10 times. 2) the interface "reactions" are called callback functions. The function is called when a change has been made(for example when someone has changed the slider or pushed a button). So if you want to find some example on this you can Google -pushbutton callback function- Hope this gives you some starter-help
You might find this interesting: [https://www.gnu.org/software/parallel/parallel\_tutorial.html#Parallelizing-existing-scripts](https://www.gnu.org/software/parallel/parallel_tutorial.html#Parallelizing-existing-scripts) It includes an example with Octave, and may be applicable to Matlab, too.
Are the processes suspended because they need a controlling TTY? Then try --tty.
You‚Äôll often find that some operations on the *verge* of being complex will return complex from machine precision. You can make a function to compare the magnitude to the real and convert to real if it is below some tolerance.
This is what I ended up doing!
1. Could you give me an example of the code for the while loop with a counter. It feels like nothing I use works 2. I want the loop to start again each time a button is pressed. The project is to ask the participant to identify one of 2 pictures by pressing a button and then a new picture shows up. Each of the pictures should show up 10 times (11 pictures).
TestDone = 0 ImgUsed = zeros(11,1) While TestDone=0 Num = round(10*Rand)+1 % generate an integer 1 to 11 If imgUsed(Num)&lt;10 ImgUsed(Num) = imgUsed(Num) + 1 %execute image code %check for button press ( a while loop to do nothing till button is pressed) End % end if to not execute if already seen image 10 times If sum(ImgUsed) =110 testDone = 1 End End Make sure to fix the syntax, I'm on my phone and don't use Matlab much anymore. Hope this gives you an idea. The while loop will keep generating numbers till all indexes of your array = 110.
100000x thank you!
So you just want to throw away the face and edge data and take a random subset of the vertices?
Yes. Also I would ideally want to get a random subset and then get the same points from another deformed version of the mesh. So one subset from the normal mesh and the same subset from the deformed version of the mesh. I don't know if I worded that correctly. I will really appreciate any help. Thank you!
The whole point of writing an abstract class is to make sure that any class that inherits it overrides all the functions it is supposed to or else it will throw an error. This is to provide a "cookie cutter" class template that other non-abstract classes will implement.
I'd be tempted to instead use randperm to generate a randomly ordered array between 1 and 110. You can then divide by 11 and look at the remainder. This will give you an array the right length with a random order of numbers between 0 and 10 that you can use for either a switch statement or ifs in the for loop.
What format are your meshes in? You can usually read mesh formats in connectivity tables for edges and faces. You‚Äôll need to find or write a code to read your file format ‚Äî unless your are creating that data in Matlab. There should be existing code to read most common types. Once the order of the vertex lists doesn‚Äôt change between deformations (so you just jiggle the values of the vertices and leave the connectivity tables alone) this should be pretty trivial.
Thank you so much for the help! I have loaded and plotted the data in MATLAB already. The data is in two tables one with the node locations and one with the elements (ie what tetrahedron those nodes belong to). I don't understand what you mean in the second part of your comment. The order is the same in the deformed and non deformed meshes, just the values inside have changed. Should I just pick some random set of the nodes and plot them? Thank you!
Fixed it by using readtable then datetime(variable, 'format', 'dd-mm-yyyy HH:MM') for the time column and then table2array and str2double for the rest of the values.
I've used this before. &amp;#x200B; [https://uk.mathworks.com/matlabcentral/fileexchange/21799-clickablelegend-interactive-highlighting-of-data-in-figures](https://uk.mathworks.com/matlabcentral/fileexchange/21799-clickablelegend-interactive-highlighting-of-data-in-figures) &amp;#x200B; &amp;#x200B; If you have a hunt through the code you should be able to do it.
Please don't simply do HW questions for people. Giving guidance and suggestions is fine, simply doing it for them is not.
How complex is this system? Single node/element, or a much bigger problem? Even with your somewhat obscure problem statement, single node total solve time shouldn't be prohibitive. Just keep in mind that you are doing 360k iterations (presumably).
Okay so you‚Äôve already got your data in Matlab. So you‚Äôve an n x 3 vector called `P` which gives the x y and z locations of each vertex. And a second vector `T` that lists a number corresponding to the tet the points in `P` belong to?
Yeah. T is n x 4 dimensional where the 4 values are the indices (indices are for the n x 3 matrix called P) which make up each tetrahedron.
The real issue is when angle change is done inside differential integration is done aroun 20 seconds for 100days. But the result is simply wrong. Not by a lot but wrong. When done outside with a loop with 60second tspans each time, it takes around 20 mins. The difference looked too big to me 6 elements are present (3pos 3 velocity)
Could you post a code sample?
Cool. This means that you have a `T0` and other `T1..TN` arrays for each of your distorted meshes. All the same size and all rows corresponding to the same points so that `T0(20,1:3)` is the base state of `T0(20,1:3)` in a distorted state. We can then use `samples = randperm(length(T0))‚Äò to get the ransom rows we need. Just take the first M elements to want. If `length(T0) = 1000` you could take `samples = samples(1:500)` to randomly sample half the data: `T0(samples.:)`. You can reuse this samples array on all the other deformed datasets to ensure consistent sampling. You may need to sort samples first depending on your use case.
Will check this out!
This is really helpful. Thank you so much!
Need a better idea of what you're trying to do, like an example for two different blocks.
Please format your code, by inserting 4 spaces before each line, so it looks like this
Check out find\_system() and get\_param().
Do you mean with Matlab or analytically? It would depend on the type of function and how smooth it was.
Thanks. I have to explain theoretically in my report.
Are the points linearly spaced?
The is the coordinates of a satellite xyz positions. The data is collected every 5 second for a period of 1.5 hour. So yes the data is uniformly spaced.
Rsquared, BIC, AIC, adjusted Rsquared are a few goodness of fit criterion. Look 'em up
Got it. Thanks!
I think there is a way to make ode 45 pause after an event and apply a change, I havnt used it before but it's in the ode45 documentation Also it may help to run the profiler to see if any other play of your house is slowing you down
If it's now alot of points you can use the function handle to label it into the legend Other solution is to use text()
I‚Äôm not a satellite trajectory expert but 6th order seems way too high. Have you tried extrapolating with the fit you found? I‚Äôd guess the extrapolation won‚Äôt look right compared to a reasonable expectation of future position. This would be another subjective measure of the fit.
It looks like it's trying to connect to 127.0.0.1. There should be an option for the external mode to connect over serial. That's probably what you want.
have you tried using the fft function
With no idea what you already know, here's a "shotgun" approach. Some search terms that might yield useful information for you (use "matlab &lt;term&gt;" for these in Google): * matrices * vectors * fft * fftshift * function * anonymous function * plot *(either to check your answer or as required by the assignment)* * publish *(to present your work clearly if desired)* Prefer MathWorks sources here. --- Some additional search terms that may or may not be helpful (not specific to MATLAB): * Frequency Domain * Fourier Series * (Fast) Fourier Transform * IEEE 754 I personally prefer Wolfram MathWorld for its clear, concise descriptions, but Wikipedia should work as a good starting point to get you going if WMW doesn't give enough information for you. Best of luck!
thank you very much ,my knowledge so far is minimum so this is gonna help a lot
You're most welcome. At the very least it should help you focus on the most relevant topics!
yes there is a setting to choose it but I have already chosen serial communication. And also it is not working normal mode. Thanks for your reply.
a 6th order polynomial? Whether your satellite is ballistic or orbital that seems like trying to fit your noise into reality.
You know the closed form solution to something in orbit. Depending on velocity it will be a type of conic section. You might get lucky and have it be a porabola. You can do a Taylor expansion of the exact solution. Above the 6th order is the residual you will have remaining by subtracting your fit. I'm assuming the high order terms are uncorrelated with the lower orders.
I don't know what a lot of points constitutes for you but somewhere around 350. I tried using text() but it shows the text by default. I want it to stay hidden until you click the point or hover above it.
Hello
Sorta got it right by plotting each point and assigning a tag to it with Sprintf. Only now the legend is fucked up with several entries instead of only 3 groups. It would be easier if I had access to statistics toolbox but unfortunately I don't üòî
Coursera should have a variety of options, some of eh≈üch should be free. Udemy might also be a good place to start looking, although nearly all the content there is paid I think. Othet than these you can check edx, too.
I found codecademy pretty useful. They offer free and paid options.
I second Udemy and they also have some sales. You can try working through some computational neuro work through Adrienne Fairhall and Raj Rao‚Äôs Coursera course or through the Trappenberg text. Unsolicited pro tip: don‚Äôt apply for neuro, apply for biology or umbrellas; too many fucking people are applying to neuro these days.
A bit of shameless self-promotion for my MATLAB courses, several of which are designed for neuroscientists: [http://sincxpress.com/](http://sincxpress.com/)
&gt;a neuroscientist‚Äôs opinion of what ‚Äústrong coding‚Äù is, is a joke. Ouch!
It‚Äôs true! I worked at a neuroscience research institute (over a hundred PhDs working in neuro) and a ton of them couldn‚Äôt program well at all and yet prided themselves on it. Turns out no one was using github correctly if at all, zero actual documentation and tests written, no tools like continuous integration to test compatibility, nobody knew what Docker was, everyone was writing huge scripts instead of proper classes, the list goes on.
Yeah I think because they're so unspecific about what they want you to be able to do, as long as I have some skills I will be able to blag it
MathWorks has its own intro course. It's called matlab onramp. It's small enough and nice way to start
Well, the spring constant dimensional Formular gives you F = m*a = -k*x Then you have to read the text whether the solution should be time-dependent and whether gravitation plays a role. The implementation should not be too difficult
I mean, the continuous integration and tests I would qualify into the realm of actual software development. But the rest is fairly hilarious.
I don't think Matlab is the right tool for this
thanks, i think you just saved me a lot of time.
Same here, 6th order seems like overfitting unless the object is actively being propelled
&gt;this VS Code extension I too have the same issue. Have you found a solution?
Yes Wolfram Mathematica or Maple is going to handle this better.
That's too many. After the plot opens you can go to tools&gt; Data Cursor And that will allow for you to click on the point and then it will show the value. You can also programmatically turn it on by: datacursormode on https://www.mathworks.com/help/matlab/ref/datacursormode.html Let me know if you find the hovering functionality
There used to be a courseera course specifically on computational neuroscience with really cool examples and stuff. I don't know if it is still running now.
The [collect](https://www.mathworks.com/help/symbolic/collect.html) function requires a symbolic expression as the input, not a matrix of, what I am guessing, double-precision floating point numbers. That is the source of the error. Perhaps there is a local function called "collect" or an overriding function by the same name used in the code that is not on the path? (I would hope not - it is very poor practice to override existing function names)
The [`collect` built-in function](https://www.mathworks.com/help/symbolic/collect.html) operates on symbolic expressions. It may just be a hold-over from previous versions of MATLAB, wherein `ones` would automatically be converted to a symbolic vector of ones. You should be able to wrap it with a [`sym` function](https://www.mathworks.com/help/symbolic/sym.html) call and restore the previous functionality: theta(dd, :) = alpha + collect(sym(ones(1, cc)), 2, K, zz); Not sure because I can't download your file at work, but try that and see if it resolves your problem. If not, you can [put a breakpoint on that line](https://www.mathworks.com/help/matlab/matlab_prog/set-breakpoints.html) and mouse over each input to `collect` to check whether it is symbolic or double. Hope that helps.
Partially on topic question: do you have a FPGA acceleration team at MW? Have any of them tried out CHISEL successfully? Aerospace avionics uses a lot matlab and FPGAs and I‚Äôm so curious about CHISEL.
Kudos on phD. You can always refer to some starter introduction videos on matlab. Matlab is used very broadly and i suggest you learn what you will be dealing with instead. For example Signal analysis might be of use to your case. I recommend watching the introduction video on youtube and then looking at webinars (mathworks) that apply to your field.
Hi, we were given this assignment in a masters course,so, I guess they just want us to learn the procedure.
ahhahahh it is GRACE A satellite
got it thanks!
There's little reason a neuroscientist would need to use Docker
I suppose you‚Äôre right in a general sense but I know a ton of those that build tools who do use it and a use case is anytime a tutorial on a tool is given at a workshop. Things like DeepLabCut, LFADS, KiloSort, or Suite2P all benefit (or could benefit) immensely from its usage.
HDL Coder can convert MATLAB to Verilog or VHDL, and there are support packages for a variety of FPGA boards. I‚Äôm not aware of any capability supporting Chisel code generation (or integration.)
I'm just finishing introduction to programming with matlab at coursera. I didn't pay for the certificate, and all of it was available and easy to follow. I've actuallyearned a lot. It says 9 weeks, but it's taken me about 4 and I work full time amd have two small kids.
You took the time to write this out but not to google it. https://www.mathworks.com/help/matlab/ref/eig.html Just remember, most common questions for Matlab are guaranteed to have an answer on mathworks.
I'm currently attempting to speed up Simulink sims, and so far I have attempted dataflow domain, pipelining, and converting subsystems to custom Simscape blocks and using the partitioning local solver. While the Parallel Computing Toolbox is very helpful for running many simulations, how would you recommend setting up a complicated Simulink model for concurrent execution?
Is that useful coz im also looking for learning matlab programming
I think so. I've used matlab for years between undergrad, some graduate courses and work, but a few months back I was trying to take a set of robotics courses (also on coursera) and stopped because I didn't understand the code, which was all in matlab. Now I feel ready.
ODEs do not have eigenvalues. A matrix has eigenvalues. ODEs have poles (which is, strictly speaking, a subset of eigenvalues of the matrix A in your case). You can use eig(A) to compute eigenvalues of A. Tricky part appears if A is not diagonalizable...
I'm reading the book Matlab:a practical approach to problem solving book by stormy attaway . I don't have any previous experience with Matlab. Any suggestions
I guess I formulated my question incorrectly. My end goal is to get the modal frequencies and the damping coefficients for a system described by a set of differential equations. The only way I know is to arrange it in x\_dot=Ax+Bu form. And then getting the eigenvalues of A. &amp;#x200B; What Im looking for is, is there another way I could go about getting these without forming the A matrix and getting its eigenvalues?
You can formulate it as E*dx/dt = A*x + Bu, in which case modal frequencies will be a subset of generalized eigenvalues of (E, A). But the vector B might not align with all eigenvectors, in which case some of these modes will be (so called) uncontrollable.
I really don't. 90% of what I've done with matlab is associated with coursework or processing flight data. I'm taking this course because I want a more disciplined approach than what I've been doing. My freshman programming for engineers course was useless, and it's been over 20 years so I'm taking the coursera course.
It looks like you might be using a state space model. If so, you should consider using [Matlab's built in functions.](https://www.mathworks.com/help/control/ref/ss.html) &amp;#x200B; It gives you a lot of convenient features, like step response and bode plots.
My comment will be mostly about Simulink and not so much about Simscape (because I rarely use Simscape), but some information may be useful. It's difficult to answer in general to this question, because there could be a lot of reasons for that, but you may found tips on [this page](https://www.mathworks.com/company/newsletters/articles/improving-simulation-performance-in-simulink.html) There are a few tools to help you to identify bottleneck listed in this page (the performance advisor, the simulink profiler), some general advice on modeling ("simplify" the model, for example with less logging, or with less fidelity for some parts, if this is still ok for your specific case of course), a few words about solvers, ... There is also this blog post https://undocumentedmatlab.com/blog/improving-simulink-performance with similar advises. Both this link are a little old, so I would add one tool to these, which is the [solver profiler](https://fr.mathworks.com/help/simulink/ug/examine-solver-behavior-using-solver-profiler.html) which profile the Simulink solver, this can help you to determine some reason of solver resets, zero crossings, ... if you are using a variable step solver. In addition to all that, if you use model reference, you can set some of these to accelerated mode and keep the rest in normal mode, for example if you need to log, or debug some part, you can keep these in normal mode, and put the rest in accelerated mode. (but again, if you are using simscape, as far as I know, you have some limitation, like the fact that only simulink signal can cross a model ref border, not Simscape physical signal)
As far as i know you should be able to extract the fieldnames from your smaller struct with the function "fieldnames" and then assign the values of these fields to the larger struct with data(j).(fieldnames{i})=data_smaller.(fieldnames{i});
Have you tried deploying it to an installatable EXE file? I use this with my GUIDE applications. [https://www.mathworks.com/matlabcentral/answers/1884-how-to-convert-my-gui-program-to-an-exe-file](https://www.mathworks.com/matlabcentral/answers/1884-how-to-convert-my-gui-program-to-an-exe-file)
Octave is completely free but may not have all the options
No I have not. However, I am not sure this is a viable option for me, as I cannot guarantee to have another computer dedicated to this.
Did you ask your teacher?
This will package a distributable Matlab license to the other computer. You will be fine. You need only 1 license on your development computer.
I've not used a slider in any of my apps, but looking at [its documentation](https://www.mathworks.com/help/matlab/ref/matlab.ui.control.slider-properties.html#d117e1588986), I think there is a mismatch between limits, actual major ticks, and the labels: &gt; If the length of the MajorTickLabels array is different from the length of the MajorTicks vector, MATLAB ignores the extra entries of the longer array. If there are extra labels, they are ignored. If there are extra tick marks, they display without labels. I'd guess that `max(usableData(1).t)` is not the same as `max(usableData(1).t(end))` if pressed.
Yes, this works. But it only assigns values according to the row number, not the field name. (Or maybe I got it wrong...). This is an issue as the data struct and data_smaller struct have different sizes. I could do a work around and make the equal sizes, assigning the remaining fieldnames to nan, but I just wondered if there is a more elegant way of doing it.
&gt;I'd guess that max(usableData(1).t) is not the same as max(usableData(1).t(end)) if pressed. Do you mean that max(usableData(1).t) is not the same as max(app.timeSlider.MajorTickLabels)? I know that command won't actually work (MajorTickLabels is a cell array, and it's full of char's, not doubles) But either way, they both have the same value as their max. The issue (I believe) is that MajorTickLabels is a 1x9 cell array before the limit change, and under the new limit change, it *should* be a 1x19 cell array, but it stays as a 1x9 cell array. So like the documentation says, there are extra tick marks (but they aren't really extra, they correspond to the limits?) and they're displaying without labels.
You mean like: x = [1 2 3 4 5]; y = num2str(x);
Similar. More like x=[1-4a 35 1-8]. I want to be able to search a matrix like above, but I have to resolve the error first.
Hm, I guess I don't really understand the problem. Does your matrix already exist in this form? How can you have a numerical matrix that has '1-4a' in it? That's a string.
&gt; Do you mean that max(usableData(1).t) is not the same as max(app.timeSlider.MajorTickLabels)? No. I meant that your max value is probably not at the end of the `t` field (making a grand assumption that `usableData(1)` is an element of a structure array). That would make the value at the right end of `Limits` is greater than the last value in `MajorTickLabels`, leaving some number of unlabeled ticks. It's just a guess because I can't see anything in your app; try using breakpoints to check my guesses or any ideas they inspire in you. &gt; The issue (I believe) is that MajorTickLabels is a 1x9 cell array before the limit change, and under the new limit change, it should be a 1x19 cell array, but it stays as a 1x9 cell array. In order for this to be true, you'd need to change more than just the last element. You only update the last value in your code: app.Slider.MajorTickLabels{end} = ... You can try `num2str` [using `arrayfun`](https://www.mathworks.com/help/matlab/ref/arrayfun.html#mw_a84ac799-5b0e-48c2-b111-6397a3e23d04) if you think that's more likely the issue.
My bad. Yes, I copied it from an excel sheet. I think MATLAB treats 1-4a as 1 minus 4a.
&gt; No. I meant that your max value is probably not at the end of the t field (making a grand assumption that usableData(1) is an element of a structure array). Oh, yeah, I checked that just to make sure, and it's true. But I fixed the problem-- I had to recreate the slider. I'm sure I could've fixed it by manually extending the cell array, but that's a pain. Thanks for your help!
I'm glad you were able to sort it out!
I don't know that MATLAB can even handle that. If I try an input like: x = [1-4a 35 1-8]; MATLAB will ask me to correct it to: x = [1-4*a 35 1-8]; That's okay, but if a doesn't exist, that won't work. And that *still* won't result in an array that says that. It'll give you whatever the result of that expression is. Is there any way you could provide a screenshot, or some way to show me the actual matrix as it exists *inside MATLAB* (not in excel)? I'm trying to understand how your data exists.
I have the same question, what form is the matrix in currently? If there's letters it's not a numerical matrix.
Cab\_1=\[ 87016571 86639305 86980360 86980361 86980362 86980367 86980378 86980380 86980384 86980385 86980400; 86980420 86980429 86980513 86980514 86980515 86981461 86981496 86987885 87342006 87343600 87343612 87343613; 87343621 87344030 87344205 87344207 87344209 87344225 87526197 87529248 87529312 87529314 87529315 87529316 131-642; 1343962c1 1994980c1 260-16516 260-54310 27-8343 282056a1 333772a1 336304a1 353-402 355532a1 408566a1 432-816 47391607; 86639002 22-824 277905a1 514-865 84127708 515-23365 814-12130 bn9990114 251090a1\];
This is what it shows in MATLAB? In your Workspace, does it say Cab_1 is a mxn cell?
I tried it out. y1 has 2 columns but the same amount of rows as tspan. you can plot both columns as: plot(t, y1(:,1)) figure plot(t, y1(:,2)) The : symbol in matlab selects every element in the row/column in the matrix location.
Take a look at containers.Map, you might find it to be a better way to store and merge your data...
Seems pretty straight-forward to me that you should solve them analytically by hand and use the solution to plot some results and then to use the numerical built-ins and then compare. What are you confused about?
What's your initial condition?
Y=0 and dy/dz=0 @z=0
There's no universal standard or law that enforces the relationship between a file format and a file name extension. I could save an excel file and rename it .chn, if I wanted to. There's also no guarantee that the format is documented in any publicly available source. It may even be intentionally encrypted to protect a proprietary data format. Essentially, without telling us anything but the file name extension, you can't expect any help at all. Your only real hope is to 1. Investigate the file format yourself. Maybe you'll get lucky and it's just a csv file, or a particularly organized hdf5. 2. Check the file exchange and see if somebody else has reverse engineered the file format and written some functions to read it.
This is pretty trivial from the standard method of generating continued fractions, isn't it? It's just repeatedly taking the integer component and adding the reciprocal of the remainder, right? It's been a while since I was in high school so I could be out of practice.
Invalid expression. Check for missing multiplication operator, missing or unbalanced delimiters, or other syntax error. To construct matrices, use brackets instead of parentheses. &amp;#x200B; The variables weren't made because of the error.
Yes, that would help.
Wait, is sprintfc() a real thing? I have been making up a function like that in my libraries for years now (I even named it "sprintfc") but had no idea Matlab had a built-in version. When did this appear?
Dunno, but yes, it's real. It's undocumented AFAIK.
Hi. Structural dynamicist here. First, what is the excitation source? Sine or random vibration? Secondly, if it is sine, provide the amplitude and frequency or if there is a varying sine sweep, provide the sweep rate. If it is a random vibration, provide the PSD break points and frequencies. Mile‚Äôs equation (convert accel to displacement RMS) can be used for random vibration and you would have to multiply by the appropriate standard deviation (usually 3-sigma since most shakers have 3-sigma clipping) to get the expected SDOF peak displacement. For sine, you can simply double integrate the signal, or if you‚Äôre looking at single frequency, hooke‚Äôs law for a spring-mass system can be used. This assumes you know the spring rate. If you‚Äôre deriving the natural frequency, I can provide more info but you need to clarify what you have and what you‚Äôre trying to solve (besides just displacement).
To troubleshoot, call *your* function (not ode45) with those values, and hand calculate the derivative from the equations you are given. Hint: there's nothing wrong.
Ha! Should've known Yair would know about it.
Thanks for the advice. If I use a breakpoint and investigate the other variables, they others are all doubles also. If I wrap ones(1,cc) as sym(ones(1,cc)) I get an error saying there are too many input arguments to collect function. Any ideas?
GA has no guaranty to converge in finite time to the global solution in a real problem. There is no global algorithm that actually work for any non convex problems. So this is not a so much surprising issue. Without more details, it's difficult to help. You may increase the population size and double check the distribution of the individuals accros the research space. Then, the parameter running can be tricky and needs to be adapted to each problem. What did you try?
Would you have to pass f'(z) in the ODE to create the second row? I think I understand how it's working, but if you're trying to solve for y with respect to z and there's only the second derivative of y and not the first, I'm not sure how the initial condition figures in.
Normally you are able to to install older versions without a problem (I have however never tried this with the student version). Just log in on the website and search for the version you want and you should find the installer.
https://www.mathworks.com/help/symbolic/collect.html At the bottom, it states this function was introduced before 2006.
Why can I not seem to find the feature list anywhere? What is new in this version?
It should be function (a,b,c,d). Then you write what you want your function to do in terms of those variables.
Ode45 doesn't know or care about second derivatives. You need to convert your second order diff. Eq. to a system of two first order differential equations to use ode45. I don't know whether your question is about ode45 solving the first order equations, or about converting the form of the equation for a numerical solution. If it's the latter, you have a math question not a Matlab question.
the function needs a name and input &amp;#x200B; `function my_function(a,b,c,d)` &amp;#x200B; `A = [0,1;1, a]` `B = [0,1;1,b]` `C = [0,1;1, c]` `D = [0,1;1, d]` `return A*B*C*D` &amp;#x200B; `print(my_function(2,3,2,2))`
Yeah I think it has always been there. I read that it didn't used to require symbolic inputs though.
You want to return a matrix like: [a b] [c d] from entering a, b, c, and d? [Read about functions here](https://www.mathworks.com/help/matlab/ref/function.html). The five key pieces are the `function` keyword, the output arguments, the function's name, the input arguments, and the body of the function. A very simple approach to create your requested function would be: function A = twoByTwo(a, b, c, d) A = [a, b; c, d]; end You would call it by invoking its name, and giving the four input arguments, assigning it to a workspace variable of your choosing if you'll need it for further computation: my2x2matrix = twoByTwo(2, 3, 2, 2) Here I've chosen to use the same inputs you gave, but assign the output to a variable `my2x2matrix`. If I want to use that 2x2 somewhere else, this is a convenient way to do it. This syntax (without a closing semicolon) will also display the result of that line in the command window. I'm not sure if you were looking for the matrix [7, 17; 16, 39] (which is what you'd get using your `A*B*C*D` implementation), but it's not clear from your function definition what the result would be without trying it. Double check [how matrices and arrays work in MATLAB](https://www.mathworks.com/help/matlab/learn_matlab/matrices-and-arrays.html) if you're unclear. Hope that helps!
This is incorrect. The form would be function [out 1, ..., outn] = fnc_name(a,b,c,d)
You didn't include the actual error message, just two locations where errors occur. You're looking at part of the "stack", the functions currently being traversed in the code; note the error in `seg3D` is at the line where it calls `imFormat`. The actual error will be a message like "Not enough input arguments." or "Error using *. Matrices must be the same size". Looking at the red squiggly underlines on that line, however, I'm going to guess it doesn't like your call to `findstr`, which is deprecated in favor of `strfind` or `contains`, [as per the documentation](https://www.mathworks.com/help/matlab/ref/findstr.html). Maybe `file(1)` doesn't exist, or maybe it doesn't have a `name` property. Maybe the `name` is actually a double precision floating point number. Who knows.
No, that means it's always been there in this form. Mathworks wouldn't alter an existing function while maintaining its old name. That would break backwards compatibility.
&gt; Any ideas? Sure, find the file (or function within this file) called "collect" and double-check its implementation to see why it accepts 4 input arguments (instead of the usual 2 from the built-in), and then look at where `K` and `zz` are created to see why they're not symbolic. See the documentation I linked you for what I mean. &gt; Is it possible for me to run the file using previous versions of matlab? Most likely. It would be good to know what version you'll need; the downloads are pretty big and take quite a while. Maybe ask the current professor of the course.
When you say "Matlab is complaining a lot", what do you mean? I assume it's producing a warning or error message that is describing the problem, right? Why don't you tell us what it is? Have you read it? Usually warnings and errors tell you exactly what's wrong.
Just so we've both got the same reference material, [a complimentary link to the documentation](https://www.mathworks.com/help/matlab/ref/repmat.html). `repmat` just ***rep***eats the ***mat***rix. From the syntax choices given, we want to look at the second one: `B = repmat(A,r1,...,rN)`. Treating `A` as a distinct element, we can think of it as being copied into `r1` rows, `r2` columns, ..., and `rN` whatevers (N-dimensional matrix). This means that if you have a 2x2 matrix, and make 2 "row copies" and 2 "column copies", you have a new block matrix like: A A A A Since A is 2x2, this is now a 4x4 matrix. For the examples you have, there are 2 row copies and 1 column copy of `spikeTimes` in the first, and the column vector [0; 1] is turned into a 2x4 matrix (one row copy and 4 column copies) in the second. You can [put a breakpoint on that line](https://www.mathworks.com/help/matlab/matlab_prog/set-breakpoints.html) and while you're running the code it will pause there. You can then select just the portions of code you want to look at in the editor and press F9 (or right-click and choose Evaluate Selection) to have it output the result into the command window. This way you can see exactly what you're getting from both of the calls to `repmat`
repmat is short for 'replicate matrix'. This function makes a new matrix using the original, tiled in the pattern defined by the next two entries. In this case, you are replicating spikeTimes in a 2x1 (two row, 1 column) tiling, and the array \[0; 1\] in a 1x4 tiling (1 row, 4 columns). &amp;#x200B; I would suggest typing the parts you don't understand in to the command line and seeing what they output. It will make it more intuitive.
thank you! Why would the \[0;1\] column vector become a 2x4 matrix, if it is assigned 1 row copy and 4 column copies (1x4)? The textbook agrees with you but doesn't say why this is the case.
thank you! this may be an obvious question, but why would you need to use repmat to create a plot?
Simple: 0 1 That's the original version of that column vector. If I only make one "row" of it, my first dimension is already 2. If I then copy it four times in the column dimension, the second dimension is 4. Another way to look at it is (2x1)\*(1x4) = (2\*1)x(1\*4) = 2x4. Hope that helps.
I'm not sure (especially about landscape orientation), but would printing give you the output you desire?
thank you! this makes more sense. I asked this question to the user below, but why would you need to create more dimensions to create a plot in the first place? If it helps, here's the excerpt from the text that I have trouble following: *In MATLAB, there is no function for vertical lines specifically, so we use the general purpose function line. It takes matrices to specify x and y coordinates and plots one line for each column whereas row-values indicate start and end positions of the lines. We have to create these matrices first, so we create two 2 √ó 4 matrices with the repmat function.* &amp;#x200B; (if it helps, in the spikeTimes variable there are 4 time points where a spike occurs) &amp;#x200B; Thank you for your help!
Whoops you‚Äôre totally right, edited my initial comment.
MATLAB's documentation is second-to-none in terms of programming languages. I suggest you read the [documentation for the `line` function](https://www.mathworks.com/help/matlab/ref/line.html) and combine that with what you've read in your book. Specifically, take a look at [the section on input variable `y`](https://www.mathworks.com/help/matlab/ref/line.html#buzqtg4-y) for an explanation of exactly how it uses various types of inputs.
Yes. You take a photo of your screen in landscape mode then print it. Like lol.
Thank you!! That's extremely helpful. Yes, I ended up figuring it out right as I was typing my reply- I should have just added in an edit, my bad!
Why does it need to be in landscape? Can you not just split the code into multiple lines for ease of reading?
What happened when you tried running parts of this in the command line? Obviously, you tried to use the repmat function after reading the documentation, so what happened?
[https://www.mathworks.com/help/matlab/ref/publish.html](https://www.mathworks.com/help/matlab/ref/publish.html)
Personally, I would just publish it to a doc file, make that file in landscape orientation and then convert it to a pdf.
Oh My God. Smart boi.
I am trying to run the following code (you need to download and unzip it I'm afraid - takes 30 seconds): &amp;#x200B; [http://www.gatsby.ucl.ac.uk/teaching/courses/ml1/asst4code.tgz](http://www.gatsby.ucl.ac.uk/teaching/courses/ml1/asst4code.tgz) &amp;#x200B; In any case, my question is not to do with how to complete the missing code but rather a bug that seems to be present in the provided code. As part of the assignment, we are meant to fill in the files stdgibbs\_logjoint.m and stdgibbs\_update.m so that we can then run the code in toyexample.m &amp;#x200B; However, if you look at toyexample.m, you should be able to execute the first few lines to load in the data without having to complete either stdgibbs\_logjoint.m or stdgibbs\_update.m. However, when I run the line `[zi,theta,phi] = lda_randstate(I,D,K,W,di,wi,ci,citest,Id,Iw,Nd,alpha,beta);` &amp;#x200B; I get the following error: &amp;#x200B; `Undefined function 'collect' for input arguments of type 'double'.` `Error in lda_randstate (line 19)` `theta(dd,:) = alpha + collect(ones(1,cc),2,K,zz);` &amp;#x200B; I am confused about this for two reasons: (1) I don't understand the problem and can't find much help online (fairly new to MATLAB). (2) Although this is a past course that has now finished, it is at a reputable institution and I am surprised nobody would have encountered the same issue, leading them to update the code on the website. Do other people hit the same problem when running this? Thanks
What happened when you tried the instructions and demo on the page you linked?
I don't have Matlab on my phone, but that's rarely relevant. I suspect the author of this code has written another function named `collect` that it expects to find on your path. Maybe there is a directory of functions you need to add to your path.
I will check and get back to you. Thanks.
Ok. You were right - there is a folder called "utilities" that contains a collect.c and collect.mexmac file. When I look in the "current folder" panel on the left of my screen which shows all files, the "utilities" folder is greyed out and if I hover over it MATLAB tells me it's not part of current path. I right clicked and selected to add this folder and all subfolders to current path and it is no longer greyed out. However, I still get exactly the same error message. Do I need to copy the collect.c and collect.mexmac files into the same folder as the .m file I'm trying to run? What else could be going wrong here? Thanks again
I assume it needs to be compiled. I don't write mex functions very often. The author of this code needs to have his keyboard confiscated for naming a function the same as a built-in function.
What does "needs to be compiled" mean?
I don't know if I follow but what's wrong with the built-in print functionality. Does it have to use the _publish_ feature or do you just want it in PDF form?
Also, I'm worried about mexmac since googling that suggests this might be mac specific code and I'm running on Windows.
Update: all good now! I was panicking that I had to play around with visual studio when I googled this but turns out you can just go to relevant directory and use mex filename.c direct from MATLAB command line. Thanks a lot for your help here!!!
Take look at this and think creatively. If you are tenacious, then you can get what you want: https://wkhtmltopdf.org/
Do you just want the code printed? Do you need the output or any plots or anything? Whenever I'm publishing Matlab code with output, I like to use LiveScripts. I've never used landscape orientation for that, but I bet it's an option.
I you use LaTeX, getting landscape is easy, and you could use something like this: https://se.mathworks.com/matlabcentral/fileexchange/8015-m-code-latex-package
it runs as expected
Awesome, I'm glad it worked out :)
Then what exactly is your question? What are you trying to do and what roadblock are you encountering.
Is dvh a cell array? Then you need to use curly brackets to access the value of from the cell at the index. dvh(i,1) will return a cell, while dvh{i,1} returns the value of the cell.
this didnt work, it says check for missing multiplier in line 13, column 8 where it says return
Well, unfortunately this is protected by an NDA, so it's unlikely anybody will post it. As a long-time user I can say that there are some nice QOL improvements.
Very cool! I like the animation
Thanks :), does the included gif work for you? I tried fixing it 3 times, but it doesn't show for up for me.
Yep, works for me. I am on the Android mobile app
curly braces to index cells. You can sub index each cell's array like mycell{2,3}(5,:)
I don‚Äôt know the matlab tricks to solve the full differential problem, but I would look into turning the problem into its weak form and making a finite element and just approximate the domain with triangles. I would also look into the Newton raphson algorithm if you want to solve the non linear equation. If you are exploring buckling/ stability of the problem and expect large deformations then I‚Äôd look into the arc length method which is a modified Newton raphson with an additional constraint.
If i have to use a FEM approach i would use rather another software than Matlab, something like Abaqus, Ansys etc. It is very unpracticle to solve FEM problem with Matlab code. And just for completness i already solved the problem with a commercial software for structural analysis (that use the FEM), so i'm looking specifically for an analythical solution via Matlab code. As i said, my professor in university suggested that one of the ODE solver could handle it, but i really don't know how to do that.
Obviously the builtin ODE solvers can integrate that differential equation easily (i.e. can solve an IVP). Based on your comments it seems your actual problem is a BVP. For this I would recommend writing a BVP solver with multiple shooting using the builtin IVP solver. I think matlab also has builtin BVP solvers but I don't know what they do and I have always written my own solvers for BVP. It isn't that hard after a little googling. FEM is overkill here.
It's going to be a fairly long slog for an internet stranger to work through this one with you. Siemens charges you a fair amount precisely for reasons like this. Ask for their support. Aside: If the company isn't properly supporting you and writing good documentation, there are plenty of FEA programs that integrate with MATLAB
I have tried BVP but it doesn't work because i cannot define a condition for the w'''(r=0)(=0). Or at least in my previous attempt i cannot do that. Any other suggestion rather googling? It was the first thing i did, if i had found something on google i will never ask here.
Yeah I understand, thanks for the guidance. The Visual Basic side of the documentation is great, and I can use that functionality just fine. There‚Äôs just no documentation or examples regarding MATLAB integration. I was really hoping to get just a single example script to go off of. I may just look into what ATA put together with IMAT, but was hoping for something I could implement directly.
This is not MATLAB syntax. That's why it won't work. In MATLAB, [`return`](https://www.mathworks.com/help/matlab/ref/return.html) is used by itself (as opposed to languages like C or Java, where you return a data container of some sort) and serves as an early exit from a function, typically when some condition is met. The [`print`](https://www.mathworks.com/help/matlab/ref/print.html) function allows you to print the current figure to file or to a specified printer attached to the computer, again, as opposed to other programming languages where it might be used to write to the console. Neither of those are helpful for solving your problem. Not sure why the answer got upvotes, but you can safely ignore it.
I was saying you could google "multiple shooting BVP" or something like this to learn how to write one of these. I don't understand what you mean about the condition on w'''. The equation you have written is the boundary condition.
Nice work! This is known as a [Soma cube](https://en.wikipedia.org/wiki/Soma_cube), and is an example of a general class of problems known as [exact cover](https://en.wikipedia.org/wiki/Exact_cover) problems.
No, the bvfcn where i define the different bcs on the two boundaries didn't allow me to define a bc on w'''. As i said in the post on the forum i need to put 6 bcs, one of those is the condition of w'''(0)=0. And with the bvp i couldn't do that. I have tried to google it but i could not found any accurate solution.
The guy below is correct. I haven't been writing Matlab for a while. It was a mix of Python and Matlab. Here is a gist that runs. I downloaded a trial version to [make sure.](https://gist.github.com/Shogun89/615e1945998412ac6924502e85455a8a) &amp;#x200B; There are some comments there...
Since a(i) refers to a single cell in the array and you want to assign a whole column at a time you need to specify that you want to fill the whole column: &gt; a(i,:) = [i;i^2;i^3];
&gt;a(i,:) = \[i;i \^ 2;i \^ 3\]; thank you!
thank you!
Alternatively, you can use Matlab vector notation: Col(:, 1)=1:10; A=[Col Col. ^2 Col. ^3];
Doesn‚Äôt work for me :(
nice!
There used to be a PDF file you can download with the pre release notes, but it seems to be dead now: &gt; https://www.mathworks.com/help/pdf_doc/matlab/relnotes_pr.pdf
Yeah, it's been like that for a while (about a year, if I had to estimate).
One common way that you can represent a function without needing to evaluate it is as a [function handle](https://www.mathworks.com/help/matlab/matlab_prog/creating-a-function-handle.html). &gt;&gt; f = @(x)(2*x) % Create a handle for a new "anonymous" function &gt;&gt; g = @sin % Create a handle for an existing function These function handles can be evaluated on inputs: &gt;&gt; f(4) % Returns 2*4 = 8 &gt;&gt; g(pi/2) % Returns sin(pi/2) = 1 In your case, you could evaluate the function handle "f" at "x", and then add 1 and store the result in "Z". &gt;&gt; f(4) + 1 % Returns 9
Thanks, but I'm still little confused. I've worked with function handles. And I feel like it could solve my problem. But your solution only works for a defined function that I gave in the example. 2*x was just an example, the user should be able to put any equation in for f. 3*x, 2x*+1, and etc. So what I need to figure out is how to change plusone(f,x), f being the user inputted function, into a function handle. Because of I've tried or guessed really.
As long as your "plusone" function accepts a function handle for "f", then the user should be able to define any function that they want and pass it into "plusone". As an example, suppose instead of "plusone" I want to make a function "multfour" that given a function "f" and value "x", returns "4 * f(x)". This would look something like: function y = multfour(f, x) y = 4 * f(x); end Note that "multfour" doesn't care what function "f" is passed into it -- it just blindly applies "f" to "x" and then multiplies the result by 4. Here is an example of applying "multfour" to an arbitrary function: &gt;&gt; f = @(x)(2*x + 1) % User-defined input &gt;&gt; y = multfour(f, 3) % Returns 4 * (2*3 + 1) Another example: &gt;&gt; g = @sin % User-defined input &gt;&gt; y = multfour(g, pi/2) % Returns 4 * (sin(pi/2)) If this approach doesn't work for your question, it may be helpful to understand why the input to "plusone" can't be a function handle.
Not sure i completely understood your question but you may be able to solve it with using a struct with variable fieldname, for example: &gt;Example_struct.var1= etc; &gt;Example_struct.var2= etc; &gt;chosen_var= 'var1'; &gt;Example_struct.(chosen_var) *and so on* Hope this helps!
Thanks for your help. It works if I insert plusone(@(x)(user defined expression) , x ) just fine. I was just hoping there was a way to convert it if the user just stuck in plusone((user-defined input), x). But I guess I can just put in the instructions that the format if the inputs must be @(x)(user defined expression) , x.
If you would like to allow users to enter a string like "2*x" for "f", then you could consider using the "str2func" function: https://www.mathworks.com/help/matlab/ref/str2func.html For example, &gt;&gt; myExpression = '2*x'; &gt;&gt; myStringFunction = ['@(x)(' myExpression ')']; % '@(x)(2*x)' &gt;&gt; myFunction = str2func(myStringFunction) This would give you a function handle that you can apply to inputs. &gt;&gt; myFunction(2) % 2 * 2 = 4 &gt;&gt; myFunction(3) % 2 * 3 = 6 Note that, even in this case, a user still can't just enter something like: &gt;&gt; plusone(2*x, x) % Returns an error Instead, they would need to enter a string for the first argument: &gt;&gt; plusone('2*x', x) In my opinion, accepting a string expression for the user's will be more error-prone than just accepting a function handle directly, so I would still recommend requiring the user to define their function handle explicitly as you mentioned: &gt;&gt; f = @(x)(2*x) &gt;&gt; Z = plusone(f, 3) Hope that this helps!
Use cross correlation with your input signal, and then use the `envelope()` function on the cross correlated signal. Then you can pick a threshold value manually
I don't understand how is this going to help to automatically identify the bone area in an image full of intensity inhomogeneities.
The cross correlation and envelope are to give you reflected signal intensities. You say you have an image of intensities, which I am assuming is the reflected/transmitted amplitude. What exactly is the data you have? What type of setup (how many transmitters and receivers, and in what configuration) are you using to capture the image? I have written code to do this, but I am not allowed to share it
Seems like youre printing it all on one line? Can you try to loop over the data, for every n bytes print the n bytes and add a line break?
It's just an ultrasound image and I want to segment the bone which is the highest intensity pattern
`dlmwrite`
 fileID= fopen(output_file.txt,'wt'); fprintf(fileID,'%s\n',text_out); fclose(fileID);
There are a lot of different techniques to capture an ‚Äúultrasound image‚Äù. I can‚Äôt help you if you can‚Äôt explain what you have so far. Maybe look into some image segmentation techniques.
All of the functions in the documentation that claim to be used for writing data to files? They actually work. It's okay to use them.
`cumtrapz` is just a way to numerically do cumulative integration. Do you know what cumulative integration is?
Doing sub-calculations on their own line and not over writing variables can sometimes make code easier to follow of you're confused. So, it would look like this: mean_pot = mean(Potential); Potential_minus_mean = Potential - mean_pot; cumtrapz(Potential_minus_mean); That's the same thing you're doing above, but just spread out and with new variable names.
Are you just printing one big long string?
Cumulative trapezoidal rule. Find the approximate area "under the curve". https://en.m.wikipedia.org/wiki/Trapezoidal_rule?wprov=sfla1
That's what I am looking at the moment, but the bone is difficult because of its features (shape, position, occlusion etc). The only I can tell is that I used a linear probe of 12 MHz and 40 mm depth, if that helps
So, are you using a single probe in pulse echo mode that you are mechanically scanning? Are you scanning in a line, a 2d grid, or something else? Is your data in a b-scam image or do you have 3d data? Can you link an image of the data?
I'm assuming you know what the mean of a signal is; [here is how MathWorks describes it](https://www.mathworks.com/help/matlab/ref/mean.html) for reference. This is really more of a circuit design/electromagnetics question. If you have periodic signal for your voltage and it can be expressed as: *v*(*t*) = *V* + *v*_*ac*(*t*) Where *v*\_*ac* is the time varying portion and *V* is some DC shift, then removing *V* by subtracting the mean value gives you only the time-varying portion. You can also refer to *V* as the "quiescent value" and *v*\_*ac* as the "small signal" variation. Usually the amplitude of *v*_*ac* is much less than *V*. In the case of some magnetic component (inductor, transformer), integrating that voltage (Faraday's Law), you'd arrive at a flux value that was periodic, with (hopefully) zero mean, which gives you a basic idea of whether or not you're going to hit the saturation flux value for your material. While it doesn't consider the effect of DC premagnetization, it's a pretty good estimate and the one I use in my magnetic component design tool during the first pass.
It is just a simple B-mode ultrasound image. Line scanning I believe. I don't think it has to do with 3d. It is still grayscale image. How can I attach the image to the conversation? Can you please send me your email?
From what I understand, you can post an image on another site like imgur, then give me a link, or you can just do a fresh post with the image, and I‚Äôll search for it
Here is the link of my new post https://www.reddit.com/r/matlab/comments/c7hnkh/ultrasound_bone_segmentation/
You could run a k-means clustering algorithm, give it the number of clusters you think there are and see what mean values pop out. Besides that, you could sort the data set, set up thresholds for segmenting the data and then find the means of the segments.
This seems to be the best answer to OP‚Äôs question.
%\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* %%This fucntion will store transducer coordinates and differences of %%arrival times between each transducer and transducer 1, %the arrival times are aquired via graphData() and is an input broyden() to solve for the % signal location and travel time to transducer 1, adding the difference in % arrival time of each transducer to this travel time yields the travel % time %% %\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* function \[fun\] = eqns(u)%unknown values are input parameters &amp;#x200B; %the pop rock falls vertically and so xs = zs = 0 and we assume the center %of the borehole is at y = 0 &amp;#x200B; xs = 0; zs = 0; &amp;#x200B; %Transducer 1 and 2 locations in meters based on 3D print sample with a %fracture 1/3 of the sample height xt1 = -0.05; yt1 = 0.015; zt1 = -0.015; &amp;#x200B; xt2 = -0.05; yt2 = 0.015; zt2 = 0.015; &amp;#x200B; &amp;#x200B; xt3 = -0.05; yt3 = -.005; zt3 = -0.015; &amp;#x200B; v = 2500;% wave speed in material determined by AST and distance formula &amp;#x200B; %differnce in arrival time between tranducer 1 and transducer 2; % acquire locations of first peaks in transducers 1 and 2 File\_names = dir('\*.csv'); %attain every waveform in the event folder &amp;#x200B; %get files of interest, in this case those of transducer 1 and 2 file1 = File\_names(3).name; file2 = File\_names(4).name; file2 = File\_names(5).name; &amp;#x200B; plus1 = 1; %offset y values plus2 = 2; plus3 = 3; hold on &amp;#x200B; &amp;#x200B; &amp;#x200B; &amp;#x200B; % %prof requested the dts so I need all the first peak locations % numFiles = length(File\_names); % incr = 1:numFiles; &amp;#x200B; % for i = 1:numFiles %call graphData() for each waveform % file = File\_names(i).name; % hold on % plus = incr(i);%needed to offset graphs for plotting % \[p,l\] = graphData(file,plus); % % % end &amp;#x200B; &amp;#x200B; &amp;#x200B; &amp;#x200B; \[p1,l1\] = graphData(file1,plus1); % (ORIGINAL CODE IS COMMENTED OUT FOR NOW TO GET ALL % DTS FROM EVENT 1) % L1 = l1; \[p2,l2\] = graphData(file2,plus2); &amp;#x200B; \[p3,l3\] = graphData(file2,plus2); % L2 = l2; % graphData() gives me locations on the first peak but I only require one of % them % maxL1 = max(L1); % % maxL2 = max(L2); &amp;#x200B; &amp;#x200B; %multiply each location by the sample interval, 1\*10\^-7 to get the arrival %times for transducers 1 and 2 &amp;#x200B; &amp;#x200B; &amp;#x200B; art1 = l1\*1e-7; art2 = l2\*1e-7; art3 = l3\*1e-7; &amp;#x200B; % % tran10= 1038\*1e-7; % % tran13 = 1019\*1e-7; % % tran1 = 1047\*1e-7; % % tran2 = 1054\*1e-7; % % tran3 = 1038\*1e-7; % % tran5 = 1048\*1e-7; % % tran6 = 1042\*1e-7; % % tran8= 1022\*1e-7; % % tran9 = 1034\*1e-7; % % dt10 = tran10 - tran1; % dt13 = tran13 -tran1; % dt1 = tran1- tran1; % dt2 = tran2- tran1; % dt3 = tran3- tran1; % dt5 = tran5- tran1; % dt6 = tran6- tran1; % dt8 = tran8- tran1; % dt9 = tran9 - tran1; &amp;#x200B; &amp;#x200B; %deltat1 is clearly zero deltat2 = art2 - art1; deltat3 = art3 - art1; % deltat2 = 7e-7; &amp;#x200B; &amp;#x200B; ys = u(1); %source location and travel time from source to transducer 1 % are unkown and will be guessed initally with values of % \[0.5;2e-5\] as input argumnents to eqns() ts = u(2); &amp;#x200B; %non-linear system of equations, the first is for transducer 1 and the %second is for transducer 2 fun(1,1) = (sqrt((xt1- xs)\^2 + (yt1 - ys)\^2 + (zt1 - zs)\^2)/v )- (ts); fun(2,1) = (sqrt((xt2- xs)\^2 + (yt2 - ys)\^2 + (zt2 - zs)\^2)/v) - (ts - deltat2); fun(3,1) = (sqrt((xt3- xs)\^2 + (yt3 - ys)\^2 + (zt3 - zs)\^2)/v) - (ts - deltat3); end %end of eqns()\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
There's no way anybody is going to read all this. Try asking a question instead of dumping all your code and expecting us to debug it for you.
Try this- https://www.mathworks.com/help/symbolic/solve.html#buql15h-5 Go to the part- solve multivariate equations and assign output to structure.
Each row has to have the same amount of columns. It's right there in the error message. The fourth row has 20 columns while the other rows have 21 columns.
I just double checked by aligning columns. I'm not missing any column elements. I do use tabs when spacing them. I doubt that affects anything.
Try this. Look in the workspace. Cab\_4 has 20 columns. I don't know what your data is, but conceptually, if you add a zero in the fourth row in your code, it would work. clc;clear; Cab\_1={ '87016571' '86639305' '86980360' '86980361' '86980362' '86980367' '86980378' '86980380' '86980384' '86980385' '86980400' '0' '0' '0' '0' '0' '0' '0' '0' '0' '0'}; Cab\_2={ '86980420' '86980429' '86980513' '86980514' '86980515' '86981461' '86981496' '86987885' '87342006' '87343600' '87343612' '87343613' '0' '0' '0' '0' '0' '0' '0' '0' '0'}; Cab\_3={ '87343621' '87344030' '87344205' '87344207' '87344209' '87344225' '87526197' '87529248' '87529312' '87529314' '87529315' '87529316' '131-642' '0' '0' '0' '0' '0' '0' '0' '0'} Cab\_4={ '1343962C1''1994980C1' '260-16516' '260-54310' '27-8343' '282056A1' '333772A1' '336304A1' '353-402' '355532A1' '408566A1' '432-816' '47391607' '0' '0' '0' '0' '0' '0' '0' '0'} Cab\_5={ '86639002' '22-824' '277905A1' '514-865' '84127708' '515-23365' '814-12130' 'BN9990114' '251090A1' '0' '0' '0' '0' '0' '0' '0' '0' '0' '0' '0' '0'}; %This works thisWorks=\[Cab\_1 ; Cab\_2;Cab\_3;Cab\_5\]; %This doesn't thisDoesnt=\[thisWorks;Cab\_4\];
Actually, I see it now. There is no space in between '1343962C1' and '1994980C1'. It would probably be easier for you, if you just put in commas instead of whitespace.
Using single quotes `'` you have a **char array**. Use double quotes `"` for a string array. (and don't worry with having the same number of characters and so on)
Your 4th row has 20 elements, whereas rows 1, 2, 3, and 5 all have 21 elements.
One you have your clusters, you will presumably have an index vector. Suppose you have 100 items, then your index vector will be a map between item and cluster number, e.g.: index = [1 1 1 4 4 3 6 6 6 9 2 5 5 ...] Once you do that, you can find the mean using a few methods: 1. Look up `accumarray`, you can do it in one line. 2. Make a for loop and loop through each cluster, and do something like `mean(X(index==3))` to get the mean of all values of group 3.
fsolve [https://www.mathworks.com/help/optim/ug/fsolve.html](https://www.mathworks.com/help/optim/ug/fsolve.html)
&gt; They mention two methods in the paper, Inference functions for margins (IFM) or Canonical Maximum Likelihood (CML), and I must say, given the short description of copulafit, I am not sure which one of the two they use. It looks like it depends on how `u` is formed: &gt; By default, copulafit uses maximum likelihood to fit a copula to u. When u contains data transformed to the unit hypercube by parametric estimates of their marginal cumulative distribution functions, this is known as the Inference Functions for Margins (IFM) method. When u contains data transformed by the empirical cdf (see ecdf), this is known as Canonical Maximum Likelihood (CML). [Source](https://www.mathworks.com/help/stats/copulafit.html#bun784_-5) From the paper they reference, the formulas in section 3.3.1 are used, and each formulation is described individually as the section proceeds. Bottom line: how you pre-process `u` determines which of the methods you're using, but they all use the same basic process, as described by the paper. --- Interesting stuff, but way outside my field. Best of luck to you, looks like it's going to be a fun read! :)
and how can i fill my plot with using my countour as reference?
When you say "solve" do you mean analytically or numerically. If analytic, you can use the solve command, but there are better symbolic math toilets than matlab. If numerically, you can use fsolve which requires the optimization toolbox. Otherwise, you can implement your own method. A BFGS quasi-newton is usually a good jumping off point.
&gt; That italics thing is what I want to do with with n-element vectors... I don't see anything italicized but I imagine you're talking about the quoted section of text. Some notes: 1. It looks like it actually wants *N*x1 vectors, not 1x*N*, though it may convert them automatically. 2. You need to assign to the *contents* of the cell, not the cell itself. See [cell array indexing here](https://www.mathworks.com/help/matlab/matlab_prog/access-data-in-a-cell-array.html#AccessDataInCellArrayExample-2). Hopefully that gets you back on track for your assignment.
I'm a bot, *bleep*, *bloop*. Someone has linked to this thread from another place on reddit: - [/r/python] [MATLAB crashing on Python module import on Linux](https://www.reddit.com/r/Python/comments/c7zz7j/matlab_crashing_on_python_module_import_on_linux/) &amp;nbsp;*^(If you follow any of the above links, please respect the rules of reddit and don't vote in the other threads.) ^\([Info](/r/TotesMessenger) ^/ ^[Contact](/message/compose?to=/r/TotesMessenger))*
I suspect you have two different problems here. First, trying to import custom modules - If your custom module isn't on your Python path, MATLAB doesn't know where to look to find it. Take a look at the "Python Module Not on Python Search Path" section of this page for how to amend your Python path from within MATLAB: https://www.mathworks.com/help/matlab/matlab_external/undefined-variable-py-or-function-py-command.html Second, your crashing issue. Importing the `random` module with your example code does not cause a crash for me with Anaconda 5.1 running Python 3.6 on MATLAB 2017b so it's difficult to debug further. A few notes that may or may not be helpful: * From my reading around the MATLAB forums, running Python code in MATLAB on top of Anaconda is technically unsupported. I'm not sure why, but that seems to be the position of the MathWorks. * There are some baffling limitations to Python support. It could be that you're running in to one of these (although this is unlikely because I was able to import random fine in MATLAB. The full list of unsupported things is here, FYI: https://www.mathworks.com/help/matlab/matlab_external/limitations-to-python-support.html * In some cases, MATLAB loads incorrect libraries for the underlying Python code. This particularly seems to be an issue with MKL. On *nix systems, you can tell MATLAB to allow Python to load its own libraries by calling py.sys.setdlopenflags(int32(10)); before you load Python. Admittedly I don't full understand what that command does, but adding it to my `startup.m` before setting my `pyversion` fixed my MLK issues. * Make sure you can `import random` in the Python shell. MATLAB isn't always the greatest about capturing the right Python error messages and returning them in the console.
3
It should have given you an error that says the matrix is singular &amp;#x200B; try the folloiwn g &amp;#x200B; x = pinv(A)\*B
This raises the question you should actually be asking yourself: If every row doesn't have the same number of elements, does this data really belong in a 2D array at all?
Oh the full column of zeros /facepalm Thanks I think that fixed it! Now I'm at least getting numbers. I'm trying to get a solution that is the same as this analytical solution but these numbers aren't lining up at all. fx=@(x4) -(P\*a\*L\^2/(6\*E\*I)\*((x4/L)-(x4/L).\^3)); Any way for you to tell if there's something wrong with my code?? I think it may be in the math itself, which I'm also troubleshooting at the moment.
I can't quite tell what you're doing in that code. But you can solve it analytically with this algorithm but it's a bunch of [work](https://www.quantstart.com/articles/Tridiagonal-Matrix-Solver-via-Thomas-Algorithm)
I'm trying to solve a system of equations with given boundary conditions set forth in this problem. Basically solving the given differential equation at each node and comparing it to the exact solution. I've plotted the exact solution but am getting very different values when solving using the code I showed initially.
fnums = zeros(size(fnames)); %pre-allocate for aa = 1:length(fnames) uidxs = strfind(fnames{aa},‚Äô_‚Äô); %find underscore indices fnums(aa) = str2double(fnames{aa}(uidxs(1)+1:uidxs(2)-1)); %extract file numbers of interest; this method avoids manually specifying indices which will change every 10^x end; [~,sidxs] = sort(fnums,‚Äôascend‚Äô); % sort extracted file numbers fnames = fnames(sidxs);
Do you mean an actual structure where you either use the struct() command or dot notation to fill the elements, or do you simply store your strings in an array or a cell? In any case, you're probably going to have to write something to sort it out. I recommend doing something like the following (I'll assume you have a vector array of strings. array = {'TEST0030_10_1_25976.csv'; 'TEST0030_13_1_25976.csv'; 'TEST0030_1_1_25972.csv'; 'TEST0030_2_1_25971.csv'; 'TEST0030_3_1_25968.csv'; 'TEST0030_5_1_25968.csv'; 'TEST0030_6_1_25967.csv'; 'TEST0030_8_1_25967.csv'; 'TEST0030_9_1_25976.csv'}; len = length(array); split = cell(len,4); % 4 columns for 4 fields separated by '_' sorting_number = zeros(len,1); % initialize array to store number we're sorting by for ii = 1:len % first, split up each row into separate columns by delimiter '_' split(ii,:) = strsplit(array{ii},'_'); % we want to sort by this entry, so store it sorting_number(ii) = str2num(split{ii,2}); end sorted_array = cell(size(array)); % initialize new array for ii = 1:len % now reorder based on the numbers in field #2 of each row [~,indx] = min(sorting_number); % find mininum number sorted_split = split(indx,:); % extract row that matches this number sorting_number(indx) = NaN; % fill with NaN so next iteration finds next lowest number % store sorted array sorted_array{ii} = [sorted_split{1} '_' sorted_split{2} '_' sorted_split{3} '_' sorted_split{4}]; end I just did this on the fly. Probably not terribly fast, but it works.
You can do this with accumarray. Get the index of the points in each bin, then average. I forget the exact syntax but it should be easy to find an example of generating histogram bins with accumarray. Then you take the second (third?) output, which gives you the index of each input element in the output array. Where index == n, you get the elements that are in the n-th bin.
Extract a cell array of the names using curly braces, like `{yourStruct.filename}`. Sort that using `sort`, and capture the output providing the sort order. Then apply that to your struct array. Should take 3 lines, and no loops.
Are you using appdesigner?
Unfortunately that does not work like OP wants it to. This results in the order: x\_10\_y x\_13\_y x\_1\_y x\_2\_y x\_3\_y etc.
I‚Äôm guessing that the bone is the crescent white region in the enter. You could threshold the grayscale value, and filter out small connected regions using bwareaopen. But you will likely need to use info about the position, e.g. look for the first surface (top) reflection, then ignore anything within a certain depth below that. That‚Äôs the quick and dirty method. The next method would be to use machine learning, like a convolutional neural network. You can read into them, but this would be a big undertaking.
I have done thresholding and applied a couple of edge detector filters but I'd like to try something more intellectual. I am thinking of building a training set of models to automatically match the case. I have time to read and develop myself. What is your code doing?
Thanks for looking into this. I have no issues when using MATLAB 2018a and Python 3.6 on my Windows machine, but I'm still running into the same problem when I try the same commands with the same versions on Linux. This is the error message I get in the terminal when the crash occurs: Gtk-Message: 08:58:27.355: Failed to load module "canberra-gtk-module" MATLAB: malloc.c:2401: sysmalloc: Assertion `(old_top == initial_top (av) &amp;&amp; old_size == 0) || ((unsigned long) (old_size) &gt;= MINSIZE &amp;&amp; prev_inuse (old_top) &amp;&amp; ((unsigned long) old_end &amp; (pagesize - 1)) == 0)' failed.
Basic questions: * What kind of errors are you getting for the ones that don't work? * Do you have access to l the scripts you wrote? (I.e. are they stored locally) or do you keep them on your Matlab server (i.e. globally, and unlikely..).
There isn't much information here so it's really hard to help. Please could you be more specific? Provide errors and code if you can. Is it as simple as going through each file and checking all file paths are correct?
Typically the errors are something along the lines of ‚Äúcan‚Äôt find function‚Äù As for your second question, as a novice I am not sure as to the answer. I have access to the servers where the scripts are stored but they aren‚Äôt stored on my local machine
The errors are along the lines of ‚Äúcan‚Äôt find function‚Äù As for going through file paths, based on my novice level of expertise that‚Äôs what I suspect the solution is but I am not entirely sure how I would go about doing that
Can you make a structure instead of doing it like this? Like AcompPl with diff fields correpsonding to x,y,z, etc. Not sure how your data is imported or how it is structured currently.
I have overcome this problem before. I think i converted using char(variable) and then using index values to remove the characters I don't want. Can't remember exactly though
Oy, vey. You have a bunch of workspace variables named `P1uxA1`, `P1uyA4`, etc., and you're trying to plot each group of them in turn? You could probably use [`eval`](https://www.mathworks.com/help/matlab/ref/eval.html) here, but I would recommend making changes to how the data is stored instead. You can make a [structure array](https://www.mathworks.com/help/matlab/ref/struct.html) `P1` that has appropriately named fields (or just make the first set of fields a set of nested structs so you can group things) to store the vectors, and then pull the data for each using a similar loop so that you don't have to change too much code. Best of luck to you, sounds like a chore!
\+Solved, used a "fprintf(AcompP1)" for every plot. Thank you!
thanks I created a cell array for the filenames and used you example to store them and then used natsort()
Could you share the broyden function? And the exact error
function \[x, ithist\] = broyden(f,x0,opt,bounds) % Solve system of nonlinear equations by Broyden's method % Broyden's method is a quasi Newton method which updates an approximate % Jacobian at each new Newton step. % % Usage: % \[x, ithist\] = broyden( f, x0, opt, bounds) % % Input parameters: % f name of a matlab function that evaluates F. (Required) % x0 iteration starting point (Required) % opt Options struct. Fields: (Optional) % tolfun Function tolerance. (Default tolfun = 1.e-10) % Iterations end if ||F(x)||\_2 &lt; tolfun % tolx Step length tolerance (Default tolx = 1.e-8) % Newton's method stops if ||step||\_2 &lt; tolx, % where step is the Newton step. % maxiter maximum number of iterations (Default maxiter = 50) % bounds Optional bounds on x Default: no bounds. % bounds(:,1) &lt;= x &lt; bounds(:,2) % % Output parameters: % x approximation of the solution. % ithist iteration history struct. Fields: x, f(x), norm(f) % % Example: % f = @(x) \[x(1)\^2 + x(2)\^2 - 4; exp(x(1)) + x(2) - 1\]; % x = broyden(f,\[1;1\]) % The other root has x(1) &gt; 0, x(2) &lt; 0. This may be found by selecting % another inital x, or by using constraints. E.g.: % x = broyden(f,\[1;1\],\[\],\[0 2.5;-2.5 0\]) % % See also: fsolve (in optimization toolbox) &amp;#x200B; % Author: Are Mjaavatten, Telemark University College, Norway % % The update formula for the Jacobian J is taken from % the broyden function written by Matthias Heinkenschloss: % [http://read.pudn.com/downloads158/sourcecode/math/705810/sysnlineq/broyden.m\_\_.htm](http://read.pudn.com/downloads158/sourcecode/math/705810/sysnlineq/broyden.m__.htm) % % Version 1: 2015-12-29 % Version 1.1: 2016-11-29 Added iteration history &amp;#x200B; optfields = {'maxiter','tolfun','tolx'}; defaults = {50,1e-4,1e-5,\[\]}; if nargin &lt; 3 opt = \[\]; end for i = 1:3 if isfield(opt,optfields{i}) if isempty(opt.(optfields{i})) opt.(optfields{i}) = defaults{i}; end else opt.(optfields{i}) = defaults{i}; end end x = x0(:); it = 0; F = feval(f, x); if \~(size(x,1) == size(F,1)) error('f must return a column vector of the same size as x0') end normf = norm(F); J = jacobi(f,F,x); % Intial Jacobian matrix if nargout &gt; 1 ithist.x = \[x(:)';zeros(opt.maxiter,length(x))\]; ithist.f = \[F(:)';zeros(opt.maxiter,length(x))\]; ithist.normf = \[normf;zeros(opt.maxiter,1)\]; end normdx = 2\*opt.tolx; while( it &lt; opt.maxiter+1 &amp;&amp; normdx &gt; opt.tolx &amp;&amp; normf &gt; opt.tolfun) if rcond(J) &lt; 1e-15 error('Singular jacobian at iteration %d\\n',it) end dx = -J\\F; normdx = norm(dx); &amp;#x200B; if nargin &gt; 3 % variable bounds are supplied % make sure x stays within bounds for j = 1:20 jl = find(x+dx&lt;bounds(:,1)); dx(jl) = dx(jl)/2; ju = find(x+dx&gt;bounds(:,2)); dx(ju) = dx(ju)/2; if isempty(jl) &amp;&amp; isempty(ju) break end end end &amp;#x200B; x = x+dx; it = it+1; F = feval(f, x); normf = norm(F); J = J + F\*dx'/(dx'\*dx); if nargout &gt; 1 ithist.x(it+1,:) = x(:)'; ithist.f(it+1,:) = F(:)'; ithist.normf(it+1,:) = normf; end end &amp;#x200B; % Check if the iterations converged and issue warning if needed if it &gt;= opt.maxiter &amp;&amp; norm(F) &gt; opt.tolfun warning('No convergence in %d iterations.\\n',it+1) elseif normf&gt;opt.tolfun warning('Newton step &lt; %g, but function norm &gt; %g\\n',... opt.tolx,opt.tolfun) elseif normdx&gt;opt.tolx warning('Function norm &lt; %g, but newton step norm &gt; %g\\n',... opt.tolfun,opt.tolx) end if nargout &gt; 1 ithist.x(it+2:end,:) = \[\]; ithist.f(it+2:end,:) = \[\]; ithist.normf(it+2:end) = \[\]; end end &amp;#x200B; function J = jacobi(f,y0,x) % Quick and dirty numerical Jacobian for function f at x % y0: f(x); &amp;#x200B; delta = 1e-6\*(max(1,sqrt(norm(x)))); n = length(y0); m = length(x); J = zeros(n,m); for i = 1:m dx = zeros(m,1); dx(i) = delta/2; J(:,i) = (feval(f,x+dx)-feval(f,x-dx))/delta; end end
here is my script: &amp;#x200B; &amp;#x200B; %\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* %%This script will solve for ys and ts assuming the origin of the sample's %%coordinate system is at the center of the borehole and so xs = zs = 0 %\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* xs = 0.00000; zs = 0.00000; &amp;#x200B; &amp;#x200B; %these are locations for transducer 1 - 13 which must be determiend %properly with the next tests... xt = \[-0.05000;-0.05000;-0.05000;-0.05000;-0.05000;-0.05000;0.00140;0.00150;0.00160\]; yt = \[ 0.01980; 0.01985;0.00100;0.00120; -0.01980; -0.01985;0.01986;0.01987;0.00130\]; zt = \[-0.01989;0.01990;-0.02980;0.03980;-0.04980;0.05980;0.06980;-0.07980;-0.08980\]; &amp;#x200B; &amp;#x200B; v = 2500;% wave speed in material determined by AST and distance formula &amp;#x200B; &amp;#x200B; File\_names = dir('\*.csv'); %attain every waveform in the event folder &amp;#x200B; %get file for reference transducer, in this case the file that contains transducer 1 % file1 = File\_names(3).name; % plus1 = 1; &amp;#x200B; numFiles = length(File\_names); incr = 2:5; &amp;#x200B; % allocate an empty array for 5 transducer combinations for a total of 10 % solutions, 5 for ys and ts each solutions = zeros(5,2); &amp;#x200B; &amp;#x200B; %open transducer 1 file, this is the reference transducer % file = File\_names(3).name; &amp;#x200B; %sort all the files in descending transducer order list = cell(numFiles,1); for i = 1:numFiles list(i) = {File\_names(i).name}; end natOrder = natsort(list); &amp;#x200B; plus1 = 1;%offset value for transducer 1 file\_1 = natOrder(1,1); file1 = cell2mat(file\_1);%transducer 1 is the reference transducer an so will always be used in broyden &amp;#x200B; %get solutions for ys and ts using 5 transducers with transducer 1 for i = 2:5 hold on plus = incr(i);%offset second graph for plotting \[\~,l1\] = graphData(file1,plus1); ordered\_file = natOrder(i,1); file = cell2mat(ordered\_file); \[\~,li\] = graphData(file,plus); arrivalt1 = l1\*1e-7; arrivalti = li\*1e-7; %deltat1 is clearly zero deltati = arrivalti - arrivalt1; %use 2 transducer equations for transducer 1 and another transducers with a guess to call broyden x0 =\[0.00001;1\]; f = @(u) \[(sqrt((xt(1)- xs)\^2 + (yt(1) - u(1))\^2 + (zt(1) - zs)\^2)/v )- (u(2));(sqrt((xt(file)- xs)\^2 + (yt(file) - u(1))\^2 + (zt(file) - zs)\^2)/v) - (u(2) - deltati)\]; % \[x, ithist\] = broyden(f,x0); this is not the correct function call x = broyden(f,x0); %place each combo's solutions in the solutions array solutions(i,1) = x(1); solutions(i,2) = x(2); end
and the new error mesage: &amp;#x200B; Index exceeds the number of array elements (9). &amp;#x200B; Error in solver&gt;@(u)\[(sqrt((xt(1)-xs)\^2+(yt(1)-u(1))\^2+(zt(1)-zs)\^2)/v)-(u(2));(sqrt((xt(file)-xs)\^2+(yt(file)-u(1))\^2+(zt(file)-zs)\^2)/v)-(u(2)-deltati)\] &amp;#x200B; Error in broyden (line 163) F = feval(f, x); &amp;#x200B; Error in solver (line 74) x = broyden(f,x0);
new error message: &amp;#x200B; Index exceeds the number of array elements (9). &amp;#x200B; Error in solver&gt;@(u)\[(sqrt((xt(1)-xs)\^2+(yt(1)-u(1))\^2+(zt(1)-zs)\^2)/v)-(u(2));(sqrt((xt(file)-xs)\^2+(yt(file)-u(1))\^2+(zt(file)-zs)\^2)/v)-(u(2)-deltati)\] &amp;#x200B; Error in broyden (line 163) F = feval(f, x); &amp;#x200B; Error in solver (line 74) x = broyden(f,x0);
Damn if that's not hard to read idk what is. Give me a bit to look through it and I'll get back to you
Sorry about that, I also found out that one of my equations in f near the use a filename instead of a number associated with it which I will fix.
Nah not just you, that solver error is ugly.
Okay, so there is two ways I know off to add a path to a function. First check for if the 'addpath' function is used anywhere (here it is [https://uk.mathworks.com/help/matlab/ref/addpath.html](https://uk.mathworks.com/help/matlab/ref/addpath.html)) if you can't find it then don't worry. &amp;#x200B; The second way to add a path is to use the set path menu (here's a screenshot [https://imgur.com/a/6HSXxMl](https://imgur.com/a/6HSXxMl)) . From there you will have to look at the error code to see which paths are wrong and change them to suit. Hopefully that helps, if not please could you copy and paste the full error message with any relevant bits of code?
^(Hi, I'm a bot for linking direct images of albums with only 1 image) **https://i.imgur.com/DXE2RCK.png** ^^[Source](https://github.com/AUTplayed/imguralbumbot) ^^| ^^[Why?](https://github.com/AUTplayed/imguralbumbot/blob/master/README.md) ^^| ^^[Creator](https://np.reddit.com/user/AUTplayed/) ^^| ^^[ignoreme](https://np.reddit.com/message/compose/?to=imguralbumbot&amp;subject=ignoreme&amp;message=ignoreme)^^| ^^[deletthis](https://np.reddit.com/message/compose/?to=imguralbumbot&amp;subject=delet%20this&amp;message=delet%20this%20eslscff)
Good bot
Thank you, ThatRoboticsGuy, for voting on imguralbumbot. This bot wants to find the best and worst bots on Reddit. [You can view results here](https://botrank.pastimes.eu/). *** ^(Even if I don't reply to your comment, I'm still listening for votes. Check the webpage to see if your vote registered!)
^thanks ^^[Source](https://github.com/AUTplayed/imguralbumbot) ^^| ^^[Why?](https://github.com/AUTplayed/imguralbumbot/blob/master/README.md) ^^| ^^[Creator](https://np.reddit.com/user/AUTplayed/) ^^| ^^[ignoreme](https://np.reddit.com/message/compose/?to=imguralbumbot&amp;subject=ignoreme&amp;message=ignoreme)
You have dynamic variable names? The solution is don't do that.
http://i.imgur.com/Dwk27.gif
&gt;and the new error mesage: &gt; &gt;&amp;#x200B; &gt; &gt;Index exceeds the number of array elements (9). &gt; &gt;&amp;#x200B; &gt; &gt;Error in &gt; &gt;solver&gt;@(u)\[(sqrt((xt(1)-xs)\^2+(yt(1)-u(1))\^2+(zt(1)-zs)\^2)/v)-(u(2));(sqrt((xt(file)-xs)\^2+(yt(file)-u(1))\^2+(zt(file)-zs)\^2)/v)-(u(2)-deltati)\] Looks like there's an indexing error in your anonymous function. I'm not going to comb through the whole thing but somewhere in there something is being interpreted as an index into a 9-element array, and asking for something beyond the 9th element.
Thanks everyone, my code works but not correctly for my data set as I try to match the filenames index to the number in the file name I am looking for. I'll talk to my prof. and see what she suggests.
glad you sorted it
Using a struct would probably benefit you. One note is that you could probably generate that array a little easier with: &gt;&gt; ["foo" "bar" "hello" "world"] + ["1" "2" "3" "4" "5a" "5b" "6a" "6b"]' ans = 8√ó4 string array "foo1" "bar1" "hello1" "world1" "foo2" "bar2" "hello2" "world2" "foo3" "bar3" "hello3" "world3" "foo4" "bar4" "hello4" "world4" "foo5a" "bar5a" "hello5a" "world5a" "foo5b" "bar5b" "hello5b" "world5b" "foo6a" "bar6a" "hello6a" "world6a" "foo6b" "bar6b" "hello6b" "world6b"
Use three backticks in a line before and after your code to format it as code. Like this \`\`\` Code code code \`\`\` Produces ``` Code code code ```
Did you have a mapped network drive that's no longer mapped?
There are 3 ways to do GPU computations in matlab 1. GPUarrays --- "proof of concept" --- straight-forward, but not very efficient 2. arrayfun --- better --- fairly straight-forward, much more efficient 3. CUDA --- best --- more complicated, best (matlab) efficiency. The Mandelbrot example is a good illustration: [https://www.mathworks.com/help/parallel-computing/examples/illustrating-three-approaches-to-gpu-computing-the-mandelbrot-set.html](https://www.mathworks.com/help/parallel-computing/examples/illustrating-three-approaches-to-gpu-computing-the-mandelbrot-set.html) My guess is that this is where you are spending most of the time: Loc = find(YN == YN(i)) given than YN is of type double, this is definitely not numerically stable; Loc = find( abs( YN - YN(i) ) &lt; some_tolerance ) is preferrable. Now, your images are fairly small (235 x 235), still this is (235 x 235)^2 = 3,049,800,625 comparisons. You may be better of flattening-&gt;sorting-&gt;binning YN and then transforming the other channels over the appropriate bins? Just a thought. One more thought: in your loop, two of the arrays NewCb and NewCr are gpuarrays; but YN, Cb, and Cr are standard matlab arrays... this is probably not good.
The problem is in the for statement, even for a CPU it's very slow because you are doing operations pixel per pixel (using just one core of your CPU), GPU is intented for parallel operations and here you are doing them explicitly in sequence, try rewritting the for statement and changing it by some matlab built-in functions or try to use arrayfun
Woah, that link is excellent. I learned some very useful things that are very relevant to me. Thanks!
What's the purpose of this bit? &gt;1. Y\_enhanced - Y\_enhanced(i) &gt;2. Find Loc = \[x, y\], where Y\_enhanced - Y\_enhanced(i) = 0 &gt;3. If only one \[x, y\] exists, Cr\_new(i) = Cr\_old(i), Cb\_new(i) = Cb\_old(i). Else find the average of all \[x, y\] = 0, Cr\_new(i) = average(Cr\_old(x, y)), Cb\_new(i) = average(Cb\_old(x,y)) &gt;4. Merge Y\_enhanced, Cb\_new, Cr\_new I mean, I know you said you got the algorithm from somewhere, and I understand the steps in the algorithm; but what is it *doing*? As it's written, it's **extremely** inefficient. If you understand what it's doing you could write it in a more efficient way. What you have is called the "naive" implementation of the algorithm. For example, you can implement the discrete Fourier transform in the naive way, exactly implementing the definition of the transform... Or you can use the fft algorithm which produces the same result much faster. When the naive approach involves iterating over each pixel in the image multiple times, it's almost guaranteed to be incredibly slow.
Oh man... My favourite tools for this are: * Splinetool - built-in Matlab gui And * Slmengine - downloadable spline fitting toolbox with a ton of intuitive constraints. One of the best Matlab downloads I've ever used.
Actually I thought that MATLAB's GPU Computing Toolbox automatically create threads and divide data to process at GPU but it seems that it's not default with gpuArray. If I use Loc = find( abs( YN - YN(i) ) &lt; some_tolerance ) I am going to lose information right? Is this the price that I have to pay for performance and how to choose acceptable tolerance value? I used bsxfun() but it didn't seem to work well but I'll use arrayfun too. It seems that third approach seems to be most efficient one but I think if I am going to start to write C/C++ code then why use MATLAB? I can go with OpenCV + CUDA C API. What are the advantages of MATLAB then? Less complicated code than using pure CUDA C?
Which way do you suggest to rewrite it? I used bsxfun but it didn't work though.
That code snippet basically takes enhanced Y band, original Cb and Cr bands as input. It produce new Cb and Cr bands by using enhanced Y, original Cb and Cr. From the first pixel to last pixel in Y band, it scans the image. It checks for counts of pixel value in image location \[x,y\]. For example, Y(3,5) = 0.234, it checks whole Y for 0.234, if there is one 0.234 at Y then New Cb(3,5) = Cb(3,5), New Cr(3,5) = Cr(3,5), else there are more than one 0.234 at Y, for example Y(3,5) = Y(6, 3) = Y(34, 45) = 0. 234, New Cb(3,5) = mean(Cb(3,5), Cb(6,3), Cb(34,45)) and New Cr(3,5) = mean(Cr(3,5), Cr(6,3), Cr(34,45)) Here is the flow chart of this algorithm. [http://i65.tinypic.com/14v71oi.png ](http://i65.tinypic.com/14v71oi.png)
That sounds like something that's going to work very badly with floating point data, and also something that's extraordinarily inefficient. If this could be done with uints and logical indexing it should be much better.
So maybe I should convert my enhanced Y channel(which is normalized between 0 and 1) to uint8 before I get into color production process. What I about I convert it from double to single? Can it make any difference? What do you mean by logical indexing?
It seems like the main efficiency in this algorithm is the O(N^2) search for all pixels equal to the precise floating point Y value of the current pixel. I‚Äôd suggest an approximate form of this in which in one pass you discretize Y into say 256 bins and form a histogram of counts. At the same time, form 256 length arrays in which you accumulate the Cb and Cr value at a given Y value. When you are done, divide Cb and Cr accumulators by the Y counts to form mean Cb and Cr for a given Y value. Effectively, you now have a 256x3 colormap of Y Cb Cr values that you can use to enhance the content of your original image using Discretized Y as the lookup.
What's the actual point of this though? It sounds like you're averaging the position of contours in the image? Do you have an example with pictures?
These are the results. [https://ibb.co/zJsWsWq](https://ibb.co/zJsWsWq) &amp;#x200B; The point is improve the visibility by using old Cb and Cr values.
The whole premise I would think of this algorithm is that you are forming more robust estimates of Cb and Cr under the assumption that values with the same Y should have the same Cb and Cr. If you don‚Äôt him, it is likely that floating point round off error could mean there are very few examples of Pixels with the same Y value. So, I would think this algorithm would actually benefit from binning.
In the original paper, authors did not mention any binning but yeah most of the times authors don't give detailed information about their algorithms and you need to figure out the magic. Can you provide me any sources to read about binning? I've never done it before actually. By the binning, you mean something like that? 0 - 0.01 = 1 0.04 - 0.05 = 2 0.06 - 0.07 = 3 ... 0.9 - 1 = 256 &amp;#x200B; So basically mapping the normalized values between 0 - 1 to a new range at 0 - 255 ?
Sure, characters concatenate horizontally by default if you group them in a row vector: mySymbols = ['r', 'g', 'k', 'c', ..., 'm']; This will give you the same character vector you have above. You can just transpose the column of symbol characters after importing it, and away you go. Documentation that may help: * [`readmatrix`](https://www.mathworks.com/help/matlab/ref/readmatrix.html) * [`spreadsheetImportOptions`](https://www.mathworks.com/help/matlab/ref/matlab.io.spreadsheet.spreadsheetimportoptions.html) (if you plan to make this generalizable) * [`table`](https://www.mathworks.com/help/matlab/ref/table.html) (for how to get at mixed data if uncertain) Happy plotting!
Thanks for your suggestion. I'm still a bit confused on how to implement this... I think in how my "authors" column would be grouped in the first place. Here's the format of my table: |X\_value|Y\_value|Author|myColor|mySymbol| |:-|:-|:-|:-|:-| |x1|y1|A|r|x| |x2|y2|A|r|x| |x3|y2|B|g|.| |x4|y4|C|k|\*| A you suggesting something as simple as: *Define variables from table* gscatter(X_value,Y_value,Author,myColor,mySymbol) Because although there are 4 entries, there are only 3 authors and I would like each to have unique symbology regardless of how many entries I put in a given plot. Sorry if I'm repeating myself here but I'm still unclear on the best way to do this.
Try the [gramm](https://github.com/piermorel/gramm) toolbox, it's exactly designed to do this and much more (gscatter on steroids with additional stats, like ggplot2 in R).
In the paper they also mentioned that their algorithm has a linear time complexity, O(n) but they didn‚Äôt mention any binning.
There are three things you need to setup for compiling MEX-files in Visual Studio: - configure path to MATLAB header files (`-I"C:\Program Files\MATLAB\R2019a\extern\include" ...`) - link against MATLAB libraries (`/LIBPATH:"C:\Program Files\MATLAB\R2019a\extern\lib\win64\microsoft" libmx.lib libmex.lib ...`) - define any needed macros (`/DMATLAB_MEX_FILE ...`) You can just run `mex -v somefile.cpp` to have it verbosely print all the compiler options it is using, then use those in your Visual Studio project. PS: Note that the `mex` command compiles an additional file to your source code `C:\Program Files\MATLAB\R2019a\extern\version\cpp_mexapi_version.cpp` (it basically adds a function which reports the version used). So when using VS to compile, add that file as an external source file to your project.
Ok.. I already had the header path defined (Additional Include Directories) I forgot about the lib folder, I used Linker -&gt; General -&gt; Additional Library Directories (and set it to 'C:\\Program Files\\MATLAB\\R2019a\\extern\\lib\\win64\\microsoft') And added the actual library names under Linker -&gt; Input -&gt; Additional Dependencies How would I define the macros and where do I find them?
Like I said, run `mex -v -n somefile.cpp` and you'll get the full options used. In my case I see the following of interest: COMPDEFINES : /DMATLAB_DEFAULT_RELEASE=R2017b /DUSE_MEX_CMD /D_CRT_SECURE_NO_DEPRECATE /D_SCL_SECURE_NO_DEPRECATE /D_SECURE_SCL=0 /DMATLAB_MEX_FILE INCLUDE : -I"C:\Program Files\MATLAB\R2018b\extern\include" -I"C:\Program Files\MATLAB\R2018b\simulink\include" LINKEXPORTVER : /EXPORT:mexFunction /EXPORT:mexfilerequiredapiversion LINKLIBS : /LIBPATH:"C:\Program Files\MATLAB\R2018b\extern\lib\win64\microsoft" libmx.lib libmex.lib libmat.lib [...] libMatlabDataArray.lib libMatlabEngine.lib - For each `/D...`, add it to "C/C++ &gt; Preprocessor &gt; Preprocessor Definitions" - For each `-I...`, add it to "C/C++ &gt; General &gt; Additional Include Directories" - For each `/LIBPATH:...`, add it to "Linker &gt; General &gt; Additional Library Directories" - For each `*.lib`, add it to "Linker &gt; Input &gt; Additional Dependencies" (you can skip the standard ones already included by default) - For the `/EXPORT` entries, you can create a module-definition file and add it under "Linker &gt; Input &gt; Module Definition File" The `.def` file can be as simple as: EXPORTS mexFunction mexfilerequiredapiversion
Looks nice, I'll give it a try. Thanks!
Email the author
xlswrite should be capable of writing a range of cells using this implementation: xlswrite(filename,A,sheet,xlRange) You would need to set all your data in the matrix A, then write it to the range in one shot, rather than stepping through each column.
There's a really nice GUI in the "APPS" tab called "Curve Fitting." You can apply a bunch of different fittings, or define your own fitting equation (Bspline) and it will fit your coefficients for you.
Ah I didn't think of that because each column is in a separate .txt file but I guess it would be easier to concatenate them before exporting. Thanks!
Currently, for each file number `i`, you're opening it, reading the data into Matlab, then writing the first column of that data to the desired columns of an Excel file. Consider doing the following instead. Create a single Matlab array, say, `AllData`, to hold all the data that will eventually be written to the Excel file. For each file number `i`, open it, read the data into Matlab (in the same way you've currently done), then copy the first column into the `i`-th column of `AllData`. Once you've done that for each file, then write the entire array `AllData` to the Excel file at once. Then you don't have to worry about specifying the columns in Excel for each file. A few other comments: * Your syntax for `xlswrite` is wrong. The file name is the first argument, then the data to be written. You seem to have it the other way around. Also, as I understand it, you can't specify a range only in terms of column (e.g., as `A:B`), you have to specify in terms of column-row (e.g., as `A1:B50` or something). * It also looks like `vals` only has a single column. The way you've written your code, you're trying to write this to two columns in the Excel file (`A:B` is two columns, not one). Again, though, you need to specify rows anyway I think. * If you want to include the file name as the title of the column, make `AllData` a cell array (rather than a regular array) with one more row than your data has. Then you can set the first row as the file names. So, for each `i` in your loop, set `AllData{1,i}=filename`, and then `AllData(2:end,i)=num2cell(vals)`. Note the usage of `{}` vs `()` in indexing AllData here. * The function `textread` is deprecated. Consider using `textscan` instead.
Another thing that I want to ask, that location finding algorithm is suitable for arrayfun( )? It seems like that arrayfun() is only useful when you are doing matrix summation, product and subtraction and I couldn't find a way to convert this location finding algorithm to simple matrix operations.
In the workspace, double-click `mydata` to open the variable browser, then pick a cell (any cell) and double-click it. It should open up a structure browser view so that you can see the fields and thus, how to get at your data. It will likely end up being something like: desiredStruct = mydata{n}; % gets the structure holding the data desiredData = desiredStruct.dataFieldName; % accesses the field in the structure with the data you want Where you replace any/all of those variable names and the number *n* with the right info based on what you find when you dig around. If you get stuck, just reply with what you saw and/or what you tried and what happened and I'll try to help! Documentation that might be of assistance: * [`importdata` definition of output argument `A`](https://www.mathworks.com/help/matlab/ref/importdata.html#btk7vi1-1-A) * [Structure arrays](https://www.mathworks.com/help/matlab/ref/struct.html) * [More about structures](https://www.mathworks.com/help/matlab/structures.html) * [Indexing cell arrays](https://www.mathworks.com/help/matlab/matlab_prog/access-data-in-a-cell-array.html) (those dang ol' curly braces) * [More about cell arrays](https://www.mathworks.com/help/matlab/cell-arrays.html)
Look into RANSAC, SIFT and SURF in computer vision subjects.
Those aren't initial conditions, they're boundary conditions. You need to use a boundary value solver like bvp4c.
Ohh thanks!!
Can't use initial solvers for boundary problems.
Also I Don t know if you are familiar with solvers, but you will have to reformulated your single second order differential eq as a set of two first order equation first. I think there is qn example in the doc.
I think someone has already mentioned this, but when the function and its derivative are evaluated at different points, you don't have an initial value problem like ode45 can solve, you have a [boundary value problem](https://en.wikipedia.org/wiki/Boundary_value_problem). There also exist matlab solvers for these, assuming you have an ordinary differential equation
You need to set the working directory first to make this command work. You can read my thread here [https://github.com/bramvbilsen/Matlab-Code-Run-for-VS-Code/issues/2](https://github.com/bramvbilsen/Matlab-Code-Run-for-VS-Code/issues/2)
As far as I'm aware the only way to do that is by making the separate static text. However, I'm pretty sure you can do it using MATLABs appdesigner
Do you know of any way to rotate the static text to be vertical?
If you are using appdesigner, go to design view...select the slider text.. go to component browser (right side).. then look into 'inspector' (bottom right).. then you can see 'orientation'
I'm not sure what you mean by "component," but if each component is a function/matlab script, try just using `str2func`.
In your for loops start your indices from 0, then whenever you have to access an array element, add 1 to the element index (e.g. if the paper uses Xi(k1-k2), you will write `X1(k1-k2+1)`
Yes but my loop has k+1 elements total because it starts from 0 to k, and I have Y(k1) in my loop, so I had to change it to range of 1:k+1. thus having I still end up with X(k-k2+1) if k2=k+1 I end up with X(0)
oh you mean I start from 0 to k? and not from 1:k+1
The only real answer here is that you have to think through the math in the paper and be careful about implementing the algorithm. There's no magic tricks here. Just be careful about it. This is a less about implementing an algorithm. There is no guarantee that the way its written in the paper is *anything like* the way you need to write it, and there are no shortcuts to doing that translation. This is what your own mathematical skill is for. This is why a robot can't do your job yet.
Correct. But double check that the indices will work out. I‚Äôm not in front of my comp right now to try it
I've never used the app designer, but when you run a simulation on your model, the data feeding into the "to workspace" block should be populated in your base workspace after the run.
Which versions are you using of both softwares? With Matlab 2019a and Amesim 2019.1 you should be able to use the Min Gw 64 for Matlab and use the GNU C++ 64 compiler in Amesim. We managed to make it work after 3 days at work with the support of both Mathworks and Siemens. You have to remember to set the environment path for the Mingw64 compiler otherwise amesim will be not able to start the compilation in Matlab.
You can just draw lines off to the side in lieu of an axis. Write a function to make your own.
I have managed to draw the lines but i want to change the appearance of line
https://uk.mathworks.com/help/matlab/ref/matlab.graphics.primitive.line-properties.html
Mind posting the code which solved it?
Its actually the second link. The issue was that in the padding function the variable name (dataset files names when loaded on matlab) was always X.
logical(spalloc(A));
The syntax looks correct to me, although I'd leave out the extra parentheses. Your actual formula may need some work.
Yes, this should run without errors. However, do you think this is the correct formula for an area of a triangle?
you forgot about the .5 in the equation.
Ugh, I dunno why I tried with true(spalloc(A)). Thank you.
**Your actual formula may need some work**
 A = sparse([], [], logical([]), m, n, nz)
Im not sure exactly what is your code, but it seems like you just need to define more boundaries of the colors. Like what values of rgb will make a brown
Source code : [download](https://www.up-4ever.org/hnz606eo0bee)
A simple way would be a series of if statements that separates out different colours. Use something like this to decide where the boundaries are: https://www.rapidtables.com/web/color/RGB_Color.html
 clc; clear; clear all; im=imread('IMG\_20150518\_090606.jpg'); imtool(im); sz=size(im); white=zeros(sz(1),sz(2)); green=zeros(sz(1),sz(2)); blue=zeros(sz(1),sz(2)); red=zeros(sz(1),sz(2)); whiteshow=uint8(zeros(sz)); greenshow=uint8(zeros(sz)); blueshow=uint8(zeros(sz)); redshow=uint8(zeros(sz)); for i=1:sz(1) for j=1:sz(2) if im(i,j,1)&gt;220 &amp; im(i,j,2)&gt;220 &amp; im(i,j,3)&gt;220 white(i,j)=1; whiteshow(i,j,:)=im(i,j,:); elseif im(i,j,1)&gt;2\*im(i,j,2) &amp; im(i,j,1)&gt;2\*im(i,j,3) red(i,j)=1; redshow(i,j,:)=im(i,j,:); elseif im(i,j,2)&gt;2\*im(i,j,1) &amp; im(i,j,2)&gt;2\*im(i,j,3) green(i,j)=1; greenshow(i,j,:)=im(i,j,:); elseif im(i,j,3)&gt;2\*im(i,j,2) &amp; im(i,j,3)&gt;2\*im(i,j,1) blue(i,j)=1; blueshow(i,j,:)=im(i,j,:); else white(i,j)=0; green(i,j)=0; blue(i,j)=0; red(i,j)=0; end end end imtool(white); imtool(green); imtool(blue); imtool(red); imtool(whiteshow); imtool(greenshow); imtool(blueshow); imtool(redshow); &amp;#x200B; This is my code, dont know where to put new colors, whick line...any help please ?
Hey OP. I have done the above thing, not in MATLAB but in python using numpy, but the process should be similar. Convert your RGB to hsv values, it's better to use it that way. And you can use trackbars to fine tune your values for a particular colour. If you want any advice in python, I can share the code, no problem. But if you have to do it in MATLAB, you'll have to look up the equivalent thing. Feel free to ping me up if you need help.
Hey...no prob if I do that in python...would you please share code with me :/ 7-8 colours should be enough
Well, as previously said, it's probably best to just define the colours by looking up definitions of their boundaries in the RGB values. However, a piece of advice I can give you, is to try to avoid for loops. This probably doesn't make much of a difference here, but when you want to apply your algorithm to a large set of images this ought to save you some time. Also, it's easier to keep an overview. I'm not exactly sure what you want to do, but it looks like you want to identify areas in the image which have a certain colour. For red, for example, you can achieve your binary matrix like this: red = im(:,:,1) &gt; 2*im(:,:,2) &amp; im(:,:,1) &gt; 2*im(:,:,3); This does exactly what you want to achieve in your algorithm with 'red'. The advantage of doing it this way is that there is no need to initialise, no need for a loop, no need to index. Now, you can use this matrix to create an image with colour values (so not black) in all areas defined as the specified colour by multiplying it. As the resulting matrix in the line I posted is binary, you need to cast it first by using 'uint8' in order to multiply it. For multiplying only the single values, a point has to be set in front of the mathematical operator (example: A.\*B). So you can create the R matrix of the image with blueshow_r=im(:,:,1).*uint8(blue); blueshow_g=im(:,:,2).*uint8(blue); blueshow_b=im(:,:,3).*uint8(blue); All you need to do now is to 'stack' the matrices behind each other. This is best done with the 'cat' command. The first value is an integer which specifies in which dimension the matrices are combined. So 'cat(1,A,B)' is the same as '\[A;B\]' and 'cat(2,A,B)' is the same as '\[A B\]'. You can concatenate the arrays with the RGB values, or do all of it in one line: blueshow=cat(3,im(:,:,1).*uint8(bluemap),im(:,:,2).*uint8(bluemap),im(:,:,3).*uint8(bluemap)); The rest is all about defining colours. Your way of saying that the wanted colour values has to be more than two times higher than the other values is not bad. I would have had a simpler attempt by defining hard threshholds. Orange for example: or_bin = im(:,:,1) &gt; 150 &amp; im(:,:,2) &lt; 150 &amp; im(:,:,3) &lt; 80; or_im=cat(3,im(:,:,1).*uint8(or_bin),im(:,:,2).*uint8(or_bin),im(:,:,3).*uint8(or_bin)); If you find a smarter way, let me know, I would be very interested. Hope this helps. And btw, if you only want to look at the image, I recommend you to use 'imshow' over 'imtool'. ;)
Sorry mate for being boring maybe... We havent studied about doing this way(what u have writen)...only my way. U wrote '' I'm not exactly sure what you want to do '' - I want to imread any picture from my PC and after Running it should show me or write colours which are on the picture. My program shows them in new window but thats not needed. If u have time would be really useful for me if you write whole code for colour recognition ( no more than 8 colours) . Thanks in advance!
https://github.com/RiddhimanRaut/Ur5_Visual_Servoing/blob/master/ur5_control_nodes/src/object_detect.py It's a code from my GitHub, for 4 colours. For any doubts, you can DM me.
I basically already did. All you have to do is copy and paste the lines I have written 8 times and simply define the boundaries for the remaining colors.
What is the `cos(2*pi*n)` where n is an integer?
Best answer ever. :( 1 and -1 always omg i didnt get it at first so stupid. &amp;#x200B; Do u have advice how to solve it to show discrete signal cos ? it works with small frequency
answering the question by /u/FrickinLazerBeams solves the "problem", but if you don't see it quite yet, try putting `NaNs` in a distinct variable `y2` and compare `plot(time, y)` to `stem(time, y2)`, that should give you a hint to answer the question...
try asking the question on Stackoverflow with scilab tag
I really dont know where to put them, which line or so...would you please do that :/ Im really stupid...matlab is so hard tbh for begginers.
You can create a function to perform the statistical test. Inside a `for` loop you call the function using the variable you want to be tested. But you will need to know all the variable you have in the workspace. There could be a function to list all the variable in workspace, I'm not sure. Let me know if you find it!
You can use the capturing form of `who` and `whos` to get a list of the variables in the workspace and their properties. ``` w = who w = whos ``` But then you have the problem that some of the variables in the workspace may not be what you want to operate on. If I were doing this, I would probably stick all your vectors in fields of a struct instead of workspace variables, and then apply the function to all the structure fields using `structfun` or looping over field names.
other than the version, compiler, and the environment; is there anything else to take into consideration?
also asked it on SE, got the answer there. Thanks for the up votes. [https://stackoverflow.com/questions/56933210/cyclic-repetition-from-workspace](https://stackoverflow.com/questions/56933210/cyclic-repetition-from-workspace)
I didn't know it was possible to take the result of `whos` in a variable. Makes completely sense, but I never thought of it. Is it possible to apply any filter on `whos`? Also, how to go from the string of variable name to the variable itself? `"A"` to `A`
You can use the `eval(expr)` function, which basically interprets the string `expr` as a line of code to be run. So for example, if your list of `n` variable names is in the cell `v`, you can apply the mean to each variable by using: m = zeros(n,1); for i = 1:n eval(['m(i)=mean(' v{i} ');']) end
&gt;Is it possible to apply any filter on &gt; &gt;whos &gt; &gt;? Only on the variable names or on local/global. Other filtering you need to do after the fact on the structure returned by it.
You're struggling to find a good solution to this because it is a discouraged programming practice. The preferred method would be to put all of the variables in either a multi-dimensional array, cell array or struct, and then work on a single object. Is there a reason you can't do it like that?
Thanks!
Interesting!! Thanks!
The `eval` function is discouraged because it makes code harder to read and debug. A better alternative would be to put all the data into a struct or cell array, and then loop through that. [https://www.mathworks.com/help/matlab/matlab\_prog/string-evaluation.html](https://www.mathworks.com/help/matlab/matlab_prog/string-evaluation.html)
Would be cautious using eval if at all possible
`imcrop` doesn't work with app designer uifigures/uiaxes. In fact this applies to all ROI functions.
You pass meshgrid a series vectors and it outputs an n-dimensional array for each of the inputs. Helps for me when I need to interpolate onto a grid that can actually be plotted as opposed to what I get out of experiments. you could use something like repmat instead but requires more coding for me.
`meshgrid` is used when you have a function of 2 variables- something like "z = f(x,y)". Then, you create your range of x &amp; y values you want to evaluate your function over, and then you get your z values out. As a quick example: x = -3:0.1:3; y = -3:0.1:3; [X,Y] = meshgrid(x,y); Z = exp(X.^2 + Y.^2); surf(X,Y,Z); Will plot a bivariate normal distribution.
We use meshgrid for creating structured flow fields. we mesh grid x, y and z to essentially create a series of "nodes" where we define velocities. So we will usually end up with 3 structures representing nodes in space called UU, VV, WW. These structures will have contain values that represent the velocities in 3 directions.
Good answers already here, but the official (up-to-date) [documentation](https://www.mathworks.com/help/matlab/ref/meshgrid.html) gives a clearer explanation of `meshgrid` than the university website copy you linked. In general, the documentation for MATLAB is head and shoulders above many other programming languages. Always fun taking over someone else's project. Ctrl-F the code base for 'eval', 'break', and 'todo' to get a rough estimate of *how much* fun you're going to have. None of those are inherently bad on their own (in fact, the list of 'todo' may be why you've been assigned the task), but desperate times call for desperate measures, and programmers aren't immune to being "creative". :) Best of luck!
I think [the University of Michigan Control Tutorials site](http://ctms.engin.umich.edu/CTMS/index.php?aux=Home) will have almost exactly what you're looking for.
Thank you! Yeah eventually figured that out.. I‚Äôm really hoping that they fix this soon!
Yeah, I thought about it, loop a cell var. But then I was wondering about working with vars from external sources (a .mat file, for example) without knowing the vars' names. Ok, it's a strange case, but I was curious about how to solve it.
Given desired sample points in each dimension defined by vectors x, y [X,Y] = meshgrid(x,y) Creates 2-d dense grids which represent regular sampling of the 2-d plane at the locations specified by vectors x,y. This is useful for a variety of tasks, for example evaluating a 2-D function of X and Y: f(X, Y).
You can use tablelookup for upto a 4D table. Example towards the bottom. https://www.mathworks.com/help/physmod/simscape/lang/tablelookup.html
Awesome, thank you!!
Check out: [https://undocumentedmatlab.com/consulting](https://undocumentedmatlab.com/consulting)
Yep. Yair knows what he's doing.
Why go to that odd website? The Matlab documentation covers this very clearly. Meshgrid let's you address the X and Y coordinate of an array directly. If you have `[X Y] = meshgrid(1:100)`, and some 100x100 array Z, you know that the (x, y) coordinates of `Z(i)` is (`X(i)`, `Y(i)`). Or, for example, you know that the array `D = sqrt((X - 50).^2 + (Y - 50).^2)` is an array such that `D(i)` is the distance of `Z(i)` from the center of the array. How else do you do operations with the coordinates of a grid?
Awesome, thank you.
Great, thanks!
Try cross-posting to /r/imageprocessing not sure if the vanilla image registration algorithms can handle this.
MathWorks has their own consulting group that could tackle this. Working with them has the added bonus of connections with all of the developers. They're a bright bunch of folks. I know because I used to work there, too.
I think that [this](https://www.mathworks.com/help/images/ref/normxcorr2.html) is very similar to your problem, though your images may have some additional lens distortion. It's worth a try.
Tried it already but didn't work.
Can you post some sample photos?
Yeah, I‚Äôm familiar with their services and yes, they are definitely high caliber. (As they should be!)
[removed]
If you bring the two images in the same space, you can use a sliding window on the big image to correlate with the small image. Do you know the factor of multiplication of the zoomed image?
I found that website when searching for more info on it because while functionally I was able to figure out how it worked, I wanted more practical application examples of why you'd use it. Thanks!
Thanks everyone! The z=f(x,y) example makes it more clear to me.
The official documentation usually includes examples, although I don't have it in front of me right now to check for meshgrid specifically.
At MathWorks or in consulting specifically? Because I was in that department for years.
How often and how quickly do they need to communicate? Can they both exist as submodels within a base model? That is pretty simple. Otherwise, you could open them in concurrent instances of MATLAB and then read/write a common data file (or set of files). Or you can get a pair of USB-to-serial cables (wire the serial ends as null-modem) and use serial communications to pass messages. Each has its benefits and its shortcomings.
Hmm. Did your office once get invaded by Sasquatch?
If by "once" you mean for like 18 months, yes.
It was the gift that kept on giving.
linspace
I dunno if this is totally what you're looking for, but here's a really quick solution (and maybe it's not the best way to do things, but whatever): clc;clear; ABC_English = 123; DEF_Spanish = 456; prefix = {'ABC' 'DEF'}; suffix = {'English' 'Spanish'}; var_names = strcat(prefix,'_',suffix); eval(char(var_names(1))) eval(char(var_names(2))) That will give you 123 and 456
1. Use the various evil commands which allow you to execute strings to manipulate the dynamic variables, but do this *once* and *only once* to convert the data into a sane data structure that you can use for the rest of your code. 2. Find the person who caused these dynamic variables to exist in the first place and beat them senseless with their keyboard. Then offer them the data structure converter you created in step 1, so that they can convert all their existing data into proper data structures, and never again let another human see their shame by distributing information in dynamically named variables. 3. Tell them to fix their code to directly create the sane data structure that your code is already designed to handle, since you do all of your meaningful processing after using your data structure converter.
Eval is just about all that will allow you to use the dynamic variables.
This worked! Thank you so much!
I would just like to stress that *bludgeoning the responsible engineer with a keyboard is indeed the appropriate response*.
&gt;I think that this is very similar to your problem, though your images may have some additional lens distortion. It's worth a try. \[like this\]([https://imgur.com/a/WV9xoBj](https://imgur.com/a/WV9xoBj)) but realized it cant be done I guess because the resolution is too low I guess
The "right answer" sorta depends on what you're trying to do specifically. In addition to what's already been posted you could create Reader and Writer S-Functions that read/write to shared memory (or to a shared data segment of a shared library that both S-Functions load). Ultimately you'll be implementing some interprocess communication pattern, so you may wanna look that up and do some reading.
I would love to try to help but I don't seem to have enough RAM to debug myself. Have you tried with and without the sparse matrix? Have you tried using the single data type? How about signed integers? &amp;#x200B; If it really is a double precision rounding issue then round(X,n) has helped me in the past, although i suspect signed integers would solve that as well.
I don't know of any tools that can make what you're doing easier, but I have a couple of suggestions for you and things you might check, if you're amenable. First, be grateful for [IEEE 754](https://en.wikipedia.org/wiki/IEEE_754). We'd be living in a much worse world without it (or something like it)! It does catch folks from time to time, but you learn to work around it when necessary. Second, I wonder if you might check (since I can't download your file here at work on a break) what the rank of your A matrix is (`rk_A = rank(full(A))`). Your calculation may run into trouble with rounding or truncation if you have an ill-conditioned matrix, but it would *most definitely* run into trouble if your matrix wasn't invertible in the first place. You might get an error in some cases, but in others it would simply return a nonsense result. This would be a much easier problem to solve, because you'd just have to find the minor error in your implementation of the algorithm! If you have a full rank matrix, then you're in a bit more trouble. My first step would be to check the condition number, which you can do simply with `decomposition` and `isIllConditioned` if you're in 2017b or higher. Otherwise use `K = cond(full(A))` to verify that this isn't the problem. If you get 10^23 or Inf or something like that, you're going to have a bad time using that matrix. From there I'd probably investigate adding some (relatively) small epsilon along the diagonal or something to damp the conditioning problem. I've never had to deal with that particular issue in my line of work, so I'm not 100% sure what would be best. Final note: `inv(A)` will already perform the calculation you're typing out (with the `\` and sparse identity) if `A` is sparse, I believe since the introduction of sparse matrices into the language. Saves you a bit of code and adds some readability! Best of luck! --- Documentation: * [Sparse to full](https://www.mathworks.com/help/matlab/ref/full.html) * [Rank](https://www.mathworks.com/help/matlab/ref/rank.html) * [Ill-conditioned check](https://www.mathworks.com/help/matlab/ref/decomposition.isillconditioned.html) * [Condition number](https://www.mathworks.com/help/matlab/ref/cond.html)
I don‚Äôt like to be that guy, but often the best way to invert a large matrix is to not invert it: https://www.johndcook.com/blog/2010/01/19/dont-invert-that-matrix/
+1 Its important to emphasize the fundamentals.
&gt;I would love to try to help but I don't seem to have enough RAM to debug myself. Have you tried with and without the sparse matrix? Have you tried using the single data type? Singles have less precision than doubles. &gt;How about signed integers? Integers would require all values to be rounded to integers, which is going to cause much larger rounding errors than floating point values. Floating point epsilon for most computers is about 10^-12 .
I don't think you want to invert this beast. Maybe Levenberg-Marquardt or some other optimization algorithm would work for what you're really trying to do.
This smells like a classic case of XY problem. https://mywiki.wooledge.org/XyProblem
I appreciate that, the file given only seemed to contain signed integers, also with a \^-1 in OP's post and a result of a stupid high number could be a result of not reaching a 'true 0'. Less precision would be useful in that case as there is more rounding by default.
It is extremely unlikely (impossible, probably, but I've just woken up) that a matrix of integers has an inverse composed of integers. That would be like finding an integer A such that A^-1 is an integer. I'm pretty sure the only solution to that is the identity.
Fair enough
You say "coordination turn." I know you said you don't know the English term, but a coordinated turn is a thing in aviation. But for some reason I think you might mean a coordinate transformation? I understand that you're trying to create a glide slope. Is this in 2D? 3D? When you say you lack knowledge of these subjects, do you mean that you're struggling with the glide slope, or with the MATLAB? If you have any specific, targeted questions, I'd be happy to help. But I'm just still trying to understand exactly what you're looking for. If you want, you can PM me.
Look at the eval () function
input = {a b c} makes a cell array you can reference as input{1} for a, input{2} for b, etc. I should probably point out the function [ismember](https://www.mathworks.com/help/matlab/ref/ismember.html) might do the matching you want. I‚Äôd probably just use ismember(a,b) and ismember(a,c) rather than bothering with the whole cell array thing.
Can you use tables? Then you can name the rows and columns and call them like structures with the name instead of index.
While there are ways to do that, and I know this is a classic "programming help" response, I really don't think you want to do that. 999/1000 that someone wants to do something like this, they would be better off using either a [cell array](https://www.mathworks.com/help/matlab/cell-arrays.html) or a [structure](https://www.mathworks.com/help/matlab/matlab_prog/create-a-structure-array.html).
`plot3(X,Y,Z)` should do it (I think so, not sure what you want...) or you could try some other representations, as `surf(X,Y,Z)`, `mesh(X,Y,Z)` or even `contourf(X,Y,Z)` have a look at Matlab help, give them a try and see what fits the best your data
like i just want to plot x\^2 + 2\*x+ 5
Can you clarify a little more what you mean by 2-dimensional equation? Do you mean a 2D system of differential equations or like the formula for a circle (x^2+y^2=r)?
&gt;like i just want to plot x\^2 + 2\*x+ 5 like i just want to plot x\^2 + 2\*x+ 5
oh, ok, ok, my bad! I got it wrong. I said functions for a 3D plot [plot](https://www.mathworks.com/help/matlab/ref/plot.html) x=-1:0.1:1; % evenly spaced vector, from -1 to 1, spaced by 0.1 y=x.^2+x*x+5; % defines y. the dot is to do a element-wise multiplication plot(x,y) % plot x and y [element-wise operations](https://www.mathworks.com/help/matlab/ref/times.html)
syms x y=x\^2+ 2\*x+ 5 ; fplot(y); &amp;#x200B; &amp;#x200B; or if you have an interval you want it to be on, do fplot(y,xinterval)
Ok in functional form that would be y(x) = x^2 + 5x +2, a parabola. So you would set up a vector of x's to test (x = [-10:1:10];), then solve for y using your equation. Then plot(x,y).
Ok in functional form that would be y(x) = x^2 + 5x +2, a parabola. So you would set up a vector of x's to test (x = [-10:1:10];), then solve for y using your equation. Then plot(x,y).
try size(A) and see what cos(x) gives as a result
also `whos A`
A is not a 2x2 matrix in this case. X is a vector. So cos(x) is a vector. Putting 2 1x21 vectors in the top row of A will concatonate them. Making a 2x42 matrix. I agree with the other poster about putting a loop over x as the simplest fix.
**clearly** Use size or open the matrix in the gui or remove the semi colons to see the output..
As to why, x is 21 columns long, as a hint.
+1. ismember() is the way to go.
No, it's clearly 2x42. Just out of curiosity, what do you thibk the elements of the matrix are? For example, what do you think element A(1,1) is? Cos(x)? But what is the cosine of a 12-element array?
y=x.\^2+~~x~~2*x+5; % defines y, the dot (.^) is to do a element-wise operation
thanks!
Do you need the for loops at all, cannot you just use `ismember`?
So it looks like you are trying to make 21 different 2x2 rotation matrices, and do some matrix operations on them (det, trace, etc.). MATLAB‚Äôs matrix operations are only defined for one set of inputs at a time. They are not like sum() where you can essentially automatically for-loop over multiple sets of inputs in one go. As a result, you have to manually for-loop over all 21 different 2x2 matrices. Although you must do all the det and trace commands inside a for-loop, you can form the matrices in one shot and then index into them like ‚Äúdet(A(:,:,ind))‚Äù. To do this, set ‚Äúx=permute(x,[1,3,2])‚Äù before defining A. Then, A will be a [2 x 2 x 21] array, which is essentially a 21 element collection of 2x2 matrices.
To start off, I don't think you need for loops at all. As kupiqu says, ismember will do most of what you want. Between ismember and logical indexing, you should be able to avoid loops altogether. To tackle your preallocation question (which, as discussed above, should not be necessary), you don't know how many comparisons will be true, but you do know how many CAN be true - the maximum possible value would be all elements in A and B having the same value, in which case you'll need length(dataSetA).\*length(dataSetB). If you have reason to believe most of those will be false, you can preallocate with sparse() to keep your memory usage low. As for parfor (which again, should not be necessary), instead of returning ONLY the true values for the comparison, you could return a matrix indicating if each comparison was true or false. This would allow you to run a loop where you only assign the value of 'dataMatrix(k,z)', thus removing the need for a 'count' variable. As above, if memory is a concern, sparse matrices will help if most values are empty.
You can, but this is discouraged practice, as evaluating commands at run-time is slow and, in general, is not very safe. If you have labels, then keep a separate variable with the labels. I'd recommend using index vectors instead to match them up.
 A parfor loop must be executable asynchronously‚Äîthat is to say, the order of the iterations shouldn‚Äôt matter. If the parfor loop was replaced with a for loop, then count‚Äôs starting value would change between iterations. Thus, the parfor loop is not asynchronous. Try setting count to 1 inside the parfor loop. Hopefully, that will still work for your code. Additionally, as u/kupiqu pointed out, it is probably faster to use ismember. One insight that might help you is that, if your data are sortable (e.g. reals, integers, etc.), then sorting (O(nlog(n)) will group all identical elements together. Then, you can just move sequentially up the sorted list and check for repeats (O(n)). So, checking for shared elements between two sortable sets can be done in O(nlog(n)) which is better than your approach‚Äôs O(n^2 ) of pointwise comparison. IIRC, ismember implements the sorting approach I described. Unless you have a lot of cores and carefully manage memory, it is unlikely a parallelized version of the O(n^2 ) approach will beat a serial version of the O(nlogn) approach given the size of your data.
 &gt;&gt; a = [Inf 0 0 1 2 3 4] a = Inf 0 0 1 2 3 4 &gt;&gt; mean(a) ans = Inf
That works, but it might be better to use the built in function [nanmean()](https://www.mathworks.com/help/stats/nanmean.html).
If you want to preserve your code structure without doing any additional work, just initialize the matrices as 0s, and populate the 0 if it meets the conditions or leave as 0 if it doesn't.. then you don't need "count" and your parfor will work. With the above in mind, logical indexing removes the necessity for loops altogether; however, I'm unfamiliar with how well it scales with dataset size and/or if parfor would actually do it faster for 2.5bil points. Cheers, ED.
I have used Simulink's Stateflow toolbox to parse real-time measurements from biomedical sensors and would be interested in learning more about the scope of the project. Gmail address is coronabeach
[removed]
there's also the command omitnan(a) You might find that useful in other situations
These kinds of posts just baffle me. It requires less text to just check in MATLAB than to ask this question here. Why is that not the first step in cases like this? I really want to know.
It took you more time to write this comment than it would have taken you to ignore the post, so why did you do it?
Start with all your data points (x1, x2, ...). The ‚Äúlikelihood‚Äù of a model trained on these datapoints is defined as: L = pdf(x1) \* pdf(x2) \* ... Recall that multiplying together probabilities gives you the pr
Because I can't get the answer to my question by typing 30 characters of MATLAB code.
Well, the reason I didn't do it this way (I know enough matlab to know to do pre-allocation of 0's and then remove 0's/leave them at the end) is because of memory issues. The computer I am using doesn't have the capability to pre-allocate memory for 2.5 billion possible comparisons. Which is why I wanted to increment so that there would be sufficient space.
I'm essentially creating 300,000 lines on a graph using coordinates and then checking to see if each of those lines hits through one of 8400 points. So there are 2.5 billion comparisons needing to be done. I know how a parfor loop works and that using a count as I tried to will not work because of the fact that count is being relied on in each iteration. That being said I gave the code example to show what I was attempting to do hoping somebody would have a good solution. The main issue with doing what people have been suggesting is memory. I still have to play around with sparse to see if I can achieve what I wanted to do originally with a parfor loop but using a sparse allocation method instead of the normal zeros or truth or false or ones methods.
Find out the space requirements and just break your dataset up into portions that your ram will allow, or occasionally just flush your ram and do a dump?
Because -10:1:10 returns a 21x1 array, spaces between elements in square brackets implicitly concatenates them across the second dimension in this case and a semicolon between elements concatenates along the first dimension. So you told it to concatenate 2 21 element arrays horizontally, giving you a 1x42 array, and then concatenation two 1x42 arrays vertically, so you got a 2x42 matrix.
Maybe you can apply some kind of down sampling to the zoomed in image so that the sampling is comparable to the wider image, maybe apply some edge detection filter, Sobel, Weiner, LoG, for example, do a convolution and look for areas with a high response? Could be very clunky, but I don‚Äôt know of any standard toolboxes that will do what you‚Äôre asking without a bit of extra preprocessing/information.
Are the matrices of a fixed size? Do you want to update on every input? Does it need to be user-friendly or will you accept some MATLAB notation conventions as a string? There are a few ways to do any of those that are easy enough given more information.
I have no idea why, but it looks like you can't. Even if you look under the mask (right-click, mouse over Mask, click Look Under Mask), it's just a gain anyway... The solution? Don't use a slider gain. Use a regular gain. It connects just fine. Interesting choice by MathWorks.
Yeah, I can‚Äôt think of a clever way of doing that except through O(n^2 ) comparison. ismember probably won‚Äôt work because your two data sets are of different elements (lines vs points). I think I might have not been thoroughly reading your post either about where you were confused re the parfor‚Äîapologies. So, one thing you could consider is doing a cell array. Like this maybe: intscts = cell( 1 , nPoints ); parfor p in points isIntsct = false( 1 , nLines ); for L in lines isIntsct(iLine) = compare(p,L); end %for L intscts{iPoint} = find( isIntsct ); end %parfor p Or, if you‚Äôre really memory strapped, you could try doing the loop twice. Once to find out how many intersections there are per point, and again to actually list out those intersections.
Thanks for sharing the link. There is a physical interpretation for this matrix and its inverse that may help me to do the calculations. I will add more details to the question.
I like the XY problem expression. I will add more details of the original problem.
&gt;signed integer Thanks for sharing your thoughts. Back to the comment from FrickinLazerBeams, I have tried with and without sparse matrix and have received totally different answers. Both of them are supposed to be the same.
Thanks for sharing your thoughts. I totally agree with you that the IEEE standard is needed, but we are not living in an ideal world so everything has to be accepted with a grain of salt. Theoretically, the matrix is non-singular (thus, it is full ranked), and I have validated that the process by which it is produced. I was hoping that there would be a way to do the inversion, but as you (and others) have mentioned there is not such a magic tool. I am going to add more details to the problem about the physical interpretation of this matrix and its inverse, as it may help to do the calculations.
Thank you for the response! I guess I did already understand, for the most part, how AIC and BIC work, but I had little understanding of likelihood/LL, so this makes everything much more clear. &amp;#x200B; That said, I have never used the pdf function before. I'll give sample data points: X = 1, 2, 20, 50, 100 Y = 170 , 150, 50, 10, 10 &amp;#x200B; These are fit very well by the function y = 200/(1+kX) where k is a free parameter, at least according to the curve fitting tool. But how do I get the pdf out of it? You referenced "x1", but don't I need to put "y1" somewhere in there too? &amp;#x200B; Thank you!
Why don't you work first on a tiny example? I'm not sure about the constraints in dimension of your datasets but for instance: ``` &gt;&gt; dataSetA = [1 2 3; 3 0 0; 1 2 2]; &gt;&gt; dataSetB = [3 7; 4 5]; &gt;&gt; ismember(dataSetA, dataSetB) % just to see what it does ans = 3x3 logical array 0 0 1 1 0 0 0 0 0 % you seem to be interested in row indices only &gt;&gt; [dataMatrixA, ~] = find(ismember(dataSetA, dataSetB)) dataMatrixA = 2 1 ``` And then you could repeat it for dataMatrixB using ismember(dataSetB, dataSetA) Is this what you are looking for?
Thanks!
Not particularly. As I noted in a comment to somebody somewhere in this thread, I am trying to compare whether ~300,000 lines intersect through ~8400 points. Ismember isn't useful in this way because I'm comparing two different types of elements; lines vs points.
I work with "videos" or image stacks really, I have never heard the term video processing used. What you might be looking for is machine vision or computer vision.
is simulation pacing real-time enough for you?
I see. If you would give few examples of your line equations, people could help better... For instance, would it be possible to use arrayfun in some way to check which of the 8400 points belong to each of the 300,000 lines' equations?
There are two ways to approach that.. one that transmit a live feed from the camera and use something like tensor flow or Google cloud platform like vision API or automl to detect the objects .. I don't know which is better to use for your purpose, but I can tell you that normally the video processing is actually a decomposition of frame and elaboration on each frame (there is again a Google cloud service to extract every frame from a video). Once you have the package you can use it as you want
Video processing is just image processing at 30 hz.
You're welcome! That's a really weird block... did you check out the example for it from the help? I'm more confused after looking at it than I was before.
Same here I don't really understand the use of the block haha
You're talking about the stuff on [the product page](https://www.mathworks.com/products/matlab/app-designer.html)? Go to [the documentation](https://www.mathworks.com/help/matlab/app-designer.html) instead. It's way better. The basic idea is as follows: 1. Either create a `uifigure` object in code, or start the App Designer app depending on whether you want to build it programatically or via GUI. They both have the same overall capability, just pick whichever you're more comfortable with. 2. Add some other `ui&lt;thing&gt;` components that you want; there's a list in the documentation I linked. Examples include images, axes, buttons, sliders, and more. 3. Program callbacks for the UI elements you've added. This is the code that determines what happens when you interact with your UI elements. Again, there's a list of callbacks for each element that you can find in the documentation. 4. Enjoy your app. For example, you might make a `uifigure` container, and add a `uiaxes` and a `uibutton`, then make the button open the file select dialog via `uigetfile`. Once the file you choose is loaded, it takes the slice you want and plots it to the axes (familiar MATLAB code in the callback). You might then add a slider or something else so you can pick which slice of 2d data you want... or you might come up with another method entirely. Up to you. Best of luck!
I actually figured out a quick way to get it done. but thanks for trying to help before I did :)
Looking at your update, the only things that come to mind are [permutation](https://www.mathworks.com/help/matlab/ref/permute.html) and [block matrix inversion](https://en.wikipedia.org/wiki/Block_matrix#Block_matrix_inversion). If your matrix can be structured into [Helmert-Wolf blocks](https://en.wikipedia.org/wiki/Helmert%E2%80%93Wolf_blocking), you can very quickly invert it blockwise. You might be able to accomplish this with the [sparse matrix reordering tools](https://www.mathworks.com/help/matlab/math/sparse-matrix-reordering.html). Sorry if that's not much help. Hopefully something someone said here will give you an idea!
Great answer! I just finished my first big project in App designer and, as an old GUIDE user, I would say that this new tool makes things much smoother and is, in general, easier to use. It makes extensive use of Object Oriented Programing workflow, so if you are used to the older, more procedural, way of MATLAB, it could take some time to get accustomed to it. The only thing that I would add to the answer is that in App Designer, axes and figures are not `axes` and `figure` objects, but `uiaxes` and `uifigures`. For this reason, not all the functions that accept `axes` as an input are also supported on `uiaxes`. For example, the functions for interactive placement of a region of interest (`drawfreehand`, `drawcircle` .... and all the others of the same family ) are still not supported on `uiaxes`. If your app requires these function it may be a good idea to create the interface with the old tool GUIDE.
Thanks for sharing your thoughts. Actually, my matrix has a block tridiagonal structure and I might be able to exploit that---thanks for the hint.
Awesome answer! I'll look into it. Thanks :)
You're welcome. All the best.
You're most welcome.
I had this exact problem three years ago, and I used a FileExchange tool called [Data space to figure units conversion](https://www.mathworks.com/matlabcentral/fileexchange/10656-data-space-to-figure-units-conversion), built by MathWorks staff member Michelle Hirsch. Worked beautifully.
They will send their goons. Don‚Äôt make the mistake I did.. DEACTIVATE ! DEACTIVATE NOW!!
Matlab will get upset.
Hey, if by that you mean that 1 second of simulation is 1 second of human time, then yes. That's at least what soft real-time means I believe. I can tolerate jitters of even 100s of us, as long as I can run a fixed-step sim at a few hundreds of Hz. Any good practice you'd suggest?
Why don't you just use [`SelectionType`](https://www.mathworks.com/help/matlab/ref/matlab.ui.figureappd-properties.html#bu4i700-1-SelectionType)? The figure the axes are in should be the parent container. Is that not the case?
yes it will.
You should check out xPC Target. Would require getting another computer (requires a master and slave PC), but might suite your needs nicely.
You will be terminated
Awesome thank you
You do NOT want to end up in MATLAB jail.
No idea. You can also give GNU Octave a try...
I was looking for this too!
It'll eventually stop working and require you to activate it with a license. Options: 1) Pay the (imho absolutely absurd) fee for matlab (woe to you if you want some toolboxes) 2) Get a job that has a corporate/campus/site license 3) Learn Octave (its MUCH slower than matlab, and its package system is confusing to figure out. Most basic code will work off the bat without modifications, but if you use toolboxes, you'll have to do a lot of code-massaging to get it to work) 4) Try Julia (its a similar syntax to matlab, but is more of a general purpose language. It's great for quick calculations. It's also weird, because Julia works better when you keep all your loops unrolled and don't "vectorize" them) 5) Take the pill, and just switch to Python. Its the dominant language in machine learning; has a plotting package based on matlab's syntax; and has a complete (general purpose) language. However, it's a fairly steep learning curve as calls, formats, types are all just ... different.
I‚Äôm experienced in Python. I was using matlab for its amazing plotting capabilities (Matplotlib is so confusing)
It stops.
xPC Target is called Simulink Real-Time now and you can only use it with a Windows host computer
The pacing option would not give you even 100s of us jitter on a normal PC. Try creating your own timing sfunction block with the chrono and thread cpp libraries. https://en.cppreference.com/w/cpp/thread/sleep_for
You're welcome.
&gt;Get a job that has a corporate/campus/site license Does anyone really do it any other way?
This post right here, Officer!
Consulting. That‚Äôs the main reason you would need an individual license.
I have a 3900x, is there something I should try?
i was looking back at some old code to see what i did. it's not elegant, but it works. &amp;#x200B; in my GUI, subplots were dynamically generated depending on the number of things the user wanted to see. when they were generated they were given the tags "manualPlot1", "manualPlot2", etc. each of these subplots were Axes that are part of the handles data structure and all had the same parent Panel. more explicitly, i would have handles.manualPlot1, handles.manualPlot2, etc. An important part of this is that each of the Axes has their own (x,y) coordinate system, as well as their own x-limits and y-limits. &amp;#x200B; i also added a table to handles that saved all these dynamically generated Axes to simplify referencing them in the future, which looked something like: &amp;#x200B; handles.manualPlotTable = {'manualPlot1', 'manualPlot2', ....} &amp;#x200B; since all the Axes had the same parent Panel, i determined which Axes was selected by editing the panel\_ButtonDownFcn(), which is the callback function for when a mouse is clicked (i think). each Axes has a property called 'currentpoint', which you can access with get(handles.manualPlot1,'currentpoint'), that tells you where the click occurred using that axes's specific coordinate system. from there it's as simple as checking to see if the currentpoint is within the axes' x and y limits. &amp;#x200B; the general code is below. if you select in an area where there is no axes, selectedK will be empty. from here you can add more logic and functions to deal with what happens next. &amp;#x200B; &amp;#x200B; &amp;#x200B; \[numTags, dummy\] = size(handles.manualPlotTable); selectedK = \[\]; for k = 1:numTags % get the click's relative location to the current Axes posTemp = get(handles.(handles.manualPlotTable{k,1}),'currentpoint'); posTemp = posTemp(1,1:2); % get the x and y limits of the current Axes xLimits = get(handles.(handles.manualPlotTable{k,1}),'xlim'); yLimits = get(handles.(handles.manualPlotTable{k,1}),'ylim'); % perfom the checks to see if it's within the x-range and the y-range xCheck = (posTemp(1)&gt;=xLimits(1))\*(posTemp(1)&lt;=xLimits(2)); yCheck = (posTemp(2)&gt;=yLimits(1))\*(posTemp(2)&lt;=yLimits(2)); % do the overall check overallCheck = xCheck\*yCheck; if overallCheck == 1 selectedK = k; end &amp;#x200B; end
I looked around and if you could try out this code it would help bring things into perspective. https://www.reddit.com/r/Amd/comments/7hyios/surprisingly_slow_matlab_performance/ I'll also run it on my current 6600k (4.5GHz) to add to the benchmarks within the next 24 hours.
Matlab goons found me last year because I had an octuple nested loop in my code and then proceded to severely beat me with slide rulers
Would be interested in this bench as well, since Matlab is compiled against Intel mkl libraries. Throwing a 9900knor 9700k into the mix would also be valuable.
If you use it for personal usage (not as a working tool) you can get a home license for 120‚Ç¨ (and 35‚Ç¨ per toolbox) which seems possible for individual.
I'm not 100% sure about the solution, but since no one replied yet, I thought I'd share a few things that might be helpful. It seems to me that you are writing a callback to a button press in a GUI. In this situation, I always called the `guidata` function with only 2 arguments as suggested [here](https://it.mathworks.com/help/matlab/ref/guidata.html). So I'd try something like this first: function load_data(hObject, eventdata, handles) data=readtable('28.xlsx'); guidata(hObject, handles) end Also, if you're trying to load some data from the .xlsx file and store it in such a way that makes it available to other components and function of the GUI (e.g., for plotting data o performing calculations) you might want to consider storing the variable `data` in a field of the `handles` structure as in here: function load_data(hObject, eventdata, handles) handles.data=readtable('28.xlsx'); guidata(hObject, handles) end In this way, after the call to `guidata(hObject, handles)` the loaded data will be available to the other components. If instead, you are fine with having the variable `data` only available inside this callback, there are no problems. &amp;#x200B; Hope there is something useful! good luck! :)
I meant computer vision.I just want to learn or need your suggestions, how to process to image from far away(remotely) camera? I try to use raspberry pi on rest api. Or should i use to r-cnn? I so confused, deep learning=deep mindfuck
I decided to image processing way. I just want to learn or need your suggestions, how to process to image from far away(remotely) camera? I try to use raspberry pi on rest api. Or should i use to r-cnn? I so confused, deep learning=deep mindfuck.
I think the best approach might be the rest API or a python approach... I don't know why you have to use MATLAB.. it's a great software for pretty much everything scientific related.. but for image I think there are better chooses like gcp.. I know that vlc can transmit live feed streaming from also a pi camera on your raspberry, to a computer, you do your thing, and than re-transimit the result or do whatever you want
Thanks for the suggestion. I actually however specified I can't use Simulink Real-Time and don't have the option of using a slave PC (e.g., Speedgoat or DSpace), because of budget limitations.
This seems potentially the direction I need to head to, but I'm very much of a noob about S-functions. Would for instance the sleep-for you suggested *contain* the instructions I need to run? Or would it result in pacing the execution of my simulation itself? I'm actually fine learning about S-functions, as long as I won't have to touch anything else in my (quite big) simulation environment. Thank you.
No problem. You only write the timing code in the new block and run it at your base simulation rate. Try measuring the time left in each period and have the thread sleep for the rest. You can easily get stable 500Hz on an ordinary PC from my experience. More info on writing sfunctions can be found here https://www.mathworks.com/matlabcentral/fileexchange/39354-device-drivers.
So if I get it right I basically need to add an idle block to my simulation that at each step burns the remaining time (and plots it / stores it for analytical reasons). And this block can be done with an S-function. I suspect the sleep-for you indicated initially isn't the right option in this case. Would I not better have a 'wait\_till\_time\_T' block instead, which takes input from a clock block? If I understand correctly, [this shared project](https://nl.mathworks.com/matlabcentral/fileexchange/67520-soft-real-time-block-for-pacing-simulink-simulations) does precisely what we are talking about.
if you're fine with a busy wait then you can do away with that.
I'm on their site right now, and for me its $2 150 for perpetual and $860 for an annual license (USD). Ahh, I see what you're looking at: For $149, I can get a home license, but its also not for government, academic or commerical use ... I don't know what I'd use it for then :(
What part of the documentation for textread wasn't clear? What happened when you tried it?
 I used \[h\]=textread('mountainHeights04.txt','%f', 1) and my file is named mountainHeights04.txt. It produced: "Error using textread (line 162) File not found. Error in read (line 1) \[h\]=textread('mountainHeights04.txt','%u', 1)"
Is your text file in the same directory as your matlab file? I think you can also state the full path to the file
what does in the same directory mean? I have mountainHeights04.txt saved on my computer but thats it.
Yeah 20GB of time series data isn't that big. But for MATLAB it's stupid big.
The same folder. Try moving the text file to the folder that your matlab file is in
Dumb question but how do I do that.
get someone else to do your homework for you
How do you move a file? Jesus dude how did you even find reddit?
haha bro I know how to move a file but I did it and that shit did not work. Im trying to make sure I did what he was saying. Would you want to do my hw though? I'll pay if you want to take a look at it
haha bro I know how to move a file but I did it and that shit did not work. Im trying to make sure I did what he was saying. Would you want to do my hw though? I'll pay if you want to take a look at it
readtable is new and very easy to use on data tables.
I‚Äôm pretty sure we are working on the same assignment. Just as lost as you are if correct.
1st Benchmark; performed @ work on a 3770k @ 3.4GHz Academic License &gt;&gt; Computer_benchmark N = 10: SVD Chol QR 1000 mult Inv Pinv **TIME IN SECONDS (SIZE: 10):** SVD: 0.140664 Cholesky: 0.003346 QR: 0.028572 1000 matrix products: 0.067299 Inverse: 0.085691 Pseudo-inverse: 0.244501 N = 100: SVD Chol QR 100 mult Inv Pinv **TIME IN SECONDS (SIZE: 100):** SVD: 0.010617 Cholesky: 0.000537 QR: 0.033218 100 matrix products: 0.005884 Inverse: 0.019130 Pseudo-inverse: 0.059195 N = 1000: SVD Chol QR 100 mult Inv Pinv **TIME IN SECONDS (SIZE: 1000):** SVD: 0.149856 Cholesky: 0.025403 QR: 0.027820 100 matrix products: 2.968321 Inverse: 0.040939 Pseudo-inverse: 0.403217 N = 2500: SVD Chol QR 100 mult Inv Pinv **TIME IN SECONDS (SIZE: 2500):** SVD: 4.575747 Cholesky: 0.107890 QR: 0.343767 100 matrix products: 41.354524 Inverse: 0.566010 Pseudo-inverse: 7.006641 N = 5000: SVD Chol QR 100 mult Inv Pinv **TIME IN SECONDS (SIZE: 5000):** SVD: 8.447790 Cholesky: 0.525983 QR: 2.242882 100 matrix products: 292.521963 Inverse: 3.779638 Pseudo-inverse: 55.270076 N = 7500: SVD Chol QR 10 mult Inv Pinv **TIME IN SECONDS (SIZE: 7500):** SVD: 23.781934 Cholesky: 1.718953 QR: 7.511631 10 matrix products: 91.845624 Inverse: 11.349485 Pseudo-inverse: 184.947318 N = 10000: SVD Chol QR 10 mult Inv Pinv **TIME IN SECONDS (SIZE: 10000):** SVD: 55.444575 Cholesky: 4.027170 QR: 17.520591 10 matrix products: 224.893864 Inverse: 27.596165 Pseudo-inverse: 429.315188
That is just completely absurd, 2150 dollars for some math software.
What you are looking for is a function handle. It is well explained on the mathworks webpage.
Usually I use the Import Data button on the home tab, adjust settings, then generate a script to do that in the top right. It should format the functions properly
https://www.amazon.com/First-Course-Finite-Elements/dp/0470035803 This is the reading required to get you started. Matlab is suitable for your purposes, but asking on this sub isn't useful. Given the simplicity of your problem, you could probably derive an analytical or semi-analytical solution... But this depends on how linear your problem is.
A = input B = 2*a Rerun the script Everytime you change a. Or Function [b] = p1(a) b = 2*a End Also, it's Matlab, not mathlab. Also, please Google any question that comes to your mind. I guarantee there is a solution for all simple questions, it's just about changing your wording.
There are no real pointers in matlab (like there are in C) but you can take a look [here ](https://stackoverflow.com/questions/14793453/matlab-link-to-variable-not-variable-value) for some help.
2nd Benchmark; performed on an i5 6600k @ 4.5GHz N = 10: SVD Chol QR 1000 mult Inv Pinv **TIME IN SECONDS (SIZE: 10):** SVD: 0.033557 Cholesky: 0.007855 QR: 0.006776 1000 matrix products: 0.003789 Inverse: 0.008262 Pseudo-inverse: 0.019072 N = 100: SVD Chol QR 100 mult Inv Pinv **TIME IN SECONDS (SIZE: 100):** SVD: 0.003777 Cholesky: 0.000162 QR: 0.004991 100 matrix products: 0.002603 Inverse: 0.006055 Pseudo-inverse: 0.004197 N = 1000: SVD Chol QR 100 mult Inv Pinv **TIME IN SECONDS (SIZE: 1000):** SVD: 0.098444 Cholesky: 0.004963 QR: 0.013834 100 matrix products: 1.318878 Inverse: 0.025649 Pseudo-inverse: 0.206442 N = 2500: SVD Chol QR 100 mult Inv Pinv **TIME IN SECONDS (SIZE: 2500):** SVD: 3.473863 Cholesky: 0.033008 QR: 0.145283 100 matrix products: 15.009235 Inverse: 0.510867 Pseudo-inverse: 5.142966 N = 5000: SVD Chol QR 100 mult Inv Pinv **TIME IN SECONDS (SIZE: 5000):** SVD: 3.990277 Cholesky: 0.229369 QR: 0.986675 100 matrix products: 105.954540 Inverse: 1.521479 Pseudo-inverse: 35.667976 N = 7500: SVD Chol QR 10 mult Inv Pinv **TIME IN SECONDS (SIZE: 7500):** SVD: 11.567871 Cholesky: 0.680771 QR: 3.048963 10 matrix products: 34.078864 Inverse: 4.669442 Pseudo-inverse: 115.749962 N = 10000: SVD Chol QR 10 mult Inv Pinv **TIME IN SECONDS (SIZE: 10000):** SVD: 26.990845 Cholesky: 1.492144 QR: 7.049753 10 matrix products: 79.625399 Inverse: 10.107072 Pseudo-inverse: 270.421634
Bro... Get outta here. We're a learning sub.
F = KU is the simly answer to your complicated question. You're probably better off using a commercial solver such as Abaqus, Dyna, Ansys etc.... If you are really determined to do an FE simulation in matlab, I suggest you look at existing solutions rather than developing your own. FE is **not** trivial and you will encounter many hurdles during development. Is this a linear problem? What type of boundary conditions are you imposing on this model?
I'd love to see the assignment. PM it to me if you want.
Here are the results from my 3900x at stock settings with 3200CL14 RAM on Linux. I ran it twice and took the second result to make sure that's minimal startup noise. For the results less than 1 second I think it's hard to draw any conclusions because there's so much room for noise. N = 10: SVD Chol QR 1000 mult Inv Pinv TIME IN SECONDS (SIZE: 10): SVD: 0.000139 Cholesky: 0.000029 QR: 0.000026 1000 matrix products: 0.001006 Inverse: 0.000091 Pseudo-inverse: 0.002162 N = 100: SVD Chol QR 100 mult Inv Pinv TIME IN SECONDS (SIZE: 100): SVD: 0.000851 Cholesky: 0.000102 QR: 0.000280 100 matrix products: 0.005364 Inverse: 0.000385 Pseudo-inverse: 0.001685 N = 1000: SVD Chol QR 100 mult Inv Pinv TIME IN SECONDS (SIZE: 1000): SVD: 0.077594 Cholesky: 0.005074 QR: 0.015603 100 matrix products: 1.776935 Inverse: 0.031000 Pseudo-inverse: 0.191074 N = 2500: SVD Chol QR 100 mult Inv Pinv TIME IN SECONDS (SIZE: 2500): SVD: 0.600032 Cholesky: 0.042917 QR: 0.168529 100 matrix products: 22.914303 Inverse: 0.382735 Pseudo-inverse: 1.815316 N = 5000: SVD Chol QR 100 mult Inv Pinv TIME IN SECONDS (SIZE: 5000): SVD: 14.933595 Cholesky: 0.315976 QR: 1.297359 100 matrix products: 176.025283 Inverse: 2.723259 Pseudo-inverse: 24.059984 N = 7500: SVD Chol QR 10 mult Inv Pinv TIME IN SECONDS (SIZE: 7500): SVD: 67.662650 Cholesky: 1.013105 QR: 4.327812 10 matrix products: 57.776034 Inverse: 9.142486 Pseudo-inverse: 96.188625 N = 10000: SVD Chol QR 10 mult Inv Pinv TIME IN SECONDS (SIZE: 10000): SVD: 176.406962 Cholesky: 2.405155 QR: 9.923830 10 matrix products: 138.048543 Inverse: 22.059847 Pseudo-inverse: 242.432267
I think he meant something to change the value of b without needing to specify it everytime the value of a changes. Creating a function still means that everytime a changes you have to write b=p1(a), which is no more different than just writing b=2*a everytime.
Look up dependent properties and create a class with y as a dependent property. I can write a skeleton for you if you‚Äôd like, just ask.
There are ways to do this, but if you have this confusion I'm certain you're not prepared to learn object oriented programming. So the short answer is, that's not how programming languages work. Every line you write is an instruction that gets executed. This won't happen that you didn't write an instruction for. If you want 2a in a bunch of places, write 2a. If you change a and you want b to change, you have to change b.
&gt;x = x=u(3+cos(v))cos(2u) I'm not sure what this is supposed to mean. The equals sign indicates *assignment* of the value on the right to the variable on the left. I'm not sure what it means to have two equals signs in one command. &gt;*array indices must be positive integers or logical values This means *exactly* what it says. Matlab thinks you're trying to index an array with something that's not a positive integer or a logical variable. Which is pretty simple to understand, right? If I give you a list of numbers and ask you to tell me what the 5th item on the list is, you could do that. But if I ask you for the -3rd, or the 5.74th, or the sqrt(-2)th element, what would you do? You'd say "idiot, that's not possible", right? That's what that error says. Logical indexing is something you should read about when you read the rest of the documentation on indexing. It's very simple and powerful. &gt;If someone can be so kind to tell me what I'm doing wrong on this first error, what I need to convert u and v to make it work. I changed them to radians but still got the error, so I'm just confused. Stop. Stop right there and consider why you thought switching to radians would address the error you saw. They have absolutely no relationship, which tells me you are trying to troubleshoot by making random changes until you get your code to run to completion, and then basically just hoping that the result it gives you is what you think it is. Don't do that. The way to troubleshoot is to *understand the problem*, then make changes that address the problem specifically. If you don't understand the problem, making random changes is *still* not a reasonable fallback option. In that case you start working to improve your understanding, probably by reading the documentation related to what you're doing or the error you have, or by running your code line by line and inspecting the values of each variable to see when they diverge from your expectations.
1. the first part was just a copy paste error (edited) 2. Got it 3. Well duh 4. K thanks.
Doesn't python do this automatically?
There's no implicit multiplication in matlab. Statements like u = 0:2pi and (3+cos(v))cos(2u) are wrong. Need to be 2\*pi, 3+cos(v))\*cos(2\*u).
The problem is that `u(3+ cos(v))(cos(2u)` needs some multiplication symbols. When you don't have them, Matlab thinks you have a function `u` not that you're multiplying them.
thanks to both of you guys for doing these tests
Seems like this is an eigenvector problem... Less elegantly, I‚Äôd try to find the index of the center of the spray peak and find the center of the spray bottom (the white blob is spray I think?). You must convert these indices to their spatial coordinates then use atan to compute the angle.
Nice spreadsheet. We also have an R5 1600X, R7 1700, and 6700k results in this thread: https://www.reddit.com/r/Amd/comments/7hyios/surprisingly_slow_matlab_performance I'll ping you if r/intel gets me any juicy results from something like the 9900k.
Here's a sneak peek of /r/intel using the [top posts](https://np.reddit.com/r/intel/top/?sort=top&amp;t=year) of the year! \#1: [Intel's New Low: Commissioning Misleading Core i9-9900K Benchmarks \[Hardware Unboxed\]](https://www.youtube.com/watch?v=6bD9EgyKYkU) | [215 comments](https://np.reddit.com/r/intel/comments/9mmj17/intels_new_low_commissioning_misleading_core/) \#2: [Just found this funny old 1997 Intel Pentium II space man doll](https://i.redd.it/tg5tsusg1t721.jpg) | [39 comments](https://np.reddit.com/r/intel/comments/abhtw0/just_found_this_funny_old_1997_intel_pentium_ii/) \#3: [Intel to Cut Prices of its Desktop Processors by 15% in Response to Ryzen 3000 | TechPowerUp](https://www.techpowerup.com/256700/intel-to-cut-prices-of-its-desktop-processors-by-15-in-response-to-ryzen-3000) | [221 comments](https://np.reddit.com/r/intel/comments/c39h2c/intel_to_cut_prices_of_its_desktop_processors_by/) ---- ^^I'm ^^a ^^bot, ^^beep ^^boop ^^| ^^Downvote ^^to ^^remove ^^| [^^Contact ^^me](https://www.reddit.com/message/compose/?to=sneakpeekbot) ^^| [^^Info](https://np.reddit.com/r/sneakpeekbot/) ^^| [^^Opt-out](https://np.reddit.com/r/sneakpeekbot/comments/afd0dd/blacklist/)
If the spray is always vertical I would rather extract the width w as a function of the vertical position z (e.g. by counting the number of white pixels on every line of the processed image), then plot w(z) and do a linear fit. This would result in less errors than just taking the width at one point.
I only tried with last versions, from what I understood you should be OK, those versions should be compatible Which files it says that you are missing? We just called the supports because I'm buying new licenses for my company and we are using trial versions.
Nobody here can see your screen (I hope? That would be creepy) so we don't know what you've named your variables. I can say that it appears, based on the documentation: https://www.mathworks.com/help/matlab/ref/bvp4c.html That bvp4c returns the solution to you directly.
You could use tic/toc I guess. I know there used to be an object called `timer()` as well but I haven't used it in years. That said, this sounds like something you don't actually want to do. What's the actual problem you're trying to solve? This just sounds like a bad idea.
I think timer might work with callbacks. What I‚Äôm trying to do is allow the user to change variables within a given time and after the elapsed time (lets say 10 minutes) the variables are then used. I‚Äôm trying to make a very very simple stock market where the user can buy/sell a stock which would be changing the variables of how much money they have left and which and how many of the stocks they own. The timer I‚Äôm looking to use would just update the values of the stocks to allow the user to see if they gained/lost money and be able to sell/buy others. I hope this makes sense
Can't you just calculate the update at the time you want to display it?
So some testing has led to further confusion: &gt;&gt;&gt; log_loss([0,1], [[0.9,0.1],[0.4,0.6]]) 0.30809306971190853 crossentropy([1 0; 0 1],[0.9 0.4;0.1 0.6]) ans = 0.1540 These are a factor of 2 apart. Learning that python normalizes by default, I did the following: &gt;&gt;&gt; log_loss([0,1], [[0.9,0.1],[0.4,0.6]],normalize = False) 0.61618613942381706 Which is a factor of 4 apart from matlab!
In this line in your loop [LL(j),WW(j)]= size(BW2); You are setting LL(j) and WW(j) to the height and width of the binarized image, and then you compute the max of WW, which is just the width of the image. I don‚Äôt know what you intended to compute but I suspect it is not this.
Check out [clock](https://www.mathworks.com/help/matlab/ref/clock.html). You could make a condition in a while loop that checks clock for the current time and compares it to a stored time, if currentTime - pastTime &gt; 10 minutes; update variable.
You might be waiting a bit for this one. Im not a mathematician, so I could possibly help explain why your attempt failed, but I could not convert that equation into MATLAB script. These questions also sometimes come across as someone asking the sub to do their homework for them, and that usually doesn't get a great response I'm afraid.
I suppose you'd write it and then plug in the value of z that you want (2). You can do a summation with `sum()`, surprisingly. For the variable length nested sum you'll probably need a loop.
Oh boy, I miss when mathematics had numbers...
Summations are 'for' loops.
For the nested summation you should try a recursion approach. I'd help but I'm on holiday and redditing by the poolside. If you can wait until Wednesday....?
Every time you see a summation you need a for loop, and perhaps nested loops. Perform your coefficient solver b0 and bk inside the loop. You may need a final statement outside of the loops to perform a final operation, or combine values in a way. I would be careful with magnitudes as well, I‚Äôm assuming you mean z= 2i + 0j here. I know it looks intimidating at first glance, but the use of loops just means you need to type out the equation once and be done. Anything that has the same iteration bounds will probably be in that same loop together.
I hope you're having a good time. I can write the code myself once I understand how to calculate the multiple summations so the problem is basically with the maths behind it. Your help at the earliest will be appreciated.Thanks mate
If I was you I would create separate functions that evaluate the individual portions of the function as desired. Have them take the necessary input params. Then have your main chunk of code be the top level ‚Äúevaluation‚Äù of the actual function. Since it‚Äôs a multi layer sum, you would likely want to make it recursive. This would allow you to achieve arbitrary depth of summation without having to hard code in for loops.
Does the summation apply both to d1q and d2q?
It seems it does explicitly in d2 and implicitly in d1. Meaning d1 doesn‚Äôt contain a summation symbol but appears to contain components that are obtained through summation. Make sense?
It does. But I am wondering if d2q is supposed to be just calculated once with the initial values of q1,q2..qk(i.e 0) or it has to be calculated for each iteration
Also from what I know, nested summations are solved in a way where the rightmost summation is calculated first and then the others follow. Does that mean that the upper limit of the first summation will be done from 0 to M number of times since q1,q2....qk are all 0 initially?
Nested summations can be calculated that way sure. Think of a summation like a double integral. You can change the order of integration, you just need to change the variable you are integrating with respect to. Therefore, you can do the summations in any order, just make sure you are paying attention to what variables are iterating. If this makes no sense, summate the right most one first lol. For d2, it just seems you need a q value first(there are no bk terms), so, once you find q you can proceed. I‚Äôm not sure how they are defining the initial q values as I‚Äôm not familiar with that notation of initial value. If you see a summation symbol, insert a for loop. If you dont, odds are you could do the rest with a loop or by brute force if you set the beginning part up appropriately. Sorry this isn‚Äôt more help I‚Äôm on mobile and can‚Äôt type and reference the equation at the same time.
I am just curious what the context for this formula is.
Have you heard of this: [https://www.mathworks.com/products/matlab-coder.html](https://www.mathworks.com/products/matlab-coder.html)
I have not, and it‚Äôs not really what I‚Äôm looking for.
Try to separate instructions, 'c' is a concatenating vector with 3 elements: 2; ones(..) and 2 c_temp = [2; ones(N-1,1); 2]; the result will be a vector, starting with 2, then some ones, and ending with 2 then, in the otherside we have: c_temp2 = (-1).^(0:N)'; there, -1 is element-wise raised to power 0 to N, so the result is going to be a vector, finally c\_temp and c\_temp2 are element-wise multiplicated c = c_temp.*c_temp2;
Thank you!
I'm not sure how you trained your NN in MATLAB, but MATLAB does have a normalization step by default, implemented by a mapminmax function.
The contour plot should be plotted with fill on to begin with, so the entire plot is now filled. Then the subsequent fill command between h1 and the x axis makes the area under the curve white again
You're going to want to break this down and work on it piece-by-piece. I don't have time to go through all the motions, but here's a guide for you: 1. **Solve the sum with the curly piece on top.** I assume you have the vector q_1, q_2, etc. That summation should be pretty straightforward. You're going to have a lot of nested loops there (K+1 of them). 2. **Solve for d_1q**. This loop looks a bit simpler. You'll have to compute all of the `nchoosek(M-q1_...,qi)` first, then mutliply the results together, then multiply by that final constant. 3. **Compute b_0 and b_k** These look pretty straightforward. 4. **Compute d_2q** This looks pretty straightforward as well. 5. **Compute f_Z_1(z)** This looks pretty straightforward as well.
Use `timer`. It's pretty easy to use, just make sure you get the timer cleaned up. One of the biggest nuisances is that, while debugging, you'll end up creating a bunch of dead timers in the background. Use `delete(timerfindall)`.
&gt;Every time you see a summation you need a for loop No, this is a very bad habit.
No network was involved in either of those function calls, just random outputs and targets. I guess looking into the crossentropy function .m file is the only way to find out.
I guess it depends on what‚Äôs being asked. All through analysis this was basically true, with addition of functions.
What takes priority? The number or the letter? For example, if you had the follow strings: '1A', '2A', '1B', how would you like them to be sorted? '1A' '1B' '2A' or '1A' '1B' '2A'?
What takes priority? The numbers or the letters? What do you do in this case: strings = {'1A'} {'1B'} {'2A'} {'A1'} {'Z1'} How would you want this to be sorted?
I would say that sorting the numbers properly would take priority. I can explain a little better. Our sample names are usually composed of two parts, the sample name and then the aliquot number. So, for the examples above, '14RB02' and 'FCT-B', and then the aliquot number -14zr or -89. In the case that we have two samples, '14RB02' and '22RB02', 14 should come before 22. Within the same sample, aliquot 2 should be listed before aliquot 11. So, then let's say... &amp;#x200B; 1A, 1B, 2A, A1, Z1 &amp;#x200B; I don't have an easy way of splitting the strings apart to separate the sample names and the aliquot numbers, because there's a fair amount of variability in the naming and numbering schemes (e.g. usually the aliquot numbers are at the end of the string, however, many end with 'zr' or 'ap', or 'A' or 'B', etc.
https://stackoverflow.com/questions/39538848/how-to-find-the-intersection-of-two-ellipses-in-matlab
It seem that **inplygon** supports using gpuArrays for the latest version of Matlab, and possibly earlier versions. With that being the case you will [need to build distinct gupArrays](https://www.mathworks.com/help/parallel-computing/gpuarray.html) with **gpuArray()** to pass them to the GPU and then return them from the GPU with **gather()**. The initial post suggests you already understand these initial steps. If you have multiple GPUs then you could use parfor or spmd for further performance improvements, otherwise a for loop should be your starting point for the gpuArrays. However, you could try parfor/spmd if you have multiple CPUs available to see which is faster. I would suggest that as you test your code for this you use a fraction of your data, perhaps only 500 of the category A and 500 of the category B ellipses. This will allow you to run things quickly (hopefully) and see where performance gains can be made.
Read up on 'contains' and 'strfind'. You would first import the data into a cell array then use one of the above commands to get the results.
So it sounds like you need to split the strings into two and then sort them according to that. This seems like data that could work well in a structure
Try this: https://www.mathworks.com/matlabcentral/fileexchange/10959-sort_nat-natural-order-sort
I had a similar problem, and I found the built-in function 'inpolygon' is much less efficient than it could be when you know you have a convex polygon (which a polygonal approximation of an ellipse would be). I ended up making my own program that worked with matrix operations, and it sped things up immensely. The following code will undoubtedly need some adjustments to achieve what you need, and may be further improved, but I think it will help you out. I will note that I ran into some RAM limitations for my particular use of this code, so depending how you use it, and how much RAM you have, you may need to adjust your code for that purpose (i.e. you may need to avoid checking all 7000 category A ellipses to all 9000 category B ellipses at once). function [IndMatch]=inConvexPoly(XP,YP,XPoly,YPoly) %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% % % Program: [IndMatch]=inConvexPoly(XP,YP,XPoly,YPoly) % Author(s): TheQueq % Created: Jan. 2018 % Last Major Revision Completed: Feb. 2018 % % This function determines if the points defined by the vectors XP and YP % lie within the convex polygons defined by XPoly and YPoly. % % Inputs XP and YP are vectors containing the X and Y coordinates which % are being evaluated to determine if they are in the specified polygons. % % XPoly and YPoly are matrices containing the X and Y coordinates % respectively of the polygons which the provided points are being tested % against. The dimensions of these matrices are NxM, where N is the % number of polygons, and M is the number of points in the polygons. % XPoly and YPoly must be sorted such that the points are either in the % clockwise order or the counter-clockwise order. % % Output IndMatch is a logical matrix which indicates if a corresponding % point lies within the corresponding polygon. The matrix has dimensions % NxM, where N is the number of polygons defined by XPoly and YPoly, and % M is the number of points defined by vector XP and YP. % %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %check if valid polygon if size(XPoly,2)&gt;=3 %this requires the polygon to be ordered X = permute(repmat(XPoly,1,1,length(XP)),[3,1,2])... -repmat(XP',[1,size(XPoly)]); Y = permute(repmat(YPoly,1,1,length(YP)),[3,1,2])... -repmat(YP',[1,size(YPoly)]); I = sign(circshift(X,1,3).*Y-X.*circshift(Y,1,3)); InSide = all(I==I(:,:,1),3); OnEdge = (sum(I==0,3)==2)|(sum(I==0,3)==1&amp;sum(I,3)~=0); IndMatch = (InSide|OnEdge)'; else IndMatch = false(size(XPoly,1),length(XP)); end
thanks, but I already have looked at this. this is far too slow and won't work with gpuarray
What is your source for this? And by latest version you mean 2019 or 2018? Hopefully 2018 as I don't believe that I will have access to 2019, maybe 2018, though.
&gt; Accelerate code by running on a graphics processing unit (GPU) using Parallel Computing Toolbox‚Ñ¢. &gt;This function fully supports GPU arrays. For more information, see Run MATLAB Functions on a GPU (Parallel Computing Toolbox). Mathworks states such support exists in [their posted help file](https://www.mathworks.com/help/matlab/ref/inpolygon.html).
This is quite interesting. I tried to run inpolygon with gpu arrays on matlab r2016b and it was giving me an error telling me that this function was not supported w/gpu arrays. Did they add this functionality recently only or what? this is all weird to me
See "assert" and try/catch, for the simplest cases. It's not really inherently designed for DBC, but it's quite doable. There's also a pretty extensive unit testing framework available for non-runtime testing.
Interesting how the SVD benchmark is the outlier in terms of processor ordering. Does anyone know more about what kinds of libraries matlab uses? Does it use AMD ACML? I'm pretty sure it uses MKL.
Yep, it uses MKL.
Another approach, and one that I would argue is better, is to use COM automation to interface with Excel. Here's some documentation on using automation to write to Excel but you can also do the same with search functions: https://www.mathworks.com/help/matlab/matlab_external/using-a-matlab-application-as-an-automation-client.html This is a better approach if you're dealing with very large spreadsheets, where reading them in can take a lot of time. Or if the spreadsheets are constantly being updated and modified, and you don't want to hardcode the locations of the data that you're interested in. Also, if you're dealing with Excel, learning to automate it using VBA and COM methods (they are pretty similar) will make you a superstar.
Thanks for doing the benchmarks, although I am disappointed as it wasn't what I hoped to see!
I have a number of doubts: 1. for K=1, if I have to find d1q, there are two terms that correspond to it b1 i.e b1\^q3 or if we go by the general formula of bk,it would be b1\^(M-q1-q2). Which value should I take? 2. In the value of d2q,the second term has a summation which tends from k=0 to K over a term that contains q(k+2). If I take K=1, the summation would include the terms q(1+2)=q3 which is not defined for K=1. Does it have to be considered 0 in that case? 3. Do the binomial coefficients in the value of b(k) and b(0) have to be multiplied with the term? Thank you in advance mate
&gt;I have a number of doubts: 1. for K=1, if I have to find d1q, there are two terms that correspond to it b1 i.e b1\^q3 or if we go by the general formula of bk,it would be b1\^(M-q1-q2). Which value should I take? 2. In the value of d2q,the second term has a summation which tends from k=0 to K over a term that contains q(k+2). If I take K=1, the summation would include the terms q(1+2)=q3 which is not defined for K=1. Does it have to be considered 0 in that case? 3. Do the binomial coefficients in the value of b(k) and b(0) have to be multiplied with the term? &gt;Thank you in advance mate
Right, but like I said, due to the variation in sample naming schemes from various researchers/labs, identifying and splitting up sample name and aliquot number are not straightforward tasks.
Perfect! This is exactly what I was looking for. Thank you!!!
Yeah, the R9, eh? I too was hoping for substantially better gains once they announced improved AVX2 instructions. But, if the software itself is biased against you (MKL library, see the fine print), then it isn't as much of a surprise.
Can you share what the waveform looks like?
Square signal with 20ms period and variable pulse.
Bruh. https://www.es.co.th/schemetic/pdf/et-servo-s3003.pdf
That is PWM with a 50hz freq. The duty cycle (%on pulse) is proportional to the average current delivered.
Classes added property validation recently. https://www.mathworks.com/help/matlab/matlab_oop/property-validator-functions.html
The coordinate rotation might be referring to a degrees of freedom model where you have the fixed coordinate system (earth centered earth fixed) and then the coordinate system of the plane. Google 6 degrees of freedom for the equations to go from one coordinate system to another
Why is replacing nan with 0's not an option?
Because in the context of the data it represents, 0 is a valid value which appears when appropriate, whereas Nan means no data exists.
I was more looking at the R5 to be honest, my load isn't huge but the problems will extend down as well.
It looks like you are using `corr` wrong it seems like it should be `pairwise` or complete but not both.
But if your desired behavior is to ignore nan, ignoring in the context of cross correlation is that a nan value shouldn‚Äôt contribute to the sum. Setting nan values to 0 will have that effect since 0*X= 0. The only edge case is when the entire neighborhood for a given output pixel is NaN in one of the inputs. Would you want NaN as the output in this case or is 0 ok? 0 doesn‚Äôt seem entirely unreasonable in that you have no data to suggest a correlation.
What /u/trialofmiles said is exactly right. You need to think about what you actually mean by "ignore NaNs". Can you define that mathematically? Write down the cross-correlation integral (or sum, in the discrete case) and show us what that would look like when "ignoring NaNs", in a way that isn't equivalent to setting NaNs to zero. More generally, Matlab cannot do calculations that can't actually be meaningfully defined mathematically. Conversely, if you can define it mathematically, Matlab can certainly do it. Either way, Matlab does not free you from having to understand whatever it is you want to do. It can calculate for you, it can't think for you.
You need to use the argument number 5 (called C) of scatter3. I guess at the moment, you have something like scatter3(x,y,z) If you take a look at the doc, you have [this example](https://www.mathworks.com/help/matlab/ref/scatter3.html#btr5_il-1) (which is not so obvious), but if you look above, you will see that you need to use scatter3(x,y,z,S,C) with S being the size of the marker, and C the color. If you don't want to change the sizes, just use [] scatter3(x,y,z,[],[]) An example: % just generate some data for the positions N = 101; z = linspace(0,1,N); y = sin(2*pi*z); x = cos(pi*z); % and some colors C = rand(1,N); % replace this one by your variable controlling the color figure scatter3(x,y,z, [], C) colorbar By default the color will not go from red to blue (or blue to red), you could change it with the colormap function (using 'jet' instead of 'parula') but the default colormap is better (see [this blog](https://blogs.mathworks.com/steve/2014/10/20/a-new-colormap-for-matlab-part-2-troubles-with-rainbows/) )
Exactly what I was getting at
Have you considered using Free, Libre and Open Source alternatives like Scilab - xcos / ScicosLab -scicos or Modelica based one like Open Modelica and Jmodelica? I have listed them [here](https://www.quora.com/What-are-some-good-alternatives-to-Simulink/answer/Foad-Sojoodi-Farimani?ch=10&amp;share=e5e814cc&amp;srid=iETG).
The first thing you need to figure out is [indexing](https://www.mathworks.com/help/matlab/math/array-indexing.html). The matrix `x` does not have a -20th element... that doesn't really make sense, right? You can see how the [colon operator](https://www.mathworks.com/help/matlab/ref/colon.html) creates vectors, which might help you pick the right values, or you could always [use find](https://www.mathworks.com/help/matlab/ref/find.html) to extract the proper indices. Second, you'll need to correct your syntax for [`quiver`](https://www.mathworks.com/help/matlab/ref/quiver.html). It looks like you're trying to use similar syntax to `plot`, but they don't work quite the same way. Fix those two things and you'll be back in business. Best of luck!
The only way you can do it right now is by writing a MATLAB Unit test class that will check to see if any new code adheres to a contract or now. There is one such contract test class that ships with MATLAB and checks that your class satisfies the "missing" contract: https://www.mathworks.com/help/matlab/ref/matlab.test.behavior.missing-class.html
you're right, I meant to write 'rows' instead of 'pairwise', i.e. corr(X,'rows','complete')
I recommend [project euler](https://projecteuler.net/). It has a ton of numerical programming tasks with increasing difficulty.
 [/u/trialofmiles](https://www.reddit.com/u/trialofmiles/) /u/neurone214, ignoring a nan (removing it), or replacing it with a zero produce two different results, namely because you are calculating your means with a different number of elements so each element is weighted differently. try it your self. Correlate the two vectors \[1; nan; 0\] and \[0; nan; 1\] without nans, and with zeros, for nans. You get two different results. Like I said, there is a difference between an observation of 0, vs, missing data. For this reason Matlab includes corr(X,'rows','complete'), which remove pairs of values from the correlation if they contain a nan. However, matlab's signal processing toolbox which includes the 2d cross correlation xcorr2 function, does not include an implementation which supports nans, this would entail doing the correlation calculation with smaller sub matrices to account for missing data and weighting it accordingly. I do already have an implementation that does this, however it is really slow, and was wondering if there was an accepted standard one out there. /u/FrickinLazerBeams your patronizing comments are less than helpful. Replacing nan's with 0's is not suitable solution in most cases, which is why matlab includes a suite of functions in most toolboxes specifically to deal with nan data points. Please keep your comments respectful and constructive.
Lol imagine finding basic math upsetting. I guess you know more than me. Glad you don't need my help.
Find a problem that can be solved computationally. Use Matlab to solve it.
If you're looking for MATLAB programs (i.e. code written in MATLAB) that address economics issues, you can [search the MathWorks File Exchange like this](https://www.mathworks.com/matlabcentral/fileexchange?q=economics). If you're looking for educational "programs" (i.e. courses related to economics) where you can address the issues yourself by writing your own MATLAB code, I'd suggest [MIT OpenCourseWare's Economics courses](https://ocw.mit.edu/courses/economics/). Hope that helps.
So sad how casually rude people are online. I would think on a forum for math software you could have some respectful discourse, but I guess this level of antagonistic communication is so pervasive it makes it way here. Too bad.
I heartily recommend the MATLAB [Cody Challenge](https://www.mathworks.com/matlabcentral/cody/problems?sort=&amp;term=group%3A%22Cody+Challenge%22). It will venture into quite a lot of territory you haven't covered, and teach you useful MATLAB skills. Keep [the documentation](https://www.mathworks.com/help/matlab/) handy!
There are some free, short courses made by MathWorks that have an interactive environment so you actually get to practice coding. The basic MATLAB one might be review for you, but there's one on Simulink and another about deep learning. You can find them here: [https://www.mathworks.com/services/training.html](https://www.mathworks.com/services/training.html)
Thank you! I will definitely be checking that out!
Thanks! I‚Äôll check that out!
I love Project Euler. As far as programming goes it's usually pretty easy. The brute force methods rarely work, which makes you think more mathematically.
You must be trolling. From talking about "averaging" in a cross-correlation to insisting that people are being rude to you, this is looking more and more like a troll.
You're welcome!
? variance, what correlation is built on etc, is dependent on the mean which is dependent on the number of elements in your calculation, which is why removing a nan is different than replacing it with 0. Maybe you're the one trolling, if so you got me
&gt;? variance, what correlation is built on *cross* correlation is not a variance (mean squares). This is why I asked you to write the mathematical expression you think you are taking about. It's not rude to suggest you might have a mathematical confusion, especially when it's now obvious that you do. On the other hand it's stunningly arrogant and rude to start getting angry at people for suggesting you might be misunderstanding something.
Amazing. Thank you!
You're most welcome!
I think most of us are end users who don't manage licenses for others, so your best bet is probably to reach out to MW sales and figure out what kind of licensing structure makes sense for your usage.
Take a look in GitHub, filter the search for Matlab code
From the xcorr2 doc, the result returned by this function is not normalized in anyway, it is the sum of the products of A and B as they slide over each other. So, it is not a mean in any sense. It‚Äôs a sum of products. So, zero is equivalent to ignoring except possibly for the case where you‚Äôd want an all NaN neighborhood to return NaN.
You're right, there is no normalization. The issue is that the shifting is different with and without 0 values. Take two matrices and cross correlate them. Try adding in random row's and col's of nans to them, turning the nans into 0's and doing the 2d cross correlation. You will get different results, as opposed to if you remove the nans. I don't know exactly how to deal with this. Maybe 'ignore' is misleading. The point is, I don't know whether I should 'ignore' or not when I have a nan value. Since 0 is a valid value in my data set, I can't simply replace empty bins in my matrix with 0's. I also can't interpolate empty bins since I don't have a regular function that matches my data to interpolate with.
Looking at the [GitHub repo](https://github.com/paul-kassebaum-mathworks/circularGraph) (since the File Exchange submission doesn't show the code), it seems like it's one of the input parameters gobbled up by `inputParser` in the first line of the `circularGraph` method in the class def. In lines 111-148, whether it's a diametric connection (113) or an arc (123), it seems to apply the color map values to the whole line (including the marker). From the comments on the File Exchange page: &gt; I designed the nodes and connecting lines as a single graphical object: a line() with a single marker. So, when you change the color of a node, you change the color of all the connections that come out of it. I figure you ought to be able to get it to work... It should be just as simple as passing the right color map in when you call it (somewhere in the `varargin`). Hope that helps!
You need to explicitly rewrite your program to take advantage of parallelism. Generally speaking in my experience you're far far FAR better off, once you're at that point, completely re-implementing your code in C/C++/fortran, and using openmp and MPI directly. The speed difference between matlab and the lower level compiled languages is a couple of orders of magnitude for most applications, assuming it's CPU throttled (if it's memory or IO constrained this may not be the case).
To use the matlab parallel server you would have to have the parallel computing toolbox. I'm not the best at explaining, but you would be able to set Parallel Menu&gt; Parallel preferences&gt; Default Cluster &gt;..... deafult is "&gt; Local" but you could set it to "&gt; Discovering Cluster" instead of local and then it would run your code on the MATLAB parallel server. From my understanding, you wouldn't have to change anything about your code. Reference: [https://www.mathworks.com/help/parallel-computing/scale-up-parfor-loops-to-cluster-and-cloud.html](https://www.mathworks.com/help/parallel-computing/scale-up-parfor-loops-to-cluster-and-cloud.html) &amp;#x200B; Are you already using parpool/parfor from the base pc toolbox?
I make good use of the Matlab parallel *toolbox* to run certain codes on my desktop with good success. Many computers now have at least 4 cores, but not all Matlab programs can take advantage of this without some adjustment. You'll use functions like parfor to do this. If you find that 4 cores is not enough, you could then find a more powerful computer to use as a "server," and run the code remotely on this. It's not strictly necessary to use the parallel server: you could just run Matlab on this more powerful machine, and run the programs there. It's important to point out though, that not all programs are well suited to parallel computation. For some programs, running in parallel will provide significant speedup (e.g. running on 4 cores instead of 1 would give 4x speed). For other kinds of programs though, there is little benefit to parallelizing. In general, the programs that are easiest to parallelize, are ones that have a loop which does not need to know the previous value of the loop, in order to calculate the next value. While you're experimenting with the parallel toolbox, you might find that the best approach for your problem is in fact computing on a GPU, which Matlab also supports. The ideal problems for GPU are ones which easily parallelize to multiple cores, and can be computed using single-precision arithmetic.
right, so the subtlety here is that the 'normalization' here is the number of elements you are summing each time you slide is the same for each cell in the output cross correlation matrix. replacing the nan's with 0's in the matrix disproportionately brings the values of those products which include nans, by treating them as if they are 0's when in fact you don't know. It 's the same as calculating the means of two sets, where the second set has less numbers than the first, by dividing the sum of each set by the number of elements in the first set (the same as arbitrarily adding 0's to the second set). The means are no longer proportional, apples to oranges. The correct way to deal with the nans would be something like slide a over b, ignore pairs in the dot products which contain a nan, and then scale up the product to the number of elements in the non-non dot product accordingly. Something like that. It is by no mean's trivial. Playing around with xcorr2, adding in rows and columns of nan's to matrices, changing them to 0's, then removing them and recalculating, will show you very quickly how the result changes.
That's why you ask for a budgetary quote so that the salesperson doesn't harass you when the quote expiry date approaches.
There are options for optimisation, usually that means that you will have to trade latency for speed. In the documentation, look for "optimisation" or "pipelining". The way to do it is different depending if you generate code from Simulink models or from MATLAB code (and I don't have any experience with MATLAB code, and only limited experience with hdl generation from Simulink) There are several way to do pipelining, going from the fully manual way (modifying your model or code to add unit delays) to the fully automated way (in Simulink, adaptive pipelining can do stuff for you by just turning on the option. But the success will depend on your model), and in the middle there are semi-automated methods (Distributed pipelining, setting the HDL block properties related to Input and Outputpipeline, ...) I would suggest to take a look at [this documentation page](https://www.mathworks.com/help/releases/R2019a/hdlcoder/speed-and-area-optimization-1.html) (for MATLAB code) or [this one](https://www.mathworks.com/help/releases/R2019a/hdlcoder/speed-optimization.html) (for Simulink), especially the "Topics" sections. Also, that's the kind of question you can ask Mathworks directly, I cannot promise you that it will work, but if you know your sales rep at Mathworks you may ask him/her to get a contact with an application engineer specialized in HDL Coder or with good knowledge of it to have a quick (or not so quick) discussion on the subject. Or if you know this kind of engineer already, ask him/her directly, that works too. You can also try to ask the technical support (but maybe this question is too generic for technical support)
By that logic, the borders of the result are also "changing" because in regions where A partially overlaps B, the portion of non-overlap is implictly 0.
Have you already profiled and optimized your code? Depending on your MATLAB and coding experience, I've found that there is almost always tons of room for speeding up code without going to parallelization. Things like vectorizing code, refactoring loops, using more efficient data structures, making sure you've removed unnecessary computations from within loops and precomputing data when possible. Make sure you've done all of those steps before going to parallel processing on a server.
Maybe start by giving concrete examples and code to see whether there are any things people here can help with? Other than that look up documentation of the functions and Google similar problems?
We won't do your homework for you but we will help... But we can't even help if you don't give us a sample question to work off of...
Have you tried basic debugging techniques? Run sections of your code line by line and see where the values differ from your expectations. Maybe even learn to do this using the debugger built in to Matlab. You can also try using simple, artificially constructed inputs for which there is little doubt of the expected result. Simple test cases are a good way to identify problems in your code.
Yeah I don't want anyone to do my homework. The problem is the questions are all in Italian and I could translate them, but the problem is another one. I need a way to study for this things because for now I only have the codes we did in class with basically no context and I need practice, guided practice (something were I can do an exercise and check the solution later like in math and most importantly the code). The things I'm doing now are basically data analysis and plotting. I have datasets with matrixes and what I have to do is calculate the average, the variance, the covariance and then plot them and extract conclusion from the graphs. That's as specific as I can go I'm afraid. Hopefully my translation from what I was thinking in Italian made sense. To sum it up I need a website or something like that were I can practice coding for things like the ones above.
I answered to the person who said he wouldn't do my homeworks. Read the reply there please.
Yes I tried but since I don't have the reference code and only have the final solution (the graph) I can't tell where the problem is because in theory there is none. Is just that the graphs are not the same they are similar but not identical.
 Is it stated they HAVE to be identical? If they are similar then you could draw the same conclusions, right?
Your explanation is okay. Matlab can do those things, easily. Just practice with the data set you have. Once you're done with that data set, maybe Google "practice datasets for statistical analysis in Matlab", which might yield some hits?
Well then this comes down to your ability to draw conclusions from the data available, or ask your teacher for help.
Thanks! I've been working on that section for a bit. I think if I can modify the mapping so that each line is its own object it should be able to accept a colormap from a matrix (as of now it's just determined by the length of said matrix). If I find a workable solution I'll post it here!
\[m n\] = sizeof(matrix); fprintf("The size of the matrix is %i by %i", m, n);
Generally there's no reason to use symbolic variables. They're for doing symbolic calculations. If you're looking for a numerical result, you want to do numerical calculations. Symbolic variables in Matlab are handy if you don't want or need (or aren't able) to fire up Mathematica for a quick symbolic operation. If I read this right, you have derived a PDE that you want to solve? There are various tools for that depending on the class of DE. Check the documentation. You're probably interested in `pdepe`. If you're looking for a closed form symbolic expression for the solution to this, I'd stick with Mathematica.
As the documentation for `fprintf` tells you, you can format a string with multiple values in it. Why would you not do that? Applying a single format string repeatedly to each element in your array (as you've done in your attempt) doesn't seem like it would work.
Nop, don't have the PDE... I have the PDE of a similar problem with slightly different constraints because I had to change the "physical system". I wanted to do it on Matlab to have a centralized simulation where I would be able to change geometrical parameters but it looks like that won't be possible... Thank you anyways!
I'm not sure why that wouldn't be possible. You can certainly write a tool to solve a PDE with adjustable constraints. What do you mean you don't "don't have the PDE... I have the PDE of a similar problem with slightly different constraints". So you alter your constraints and derive a new PDE, right? No software in the universe will help you to solve a PDE if you don't actually have the PDE you want to solve. Either you have a PDE or you don't.
You're most welcome. Best of luck!
Nope they must be identical unfortunately
I'm going to try and look for something similar
I might honestly just ask him at this point because I know the codes I wrote work.
From where do you get data from a SAR radar? Always wanted to try to work with that
Thanks
Thanks
Hey, just an FYI I see what you're saying. My guess is the best way to go about this is to find all pixels that are in the region of influence of a NaN and multiply them by a scaling factor. You'll have to do a little research to determine what that is. Essentially, let's assume your output is y_i = 1/n*(x1+x2+x3+...+x_n). Suppose your 2nd pixel is a NaN. By setting the value you zero, you'll get 1/n*(x1+0+x3+...x_n), and from what I gather you want this to instead be 1/(n-1)*(x1+x3+...+x_n). So--what you can simply do is perform the first operation (setting the pixel value to zero) and then multiply it by (n-1)/n and you'll get your 2nd result.
For clarity, when you put `%d` what it means is "insert a single value here. You are providing `size(matrix)`, which is two values (height and width), thus you need two `%d`s.
I'm not sure if this is what you're looking for, but you can map one vector to another fairly easily. Suppose you have your current clusters `old` and you want to map to your specified clusters `new`. Just make a map variable: old = [2 4 4 4 1 1 2 3 4 5]; map = [8 2 6 7 2]; % map 1-&gt;8, 2-&gt;2, 3-&gt;6, 4-&gt;7, 5-&gt;2 new = map(old);
Mit opencourseware just put up a new 2019 matlab course Go to dept&gt;mechanical eng&gt;matlab 2019 course
Do they filter the data in any way that you might do differently?
It's from my professor. I would like to share it but i don't think it would be ethical thing to do it without permission of the professor.
Well, first, if you are doing comparisons as part of an if statement, you should use ==, not =. I don't think that applies here, though, because you seem to want to do a string comparison. you can just use: `if strcmp(directory,folder1)` `do_stuff()` to figure out you value assignment. strcmp returns a logical value and works great in if statements. &amp;#x200B; As for figuring out which directory you are in, check out the pwd() command. Pwd stands for 'present working directory', and will return the full path to your current directory. You will need to get the name of the directory only, which can be done with strsplit as follows: &amp;#x200B; `directory_path = pwd();` `dsplit = strsplit(directroy_path);` `directory = dsplit{end};`
Is the file stored remotely or locally? I routinely have this problem when I am executing functions inside of folders that are part of automatically synched to remote storage like Box or Dropbox.
It's stored locally in my MATLAB file
Is the file corrupted maybe?
It seems alright. Nothing's been deleted either from the file path. The code seems to load the path but then throws the exception and refuses to load anything else
Are you sure you are in the right directory? You are declaring (not loading) a path, and then trying to load your model. If you try to do it the way you are doing it now, and you are not in the directory containing the model, it won't work.
It took a good amount of online searches and trial and error but I was able to solve it! For anyone looking for a solution, my fix is for both adjacency and correlation, which uses two matrices, but is modifiable for one Add a second input to the function call to include another matrix (ignore if only using one matrix) function this = circularGraph(adjacencyMatrix,correlationMatrix, varargin) After the line p = inputParser; Paste the following to convert your assembled array of correlation values into instance-ordered RGB values [row2,col2,v2] = find(correlationMatrix); %v2 will create Nx1 matrix of all correaltion values map = colormap(hot); %intialize colormap, change the color map scheme to one of your choice minv = min(v2(:)); %min max to establish bounds of colormap maxv = max(v2(:)); ncol = size(map,1); s = round(1+(ncol-1)*(v2-minv)/(maxv-minv)); %scale indicies for conversion rgb_image = ind2rgb(s,map); %convert scaled indicies to RGB, gives Nx1X3 matrix defaultColorMap = reshape(rgb_image, [length(v2) 3]); %reshape into Nx3 matrix Change current line 46 (will become line 54) addParameter(p,'ColorMap',defaultColorMap,@(colormap)length(colormap) == length(adjacencyMatrix)); to addParameter(p,'ColorMap',defaultColorMap,@(colormap)length(colormap) == length(defaultColorMap)); and current line 121 (will become line 130) 'Color', this.ColorMap(row(i),:),... to 'Color', defaultColorMap(i,:),... Hope this helps anyone!
Figured it out! Commented the solution
here is the output: https://imgur.com/YWt5tbX
That makes sense. I'm not sure how that's done so it is possible I did it whilst fiddling around with other code. Do you know how to change it back?
Yes, the current function is the IEEE one and rejects input with nans. And yes the edges of the cc matrix represent a partial correlation in proportion to the amount of the matrix you are correlating, so no scaling needed, unlike nans. As for what I want to happen, I described that in the comment above (scaling for nans) you must have missed it. I'm not trying to lecture anyone on math, but when I repeatedly state that replacing nans with 0's is not a valid option in this context, and you repeatedly make that same suggestion, all I can do is try to explain to you why a 0 and a Nan have a completely different semantic meaning. Maybe you don't have much experience working with partial datasets that contain nan values, which is fine, but you should know that replacing them with 0s is not typically considered good practice. Regardless finally someone in this thread arrived who actually does understand the issue. I guess a standard implementation for this function with nans isn't widely available in Matlab, which is all I wanted to know in the first place.
After you have defined your path in your code just type `cd(path);` (before you load your model). That will take care of it.
Finally someone in this thread who understands the issue! Thanks lol. Yes I have a version that essentially does this, but mine is slow (doesn't take into account all kinds of optimizations for cross correlation that the Matlab fn does) and I was also wondering if there was something standardized out there; it doesn't seem so which is really surprising. But yes this is a much better way of handling nans.
Neuro\_exo, thank you so much. &amp;#x200B; It partially worked, the problem is the pwd command. &amp;#x200B; I am currently working from my workingdir, the program goes to a folder called Solutions and then to one of three other folders (./Solutions/H\_0, ./Solutions/H\_25 or ./Solutions/H\_50). So the whole path for one folder would be ./WorkingDir/Solutions/H\_0. I am on Linux. &amp;#x200B; Ideally, I need for the condition to be, for example: if strcmp(directory,'./Solutions/H_0') vector value = 0 else if... But pwd just returns the workingdir, not the folder in which the files are actually stored. Is there any way around this? &amp;#x200B; Thanks again for you help.
Cheers for the advice but it didn't work unfortunately. I put it after the path like but before the mymodel line, and I tried it in the command window as well
I've methods views the path, it says no class /Users... can be located or no methods for class. Is it a Java issue?
If your program works the way you say it does, then the issue is not with pwd, it is with your path definitions. running pwd() inside any directory will return the full path to that directory. If your example is accurate, you are using a relative path for comparison. The code I gave you would be comparing 'H\_0' to './Solutions/H\_0'. There was an error in my code, when you use strsplit it should be `dsplit = strsplit(directory_path,'/')`, which will make directory 'H\_0' in the following line (assumming you are actually inside that directory). If I were you I would change './Solutions/H\_0' to just 'H\_0', or provide the full path (i.e. \~/path/to/your/workingdir/Solutions/H\_0) for comparison. Also, when you are doing a bunch of string comparisons, switch-case statements are generally better than if statements, it basically handles the strcmp() part for you.
OK, forget the cd() thing, that is most likely an issue with how your paths are defined on your individual OS. You would need to know the correct path on your own machine for that to work (I am assuming your username on you machine is not 'name' as it is defined in your path variable). &amp;#x200B; If you want to do it the easy way, Click on Environment-&gt;Layout-&gt;Current Folder. This will bring up a GUI that allows you to navigate through directories the way you would in the windows Finder application. Go to the directory where your model is saved, and try running again.
Hay, that did the trick. Thank you so much :)
Nice! It's a little heavy-handed, bashing `defaultColorMap` on the head like that, but if it works, it works. Honestly I can't blame you; the author even suggests to try using the newer built-in tools to solve the same problem now, and seems to have given up on any sort of maintenance years ago. You'll probably be a hero to someone looking for how to solve this same problem!
Thank you for letting me know it. let me check them what you are mention.
This is very cool. I'm not familiar with SAR specifically, but I am a computational imaging professional with a specialty in the optical frequency equivalent to SAR. Your final data looks to me like there is some kind of clipping or diffraction effect, and I wonder if it's related to the hard edges in your deconvolved data.
This is a tough problem. Is the data real or simulated? It looks simulated. Are you expecting impulse points in the final image? Dots? If so, your range compression does not look quite right. You should see much more defined lines form. Check your reference pulse (g). There is also appears to be curvature in the raw data. This is called range cell migration. This is a result of the distance between the sensor and the reflectors changing as the sensor moves. You need to correct for that before you do the final focusing. Keep going at it!
Errors (and pretty much everything else in life) makes more sense if you read *all* of the text, or at least all of the *red* text.
Yes! Curvature would exactly explain what I see.
The center of rotation is offset. Lobes always intersect corners of polygon. There is an extra lobe relative to the numbers of corners on the polygon.
This comment literally serves no purpose...why bother commenting?
It serves a very important purpose. It addresses the root cause of the problem you're having. It is an attempt not to fix the immediate symptoms of your difficulty, but to remove permanently the *cause*.
Did you define the variable 'state' before you called that line? My guess is that you didn't, so MATLAB is going through its paths looking for something (either a variable or a function) called state. There is a 'state' function within the Robotics Toolbox, so it thinks you are trying to call that function instead. I'm not familiar with what function you're using and what the expected 'state' is supposed to be. If it's just a vector, define it before you call that line.
Ah yes, I get it now. I'm supposed to define it as the initialiser of my model. Thank you, it works great :)
My best guess would be to correct the object name. Do you have some context? Because just like this, I cannot be more helpful. Usually you get two additional lines with this error, saying something like: &gt; Caused by: No block diagram 'foo' is loaded. or &gt; Caused by: No block called 'Mu ' could be found. You are running a get_param, a set_param (or a script that does something similar), which tries to change something in your model, related to a model or a block named 'Filter differentiator', but such model or block don't exist. You have either a typo in the name, or the model is not loaded. (on common typo in the name is when you have some line return in the name of the block in the Simulink model, but not in the script where you call set_param)
have you looked into Free, Libre and Open Source alternatives like Octave and Scilab? you could try Python as well. the syntax is not that different.
&gt;Python... the syntax is not that different. LOL Holy shit.
Python itself is quite a different language of course. but the libraries numpy and matplotlib were made with MATLAB syntax in mind. for someone with M experience they wouldn't seem that alien imho.
What do you mean "the names of the smaller arrays"
a, b and c are arrays themselves.
dlmwrite might work
&gt; Error using fprintf: Function is not defined for 'cell' inputs. The error message is crystal clear, but let's break it down: * [What is a cell array](https://www.mathworks.com/help/matlab/ref/cell.html)? Must be what you call a "{ } array". * [Can they be used in `fprintf`](https://www.mathworks.com/help/matlab/ref/fprintf.html#btf8xsy-1-A1An)? They're not in the list... so no. Don't feel bad, most newcomers struggle with cell arrays, though usually they know what they are and don't know how to index them (using curly braces). Your case is backwards, which is interesting. Anyway, this is how you print out what's stored in the cell array: for i = 1:3 myArray = input{1, i}; % extract character vector first fprintf('The array is %s.\n', myArray) % hooray, it works! end If you want to print the ***names*** of the variables (e.g. you want to see 'The array is a.', 'The array is b.', and so on), you'll need to store the names first. Once you store `a`, `b`, and `c` in the cell array, they're no longer individually named variables, they're elements of the cell array (e.g. `a` -&gt; `input{1}`). You could do it manually (PITA), or you can use [`who`](https://www.mathworks.com/help/matlab/ref/who.html) or [`whos`](https://www.mathworks.com/help/matlab/ref/whos.html#btngexw-1-variables) to list all variables in the workspace, and if you assign the result to its own variable, you'll end up with a cell array or a structure (with `name` field) for `who` and `whos`, respectively. If you can do that at the right time, you'll only have the variables you want, and not every single thing in the workspace. Either way is kind of clunky... not sure why you'd want to do it either, but there you go.
do you mean printing the variable names ? as in : i = 1 ; fprintf("The array is %s.\\n", input{1,i}) \&gt;&gt; 'The array is a' \&gt;&gt;
Have a look at [this post](https://blogs.mathworks.com/simulink/2011/03/29/invalid-simulink-object-name/) from "Guy on Simulink". There could be invisible characters.
one way to get the variable name [is to create a custom function (taken from stackoverflow) :](https://www.mathworks.com/matlabcentral/answers/382503-how-can-i-get-the-name-of-a-matlab-variable-as-a-string) function out = getVarName(var) out = inputname(1) ; end Now this wont work if you do this to let s say : getVarName( input{1} ) in order to retrive 'a'. because once you do input={ a b c} , the values inside of a, b, c are copied to the cells 1, 2, 3 of input, wich means that for example input{1} is not the variable a, but a copy of the values inside of a. So they are just numbers and there s no variable associated to them and there s no way of retrieving the variable name from where the values were copied from. but there s other alternatives if you want to keep a name and a value together
Sorry for the delay - did you find a solution for this?
One way to keep and a value together is to use whats called containers.Map it will index an array with wathever you want (like , 'apples', '1', 'bees') instead of the classic numbers (like 1, 2, 3) for example do : \&gt;&gt; input = containers.Map ; then assign a name to a value \&gt;&gt; input('a') = a ; to access this value do : \&gt;&gt; input('a') sorry for the 3 parts answer, I was on the go
What I think you're trying to say is actually a very valid point, but it's about semantics, not syntax, which is a pretty major distinction when it comes to programming language design.
FYI, you can use `dir` to get a list of local folders: result = dir; dir_locs = [result.isdir]; folder_names = {result(dir_locs).name};
Follow up to my comment. Change both instances of (line 121 and 144) 'Color', this.ColorMap(row(i),:),... to 'Color', defaultColorMap(i,:),...
Use (https://www.mathworks.com/help/matlab/ref/inputdlg.html)[inputdialogue] to allow the user to input the string then use a combination of (https://www.mathworks.com/help/matlab/ref/find.html)[find] and (https://www.mathworks.com/help/matlab/ref/strcmp.html)[strcmp] to identify the row index containing the desired value.
It worked! Thank you.
If you're using Unix (and don't care about doing this in Matlab): `cat *mat &gt; concatenated.mat`
contains may also be of use.
How does this treat variables within the .mat file? For instance, if I have a variable or struct in each file called "A," and I cat these all together, does Matlab interpret this as an array of A? What if A is a variable in one file and a struct in another?
I have no idea; that's something to try out. OP just wanted to concatenate some .mat files, no mention of what they want to do with the concatenated file.
this is the script I am currently using: Blocks=dir(fullfile('/home//Documents/Project\_Folder/','\*mat')); x=\[\]; for i=1:length(Blocks) x=\[x; load(Blocks(i).name)\]; end &amp;#x200B; b=\[\]; for j=1:length(x) b=\[b; x(j, 1).variable1\]; end data = cat(1,x,b); save('random.mat'); &amp;#x200B; it loads in the Blocks but it does not run the first for loop, any idea why?
I'm a little confused by what you're doing with that first loop. load is a function, and it seems like you're repeatedly calling it and trying to append the result to an empty array?
yeah not sure if i did it properly but I use blocks to find all the 10 .mat files, then use the for loop to go and load each one, then use cat to combine all of them. does the logic work, and if so what would a sample script look like if i did that. I would really appreciate it if the script isn't enormous, but i don't think it should be
I would make a function that takes two inputs: the row be the current function call is at (should start at 1 and increment in each call), and the number of rows you want to print (which is also the width of the pyramid). There would be the exit condition like you mentioned, but it would check if the current row equals the height of the pyramid before exiting. In each function call, you'd have the same code you use to do this iteratively. The only difference is that the function needs to increment the row variable by 1 before calling itself again. Hopefully this is more helpful than confusing lol
Thank you very much for your help! I wasn't aware of the C variable and was having trouble implementing it at first, but I think I got the hang of it now. I verified that it looks good on the 2D plot and am tweaking it a little bit for the 3D plot currently. I really appreciate your help!
You can do a function that takes just a matrix as input. Prime the matrix to be the right size (e.g. 5 rows in height) and mark the apex. For instance, for five rows you make a matrix with five rows and 9 column with the middle of first row being one. Your recursive function will take in the matrix and check its height (or you can give it as input, does not matter). Then it will find all ones in the matrix and save indices for each slot below each one, here is where you need to use the height of the matrix. So bottom left, right below the one, and bottom right. Next you'll check if the numbers make sense (nothing outside of bounds of the matrix) and if everything is OK then you fill the slots. Lastly you'll call the function again with the *new* filled matrix as input. There is a lot of redundant "filling" but it'll work. I did make a simple script using this method so if you need more help just ask away.
This reads very similar to [Hidden Markov Chains/Models](https://web.stanford.edu/~jurafsky/slp3/A.pdf) and their use of the [Viterbi algorithm](https://en.wikipedia.org/wiki/Viterbi_algorithm) for computing log-likelihoods of sequences. If you have the proper toolbox Matlab has [their own HMM functions](https://www.mathworks.com/help/stats/hidden-markov-models-hmm.html) to support your efforts. However, you could write your own similar to the concepts you have already worked out. Although it is unclear what you need to speed up as either way you are using your input text string to draw the correct probabilities which then get multiplied together. That task can be done in parallel, but the overhead associated with it might not save sufficient time. Remap the characters to indexes with a function. Call it to convert the text to an index over which you iterate resolve the probabilities and repeat as needed. You most likely would want to do the processing of the input text in parallel for a parfor loop.
I have no idea about whether is it simulated or real. I don't know what to expect honestly, as you said if lines would be more defined, I could get impulses in the final image. Yet, i don't know. I was doing simulation before where I can create targets in 3d grid. I don't know what reflectors mean tho. I need to study what that means in the terminology. Let me give you more hint about the data, on top of the raw sar image. I have following parameters: &amp;#x200B; ***D\_raw*****= raw data before matched filtering.** ***D\_raw*****is provided as function of fast time,** ***t*****, and sensor position,** ***xa*****.** ***t*****=** **fast time in seconds** ***xa*****=** **sensor positions in meters** ***f0*****=** **carrier frequency in Hz** ***g*****=** **transmitted waveform** ***rg\_min*****= minimum range where targets are present** ***rg\_max*****= maximum range where targets are present** ***xg\_min*****= minimum azimuth where targets are present** ***xg\_max*****= maximum azimuth where targets are present** ***pho\_r*****= range resolution in meters** ***pho\_x*****=** **azimuth resolution in meters** &amp;#x200B; I get antenna aperture from these data and then maximum trajectory length to obtain the number of FFT points in Fourier transform
Thank you! It took me couple of minutes to understand your answer tho :).
The R in SAR is RADAR. So reflectors is anything the transmitted waveform reflects off of in the scene. &amp;#x200B; The transmitted waveform g is a linear chirp which is typical for SAR. Did you compute it or was it given? In your #2 in the original post, I think the fft and fftshift should be done with dim = 2, not 1. maybe?
Oh different jargon.(Sorry for late responses btw, i guess we are in different time zones.) Transmitted waveform(g) is also given in the dataset. For taking the fft in rows, i already tried it but it gives an awkward result. Honestly i feel like I hit the wall. :)
Try to determine the Euclidian distance between the two points and use if statements to calculate the price from there.
Who the hell is downvoting me !?
Implement this formula to get angular separation of your two points: https://www.google.com/url?sa=t&amp;source=web&amp;rct=j&amp;url=https://en.m.wikipedia.org/wiki/Great-circle_distance&amp;ved=2ahUKEwjcyLmQ4cXjAhXOiFwKHZZyAL8QFjAQegQIAhAB&amp;usg=AOvVaw1Plt9SmE-NUz_IlVMMGzry Then use arc length formula to get distance
Desktop link: https://en.wikipedia.org/wiki/Great-circle_distance *** ^^/r/HelperBot_ ^^Downvote ^^to ^^remove. ^^Counter: ^^269596. [^^Found ^^a ^^bug?](https://reddit.com/message/compose/?to=swim1929&amp;subject=Bug&amp;message=https://reddit.com/r/matlab/comments/cfx4j1/can_you_help_me_with_this/eud65xx/)
Okay I understood but can't correlate with the formulas at my question
You shouldn't need to. The formula for delta sigma in that link only relies on latitude and longitude (your inputs). Code up that formula. Then use d = 2* pi * r * (delta sigma/360) to find arclngth Then you need some if statements to handle whether it's going North/South or East/West to calculate additional costs (here you can test whether the change in latitude and change in longitude are positive or negative to determine this) Does that help?
How will I calculate delta sigma? Consider v1 is [lat long] then v2 are created. And what about the thing I did making the angles between 0-180 rather than -90 to 90. Lecturer advised to start with this but why? Do I need to?
v1 lat will be phi1 and v1 long will be lambda1 in that link
This is obviously a homework type problem. You‚Äôve posted minimal effort to solve the problem yourself and have asked an incredibly open ended question that basically amounts to ‚Äúplease solve the problem for me‚Äù rather than ‚ÄúI am stuck with this specific issue‚Äù. /r/MATLAB‚Äôs rules specifically state this is not a place to get your homework done for you.
But this was just one of the classworks we couldn't done at school coz time was up. It's just a 0.75 point out of 100. It is not like a homework at all. I'm just asking about the part how I can calculate the distance I was lost there I can do the other parts.
I think you might need to replace stritodouble with str2double.
I see syntax errors : line 3 &amp; line 4 -&gt; it's str2double not strtodouble line 6 -&gt; in MATLAB, lograrithm n√©p√©rien function is log and not ln declaration error : line 8 -&gt; variable 't' isn t declared Index error : line 9 -&gt; arrays starts at 1 in MATLAB and not at 0, and is P really an array if you are taken it from an edit ? &amp;#x200B; error using functions : line 11 &amp; line 12-&gt;[dsolve &amp; solve works with and equation](https://www.mathworks.com/help/symbolic/solve.html) as in you have to use [symbolic variables with syms](https://www.mathworks.com/help/symbolic/syms.html) and not simple variables, example if you want to solve x, y for sin(x) = 1 2\*x = y you would have to write it like this : &amp;#x200B; &amp;#x200B; % simbolic variables x and y , wich also means they exists but dont have a value yet syms x y % that s how you write your equations so MATLAB understands eq1= sin(x) == 1; eq2 = 2\*x == y % solxy will be an array with the value of \[x y\], you may have to use double () in order to % have an exact solution solxy = solve(\[eq1 eq2\],\[x y\])
Are you sure that's the formula for arclength it seems too simple? There is no such formula in the link?
That was a question for the class dot product cross product etc. I need to do the way the lecturer asks. Did you get what he asks? Why I make the angles between 0 360?
I just need to calculate the shortest distance I can do the other parts. Considering I got the input lat1 long1 and lat2 long2 into two vectors. How can I calculate the shortest distance? Is it also hard for you or you are trying to make me do it?
Trying to make you do it. The formula is in that link. Should just be a one liner.
These are the standard domains for spherical coordinates. I would expect that, due to spherical symmetry, it won't make a difference but might be wrong. Once you get your program up and running you can try removing this step to check you still get the same result.
I won't be able to figure it out it seems and I don't have much time to upload it. Can you write it if it's a one liner So that I can check it out? And I'm a math minor student Do you think it's weird for me not to be able to get it? How do you know it?
If I write it out it will be identical to what's on the Wikipedia page.
Okay I got it now. But in the link d=r*deltasigma whereas in yours its 2.pi.r deltasigma/360 . Yours is right imo. How do I find delatsigma?
Yes because they're using radians and you're using degrees. Won't matter which way around you calculate delta lambda since cosine is an even function.
Right. Thanks for your help. May I ask if what is your profession?
Hey, I enrolled myself into the same course just a couple of days ago and I have 2 solutions that worked for me. Check out the simple code below. The output for debt using both the solutions yields 1200. This is the correct debt value and have passed the assignment with both these solutions. Note the value for rate of interest in both the formulas below. Hope this helps! &amp;#x200B; **Solution 1:** *(Using Compound Interest Formula)* principal = 1000; rate\_of\_interest = 0.1; n = 1; time\_period = 2; debt = principal\*(1+(rate\_of\_interest/n))\^(n\*time\_period) &amp;#x200B; **Solution 2:** *(Using Simple Interest Formula)* principal = 1000; rate\_of\_interest = 10; n = 2; time\_period = n-1; simple\_interest = (principal \* rate\_of\_interest \* time\_period)/100 amount = principal + simple\_interest principal = amount; simple\_interest = (principal \* rate\_of\_interest \* time\_period)/100 debt = principal + simple\_interest
It means what it says: Variable "afl" is not a data type that supports dot operations. Your next step should be figuring out what class "afl" actually is versus what you think it is. Start with "class(afl)".
Thanks, that was a good shout. I did it and it said it is undefined, but didn't I define it in the line above
Your final paragraph is pretty much what I was doing already except I was doing it inside one big for loop in my script. Is there any computational benefit to doing it inside a function besides cleaning up the code in my script?
There is likely no computational benefit, but I am under the impression it is best practice to procrastinate as a programmer. When something needs to happen write a function in your main program/script. Then break it down into smaller components later. This makes it easier to (a) write, (b) debug, (c), maintain, and (d) understand when you decide not to write any comments. Option (e) is that you can then spin out useful functions into their own files and have them around for other tasks.
It prevents your program from changing data type. But I've only seen this in C and C++ programing.
In some languages it defines the variable as a float instead of integer. Inputting just 1 can sometimes result in the variable being classified as an integer and causing problems.
In MATLAB numbers are always floats unless you specifically use one of the integer conversion functions. Also, I don't think `1.` would be an integer even in other languages where `1.0` isn't. `1` might, but not `1.`.
There isn't one. There also isn't a difference with `1`, all numbers default to floats in MATLAB.
I think that is the case for `1`, but as far as I can tell `1.` is still a float in C.
Doubles to be precise.
MATLAB forgives by setting everything to a double, FORTRAN will scream the house down however.
Can you comment the lines in the script that are printing to your command window?
Interesting. I‚Äôve never seen that. They say it‚Äôs for signal processing, but honestly, that‚Äôs a terrible way for them to implement that. If you want to get a vector from 10^x1 to 10^pi, you can do logspace(x1, pi+2*eps). Or if you need to do it often, create a variable pi_=pi+2*eps or something. It‚Äôs a pretty hacky way to do it, but it works.
because that is how the function works (from the Matlab documentation): &gt;y = logspace([a](https://localhost:31515/static/help/matlab/ref/logspace.html?snc=XFMAFV&amp;container=jshelpbrowser#f89-998709-a),pi) generates points between 10\^a and pi, which is useful in digital signal processing for creating logarithmically spaced frequencies in the interval \[10\^a,pi\]. you try assigning 3.1416 to a variable and use that one in the logspace function, though you will lose some accuracy.
Sorry for only getting back at you now, I just tried what you said and it worked a charm, thank you so much! I still had a working mex function and simply read off the full options just like you recommended. The only change I made was to add a few .lib files to the linker dependencies, I guess that did the trick. Serious thanks for taking the time :)
&gt;That is a good way to get around this. I did not know about eps before, and I am still trying to wrap my head around it. &gt; &gt;It is interesting that logspace(x1,pi+eps,n) also behaves the same way as logspace(x1,pi,n), but behaves differently with pi+2\*eps.
Yes, I was considering using an approximation of pi to whatever number of decimal places matlab would allow to get around this.
Unfortunately not as it is coming from the .exe file which I cannot open (it is provided by a supplier and locked for viewing/ editing)..
Due to how weird the syntax works, I usually use linspace instead of logspace and stick a 10.^ in front to get the same behavior.
I think they are doing a comparison behind the scenes like if abs(x2-pi)&lt;eps which is is pretty common for comparisons on floating-point numbers (because you can‚Äôt just say x2==pi).
Neuro_exo, thanks again. Sorry for the late response. UNfortunatelly what's going on is that when I use your code, it returns me "~/path/to/my/workingdir/" and not "~/path/to/my/workingdir/H_0". As I said, I am running the code from workingdir and it is reading folders inside it. Anyway, I found out that even if I make this work subsequent parts of the code won't. When I simply forced all values to be zero I got interpolation issues due to NaN's. I am trying to figure my way through this now. Thanks again for your help.
Thank you for this, I will try to use it as well when the other issues are solved.
Still perfecting this! New change Replace the line that says [row2,col2,v2] = find(correlationMatrix); %v2 will create Nx1 matrix of all correaltion values with diag = tril(correlationMatrix); for n = 1:size(diag,1) v2(n,1) = max(diag(n,:)); end
If you don't need to see the outputs in real-time, could you export the outputs to a text file using "diary" and filter them afterwards? Otherwise, would it be possible to pipe the outputs of your executable through "findstr"? You can use the /v command to ignore anything that matches a certain pattern. This worked for me: system('test.bat | findstr /v "Proc *"') https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/findstr
If you don't need to see the outputs in real-time, could you export the outputs to a text file using "diary" and filter them afterwards? Otherwise, would it be possible to pipe the outputs of your executable through "findstr"? You can use the /v command to ignore anything that matches a certain pattern. This worked for me: system('test.bat | findstr /v "Proc *"') https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/findstr
MATLAB told you what the problem was. Factorial is only defined for positive numbers, and factorial(365-x) contains elements which are negative.
&gt; is there any way to plot a factorial function in matlab? Yes. First, [the documentation for `factorial`](https://www.mathworks.com/help/matlab/ref/factorial.html), so that we have the same reference material. Second, your error message: &gt; Error using factorial (line 20) N must be an array of real non-negative integers On line 20, you're giving either complex values, non-integers, or negative numbers as inputs to your call to `factorial`. If the second line of code you gave is line 20, then the second case is the culprit. `x` is chock-full of non-integer values; in fact only 2 values of the 100 given are integers, namely 0 and 100. This is due to [how `linspace` creates vectors](https://www.mathworks.com/help/matlab/ref/linspace.html) with the syntax you used. If you want to have 101 integer values between 0 and 100 inclusive, you'll need to use the second syntax and provide a number of elements; alternatively you can create the vector using the original syntax with values between 1 and 100 or 0 and 99 if that suits your problem. A totally distinct alternative would be to use [the colon operator](https://www.mathworks.com/help/matlab/ref/colon.html) to define a range of integers (e.g. `x = 0:100;`). Finally, to plot the values you can use [the `plot` function](https://www.mathworks.com/help/matlab/ref/plot.html), and either give `x` and `y` as inputs, or use `y` alone for an indexed plot (i.e. with x-axis values numbered 1 - 100 or 1 - 101 depending your selection above). You could also use the `factorial` function directly in the call to `plot`, but I'd suggest saving that for after you sort out the initial problems. Hope that helps.
I had kind of the same situation but I did a really great course on coursera which helped me with building my knowledge from the start. After that I felt a lot more confident in Matlab and I enjoy it so much more now. https://www.coursera.org/learn/matlab
Thank you for your help! I have one last problem tho, i'm surely doing something wrong but i can't find a way to make even this simple function work: `&gt;&gt; x = (0:120);` `&gt;&gt; y = factorial(x)` &amp;#x200B; `y =` &amp;#x200B; `1.0e+198 *` &amp;#x200B; `Columns 1 through 12` &amp;#x200B; `0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000` &amp;#x200B; `Columns 13 through 24` &amp;#x200B; `0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000` &amp;#x200B; `Columns 25 through 36` &amp;#x200B; `0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000` &amp;#x200B; `Columns 37 through 48` &amp;#x200B; `0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000` &amp;#x200B; `Columns 49 through 60` &amp;#x200B; `0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000` &amp;#x200B; `Columns 61 through 72` &amp;#x200B; `0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000` &amp;#x200B; `Columns 73 through 84` &amp;#x200B; `0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000` &amp;#x200B; `Columns 85 through 96` &amp;#x200B; `0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000` &amp;#x200B; `Columns 97 through 108` &amp;#x200B; `0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000` &amp;#x200B; `Columns 109 through 120` &amp;#x200B; `0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0005 0.0557` &amp;#x200B; `Column 121` &amp;#x200B; `6.6895`
looks like you have a `.` where you're supposed to have a `-` in the file names
You say it works with 1 value of Ta, what happens if you try two or three (i.e. just use Ta = \[.1; .3; .4\] or something reasonable for your model)
I get an error "Error using Thermal\_Single (line 3) Dimensions of arrays being concatenated are not consistent"
What do you mean by step over?
I.e. solve each row one at a time.
I have thousands of data points I need to run calculations on, in this excel sheet I am only using data for 1 day to try to get it to run.
 function y = logspace(d1, d2, n) if nargin == 2 n = 50; end if d2 == pi || d2 == single(pi) d2 = log10(d2); end y = 10 .^ linspace(d1, d2, n);
glad I could help :)
Why do you believe it's not working? Looks fine to me... though displaying numbers across that great a range in a text format is... less than ideal. ;) Try testing individual values at the command line (e.g. `y(1)` or `y(22)`). Better yet, open the Variable Browser (by double-clicking `y` in the Workspace) and verify the numbers that way. Cheers. --- In anticipation of your next question, check out the [`semilogy` function](https://www.mathworks.com/help/matlab/ref/semilogy.html).
this actually cleared all of my problems, thanks! ;)
One last question i promise, since the function i want to plot exceeds tha saturation value of the factorial function, which is factorial(170), is there a way to extend it?
You're most welcome.
By definition, of course. The factorial of 171 is, as you might guess, `171*factorial(170)`. Easy, right? The problem is that the number is actually too large to fit into a double-precision floating point variable in your computer's memory. Since all the integer types have a smaller upper bound, you're out of luck if you want to store values larger than that. If you don't mind losing precision (and not being able to display the number as an integer anymore), you can start scaling and implement your own "factorial" for numbers greater than 170, but it's not going to be perfect.
I understand, I guess I'll have to find a way to write it differently. Thank again you for your help!
You're welcome. Best of luck!
make sure processMNISTdata is the name of the function, and not just the file name
But those file names don't exist?
This is a shit in the dark but is it possible there's a line in one of your excel rows (in your 8th column) that has a string character, rather than a number? Maybe a title that somehow ended up in the middle of the file?
nope, its all numbers
I‚Äôve had to analyze several million data points from a few dozen excel files in the past. What I did was I cleaned all the non numerical data from the files (delete column and row names), ensuring all columns on all sheets held the same data types. Then I made sure I only had one sheet per excel file. Then I saved all .csv format. I didn‚Äôt seem to have any issues after that.
Not sure if this is what you want, but hopefully it helps. It has been a while since I set it up, but I think I used [this](https://www.mathworks.com/matlabcentral/answers/406956-does-matlab-support-high-dpi-screens-on-linux) site to get the GUI to display correctly. From memory, the help browser uses a different display point, so it still doesn't display correctly.
Others have pointed out the root cause. As far as how one could figure this out (other than proofreading your code), you can get pretty far by just setting a breakpoint before the line mentioned in the error message and inspecting the relevant variables.
Thanks
Look into [clock](https://www.mathworks.com/help/matlab/ref/clock.html). You can use this to generate your unique date and time.
This is maybe not the best way, but it works. If your table is stored as T: A = strcat(datestr(datetime),'.csv') A = A(A ~= ' '); A = A(A ~= ':'); writetable(T,A);
Yes! That worked perfectly, thank you so much!
The solution posted by synchh works, but I thought maybe it could be made a bit more aesthetically pleasing. In particular, the function `datestr` has all the necessary to format the date and time in a specific string format that you can input as a second argument. For example: &gt;&gt; datestr(now,'mmDDYYYY-HH:MM') ans = '07232019-15:56' &gt;&gt; datestr(now,'YYYY-mm-DD_HH-MM-SS') ans = '2019-07-23_15-57-42' and so on... You can find the Identifier for all the symbols in the reference page of the function [here](https://it.mathworks.com/help/matlab/ref/datestr.html?s_tid=doc_ta) If you use this option you just need to append the string '.csv' at the end of the filename and you're set, making the code shorter and more readable. as in: filename = strcat(datestr(now,'mmDDYYYY-HHMM') , '.csv'); writetable(T,filename);