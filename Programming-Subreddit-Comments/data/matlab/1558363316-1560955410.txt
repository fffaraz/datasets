Yes, for every time step in the simulation we get those values. In our old C implementation we did had an array of segments where we iterated through: void extractSegmentData(tFSpaceSensor \*sensor, ...) { &amp;#x200B; \[..\] &amp;#x200B; for (int j = 0; j &lt; sensor-&gt;numTotalSegments; j++) { tSegment \*current\_segment = &amp;sensor-&gt;Segm\[j\]; &amp;#x200B; ... do some stuff with \*current\_segment } }
The max command can give you the value and index of the maximum value in a vector, then you can do your two conversions along the lines of new=old(1:i)\*a and new=old(i+1:end)\*b.
Ooh that's a good idea, thanks!
The output of the ToWorkspace is a matrix with [timestep, var] I'm not sure, but I believe you can have a matrix of [timestep, var1, var2, ...] And then you post process everything in workspace.
If you have an exact value to look for, you can also use logical idexing. `M==i` will give you an array of 0 and 1 (or true and false), for the elementwise comparison. E.g., `M=[1 2 3 4];` `a=M==3;` a =[0 0 1 0];`
It's not, unfortunately. I'm just looking for whatever the peak is in this column, but the exact number (and how many lines are before/after it) changes each time.
`index(max(M))` or something like that, should give you the position of the maximum value. Or, I'm not sure if it's possible, but I think you can do `[a, b]=max(M)`, where `a` is the maximum value and `b` is it's index. I'm on mobile, so didn't check it.
You shouldn't need a loop to construct D. Try looking into comparison operators, and maybe meshgrid. You can make range vectors using the (a:b) syntax.
My idea for a ‚Äúfolded‚Äù delta robot for either 3D printing or something similar. Next step might be to add a gimbal joint at the center plate and a 2. Set of arms ‚Äúunfolded‚Äù thereby getting two pivoting points in 3D space with a fixed distance between them and have a spindle motor between them. A diy approach to a 5 axis milling machine. Comments are welcomed
Computer Algebra Systems are, in essence, just applying a library of algebraic substitutions to alter an input expression to an equivalent output that satisfies some particular criteria. These criteria can be things like "one side of an equality is the variable x and nothing else" (equation solving), or "the expression length is minimized" (simplification). Obviously this is an oversimplification - they are pretty impressive tools and making them work well took a lot of very impressive work from some top tier mathematicians - but basically they're applying the rules of symbol manipulation to achieve a result. They don't really "understand" the expression in any way.
File: [https://github.com/aansari2/Free-Return-Trajectory/blob/master/FreeReturn.m](https://github.com/aansari2/Free-Return-Trajectory/blob/master/FreeReturn.m)
this is actually pretty impressive. well done.
The problem is that MATLAB Coder is expecting your custom struct definttion to use an emxArray for the two struct members. emxArray is an implementation of a dynamic matrix. The reason this is happening is because the size of the matricies in the struct depends on the input argument, L. If they are static, (eg remove the L argument and replace the callsites to be 50, everything works as expected. You can't have a general function for any input size here, because the struct definition itself changes, which is not possible in C without a dynamic matrix
When I follow the steps at https://www.mathworks.com/help/coder/ug/use-a-c-dynamic-library-in-microsoft-visual-studio-project.html to run the code in Visual Studio, it says "cannot open source file "addstruct.h": no such file or directory", even though I added the directory containing it, as mentioned in that link. I didn't get that error when I followed that link and ran Matlab-generated C Code in Visual Studio that didn't involve structures
Sorry, I don't know anything about visual studio.
My final calculation; have I made a mistake with this code and it should equal 44 or it's right and it should be 43?
When I add `main.c` to Visual Studio: #include "calladdstruct.h" #include "calladdstruct_initialize.h" #include "calladdstruct_terminate.h" #include &lt;stdio.h&gt; int main() { double S; double xarr[3]={1,2,3}; double yarr[3]={1,2,3}; calladdstruct_initialize(); S = calladdstruct(xarr, yarr); printf("%f\n", S); calladdstruct_terminate(); getchar(); return 0; } I get the error Exception Thrown at (calladdstruct.dll) in calladdstruct.exe: Access violation writing location
Have you tried choosing 5 of your images that you know are next to each other and see if they can be stitched? Also were the images taken from the same position using the same zoom level?
Yes, the max I can match are 4 , the only other option is the try and manually stitch them. So try and find pairs, threes, fours and then try. Yes the images by the looks of it are all from the same position
what if you stitch some, and then stitch the stitches, can that be done? Also are they next to each other horizontally only or also vertically?
That was my idea after the code didn't work originally, so I made about 5/6 groups and used the code to save them. Then tried run the code again but with the grouped images - however, it gave a strange output and obviously didn't work. The images are both horizontal and vertical, maybe that's why it isn't working as the original code images are all horizontal.
maybe you could do the each horizontal plane by itself, and the flip the planes 90 degrees, and do the horizontally stitched ones vertically (which is now horizontal because of the flip)
Seems like you're writing off the end of an array somewhere. Try to use breakpoints to find which line it is
Just to clarify: are you looking to record in four-second "chunks" of time (run simulation for four seconds), or are you looking to record outputs at 1/4 Hz?
MATLAB comes with sample data sets that accompany examples. I recommend looking at examples for toolboxes that you are particularly interested in. We often recommend users start with examples. &amp;#x200B; Start with the [Signal Processing Toolbox examples](https://www.mathworks.com/products/signal/code-examples.html) and [videos](https://www.mathworks.com/products/signal/videos.html). &amp;#x200B; Good luck!
You, sir, are a very good egg! I love me a bit of simulink!
Thanks! To be clear: I'm not implying there is any rivalry between the MATLAB and Simulink teams. Simulink runs on top of MATLAB, after all. I was just saying "Don't ask me any tough questions on this topic, please."
My aim is going to be today to try and stitch each horizontal row, then try and stitch each horizontal row (hopefully). The code I am using should I make it for each row? So like function stichRow1, stitchRow2, stitchRow3, and then finalStitch? Would that work
Check out the [Wikipedia article on MuPAD](https://en.wikipedia.org/wiki/MuPAD) as a starter. You can also [look here](https://www.mathworks.com/discovery/mupad.html).
Hello from a former MathWorker! The Compiler SDK for Python is pretty cool and proving useful lately. I never got into this side of things when I worked there.
I'm not sure if finalstitch would work here if the code expect the images to be next to each other side by side (instead of top to bottom). That's why I suggested rotating each stichRow1, stitchRow2, etc, by 90 degrees. See fx rot90 function. In that way the final stitching would also be of images side by side, and then you can just rotate the final result back by 90 deg.
I had no idea this existed! Very cool! I was just going back and forth on doing a simulation in python vs matlab. This will make that transition easier. Also, loading up a matlab engine (from python) is super fast. The only gotcha is going between data types. The matlab engine expects (naturally) everything in matlab arrays. So x = matlab.double([1,4,8]) y = matlab.randi(eng.randi( matlab.int8([0,1]), 3, 1) eng.plot(x,y, 'rs') all works in python after import matlab.engine eng = matlab.engine.start_matlab() Very cool!
It looks like your matlab install directory is mapped to the root of a drive. Can you try checking it to be at least one subfolder of the root of the drive?
Even trying to stitch the rows isnt't working. Do not know what to do.
Are you sure there's overlap between images, and no gap?
100% matched features between images as I've used the registration estimator app and gone through every image combination. Nearly all have at least 20 matched features with one or more images, except 2 which have less than 20 matched features with at least one or more. For the bottom row you can clearly see they overlap as there's a railing in all 4 which is clearly overlapping. [https://imgur.com/a/bZynqmF](https://imgur.com/a/bZynqmF)
I did use breakpoints. VS still wouldn't let me determine where it occurred as it just went to `Exception Thrown`
The weird thing is I don‚Äôt have an E: drive at all so I‚Äôm confused as to why it‚Äôs coming up with this error. My Matlab install is on my C drive
Can you try another model and see if it works
Same error. It works if I deploy to hardware but get the same error trying to use external mode again
What is the result of typing matlabroot
Just left work, I‚Äôll try this first thing and reply. Thanks for the help!
Hmm, I'm pretty much out of suggestions. Do the images need to be in order (left to right), and if so, are you sure they are provided in the right order?
They are provided in random order. Here's a link to the order they're given https://imgur.com/a/bZynqmF . What the original code should do it find the centre image and then build from there. The other option is finding an image with the highest matches and stitching it, then finding the next with the most matches and stitching - but not sure how to go about that option
I don't know, but it would reduce the complexity of the problem if the provided from the start. At least in the example you link to, they seem to be provided in order (from left to right). Which kind of makes sense, since that how you normally take a panoramic series of images.
Yeah that would make sense but then there'd be no point in the code finding the centre image. I don't even know what my next step is now. I could try reduce the images, manually match one image with another but then trying to then match them together results in nothing
&gt;I'm not exactly sure what your question is, but there are a number of ways Matlab can do this. If you want a very accurate solution, the new (ish) PDE Toolbox can do a finite element solution for you, I think (although I haven't had a chance to use it yet). &gt; &gt;If you can do some hand calculations to come up with an ODE describing the problem you can use one of the built-in ODE solvers, like ode45. &gt; &gt;Either way, I'd suggest you start by reading the documentation on anything that seems relevant.
In fact some years ago this was the situation but then mathworks changed it for some reason.
For each function tree you generate code for, you will get many files. If you are translating a large project, is there a single entry point function you have? If so, if you do codegen on that, you will still get multiple files, but it will contain the entire project. This doc page might be helpful for controlling the files generated: https://www.mathworks.com/help/coder/ug/how-matlab-coder-partitions-generated-code.html
Thanks, I'll try and see if i can figure out if there's a single entry point. It's not my code and I haven't really had a chance to go through what the functions do.
More inefficient? Absolutely. Which is not to say you shouldn't try it. Each statement in Matlab translates into many statements of C. There are constructs in Matlab that cannot transfer. Also the code must be retested properly, revalidated, etc. There is a maintainability issue. Wouldn't recommend it on a large block of code. On the bright side, Matlab is an interpreter, C is compiled (usually), so it might run faster and use less memory.
Did you happen to be at AAPG? Leaving tomorrow but curious if you presented.
It's updating `x`, advancing it by `dx` every time you go through the loop so you can calculate `f` at the proper value. It's also an unnecessarily boneheaded way to calculate the integral. a = -1; b = 2; N = 6; dx = (b-a)/(N-1); x = [a:dx:b-dx]; f = x.^4 - 3*x.^2 + 1; disp(sum(f*dx)) We can instead just make a vector of `x` values in advance with `x = [a : dx : b-dx]`, i.e., a vector of values from `a = -1` to `b = 2-dx` (we don't want to evaluate `f` at 2) with a step size of `dx`. Then we calculate `f` directly, and now the integral is just the sum of those values times `dx`, i.e. `sum(f*dx)`.
Never never never never never invert a matrix you don't have to. This is simple matrix algebra to convert to a linear equation to solve. Set y = D^{-1}^Tx = x^TD^{-1} which means that yD = x^T or D^Ty^T = x which is just a linear equation to solve using backslash.
I needed to do the same for a complex but short function i had on Matlab. I gave up after a few attempts. It gave me something but it was very complicated. I ended up coding in C++ by myself. I probably spent more time trying to figure out the coder and all its requirements than coding it on my own.
Nope afraid not, I planned on doing a poster presentation but I did not submit my abstract in time (I forgot :/)
Thanks bro!
'C:\\Program Files\\MATLAB\\R2019a'
Can you PM me the model_name.mk that should be somewhere in slprj I think
I have a .prj for the entire project. Is there some way to use that for codegen?
Really impressive - can you provide some tutorial on how one can write the code for such animation in matlab?
I don't think so, because that doesn't really provide an entry point
Yeah it's tough. As /u/NormP said, a single line of MATLAB can directly map into hunreds of lines of C++ code, even with perfectly efficent and short C/C++ code. The MATLAB type system is also completely different, so sometimes it takes a lot of work to lock things down enough so they can logically map to C/C++.
define a range for x perhaps?
Then should I use codegen on the init.m file and replace the current project?
You can't define a function like that. Fun is never defined, you can't access fun(x) if fun doesn't exist.
This is exactly right. Besides defining the functions improperly, you're passing `fun`, `dfun`, and `x0` to `newton` as arguments, but then you define these objects inside the function, meaning that any argument you pass is overwritten. Another issue is that you never define `x` before your `while` loop. Third, please format your code correctly so it's easier for us to read
If init.m calls all of the functions you want to codegen then yeah
You want the function `diff`
I always write y=x(2:end)-x(1:end-1)
wow that is way easy, thank you!
You can use something like: for i=2:x(end)
You can use something like: for i=2:x(end)
This code is nearly impossible to read given how poorly it has been formatted in your original post. %Transformation from Local to Global FEMMatrix = [ E*A/L*cos(alpha)^2+12*E*I/L^3*sin(alpha)^2 ... E*A/L*cos(alpha)*sin(alpha)-12*E*I/L^3*sin(alpha)*cos(alpha) ... -6*E*I/L^2*sin(alpha) ... -E*A/L*cos(alpha)^2-12*E*I/L^3*sin(alpha)^2 ... -E*A/L*cos(alpha)*sin(alpha)+12*E*I/L^3*cos(alpha)*sin(alpha) ... -6*E*I/L^2*sin(alpha); E*A/L*cos(alpha)*sin(alpha)-12*E*I/L^3*sin(alpha)*cos(alpha) ... E*A/L*sin(alpha)^2+12*E*I/L^3*cos(alpha)^2 ... 6*E*I/L^2*cos(alpha) ... -E*A/L*cos(alpha)*sin(alpha)+12*E*I/L^3*sin(alpha)*cos(alpha) ... -E*A/L*sin(alpha)^2-12*E*I/L^3*cos(alpha)^2 ... 6*E*I/L^2*cos(alpha); -6*E*I/L^2*sin(alpha) ... 6*E*I/L^2*cos(alpha) ... 4*E*I/L ... 6*E*I/L^2*sin(alpha) ... -6*E*I/L^2*cos(alpha) ... 2*E*I/L; -E*A/L*cos(alpha)^2-12*E*I/L^3*sin(alpha)^2 ... -E*A/L*cos(alpha)*sin(alpha)+12*E*I/L^3*sin(alpha)*cos(alpha) ... 6*E*I/L^2*sin(alpha) ... E*A/L*cos(alpha)^2+12*E*I/L^3*sin(alpha)^2 ... E*A/L*cos(alpha)*sin(alpha)-12*E*I/L^3*cos(alpha)*sin(alpha) ... 6*E*I/L^2*sin(alpha); -E*A/L*cos(alpha)*sin(alpha)+12*E*I/L^3*sin(alpha)*cos(alpha) ... -E*A/L*sin(alpha)^2-12*E*I/L^3*cos(alpha)^2 ... -6*E*I/L^2*cos(alpha) ... E*A/L*cos(alpha)*sin(alpha)-12*E*I/L^3*sin(alpha)*cos(alpha) ... E*A/L*sin(alpha)^2+12*E*I/L^3*cos(alpha)^2 ... -6*E*I/L^2*cos(alpha); -6*E*I/L^2*sin(alpha) ... 6*E*I/L^2*cos(alpha) ... 2*E*I/L ... 6*E*I/L^2*sin(alpha) ... -6*E*I/L^2*cos(alpha) ... 4*E*I/L ]; Most this isn't necessary as it is repeated frequently. E*A*L is done repeatedly but should just be calculated once, similar to how many times sin and cosine are called on alpha and likewise with E*U/L^3 and such. I think the question you are actually asking is "I have one equation for calculating properties of a beam with a single fixed point, but I need to alter that calculation to a beam with two fixed points." That question is not specific to Matlab, but specific to mechanical/materials/fluid mechanics so you may not get a sufficient answer by posting here. Typically these system of equation problems have unique initial conditions which means you often result in different forms as the parameters change. So you'll likely need to produce an equation for the solution before someone can sort out how to help your implement it.
Because they are not supported for code generation, so coder just doesn't generate code for them. You can try coder.ceval with the c call for printf, something like in the answer from this post: https://www.mathworks.com/matlabcentral/answers/39532-coder-ceval-for-printf-from-stdio-h
Have you actually verified the results using MEX or SIL in the first case? If that is expected, then your main() function is wrong somewhere. If they don't match, your runadd function or use of coder.ceval and related calls is wrong somewhere
If an array is empty, it's length is zero.
you mean I have to write my own mex function? I just wanted to convert this whole code to C and check it works in Visual Studio
No, MATLAB Coder offers a MEX verification feature. Use the coder app and it will suggest it.
If each prompt requires a carriage return, you should probably put the arguments in a text file (one per line). Then call the executable as: system('myexe.exe &lt; args.txt');
Did you look at the Water Control in a Tank example? https://www.mathworks.com/help/fuzzy/water-level-control-in-a-tank.html
Thank you, this worked very well!
Can someone tell me some of the benefits of using MATLAB coder? I feel like writing c code would be much easier. Am I missing something?
fprintf is supported in code generation and the doc says the following: If fileID has a constant value of 1 or 2 and extrinsic calls are not possible, the code generator produces a C printf call. Extrinsic calls are not possible when extrinsic calls are disabled or when fprintf is called inside a parfor loop. I‚Äôd give that a try for your use case. If it doesn‚Äôt work call please MathWorks technical support.
FYI, `sprintf` creates a character array. It doesn't attempt to output to stdout. You'll want `fprintf` for that. For the other cases, check the other responses in this thread.
Can you explain your use case more? What will go into the array? Are you making a game like Hangman?
What do you mean code for clustering? Are you talking about the clustered taps in the channel model, if yes, what kind of channel are you considering here? What is the max. delay spread that you expect? I ask these because usually there are multiple channel models considered by the standard.
I am basically using code for HEED in wsn and modified that code according to my requirements. I want to inplement the code for HEED in such a way that it can elect cluster head according to user requirements. Let's suppose there are five interfaces namely wifi, Bluetooth, zigbee, lte etc and cluster heads are selected based on user requirements. If user wants to transfer large amount of data it should select wifi, else for short data like voice it should selct Bluetooth
 File: [https://github.com/aansari2/Free-Return-Trajectory/blob/master/FreeReturn.m](https://github.com/aansari2/Free-Return-Trajectory/blob/master/FreeReturn.m)
Have you checked the matlab documentation? There is a function called ssim, the documentation page also explains the underlying equation/mechanism itself.
Oops, I totally misunderstood the concept then. I thought you are doing stuff in PHY with channel modelling and stuff. I cannot help in this particular context, sorry.
No problem! BTW thanks for your response :)
I am no control guy, but from a system point of view, you can simulate this block diagram with matlab, and obtain the transfer function. So, you generate u; you create a function that applies the block diagram (or a simulink model) to u, then you obtain the output. Here, if you take the Fourier transform of the input (U = fft(u) ), and the output (Y = fft(y) ), and make an element-wise division between the two ( Y ./ U ), it will give you the Transfer Function. If you, then, compute the ifft of the Transfer Function, you can get the Impulse Response of the system. By doing these, you can have some insights about the system at hand.
A =[];
Maybe B = zeros(4,4) B(:,4) = [1 2 3 4] Don't know about the random numbers though.
I just tried what you said and it worked for me. Are you sure you don't have `B` somewhere else in memory? One way to fix is just to do B = zeros(4,4); B(:,4)=[1 2 3 4]
So, before you type `B(:,4) = [1 2 3 4]` instead type `whos B` and see if it already exists. Perhaps someone made a global variable or something which is handing out, and you just don't see it?
Unfortunately I cant define B outside of these contexts I do change the values after the initial definition could that be doing it
Check this out...It worked for me Principle\_amt=1000; Rate\_of\_interest=10; time\_period=2; end\_loan=(Principle\_amt\*Rate\_of\_interest)/100+Principle\_amt; new\_interest=end\_loan\*Rate\_of\_interest/100; debt=end\_loan+new\_interest
I have this one: Copyright(c) 2009 Zhou Wang It might be the same?
It possibly sounds like initially the values in B are being carried over from the previous calculations. Try clearvars?
The definition of code efficiency changes depending on what constraints you're working against with your software. There are tons of options for tweaking various aspects of the code MATLAB generates (see the [Build Configuration](https://www.mathworks.com/help/coder/build-configuration.html) doc page) that should be able to help you generate code that is "efficient" enough for your application. You can also profile your generated code after the fact to see how well it performs compared to the raw MATLAB code. If your definition of efficiency here has more to do with the number of generated files, you might be able to control that by changing the file partitioning method for your project as /u/sarnex mentioned. I think it's worth noting that there is going to be quite a bit of C or C++ code generated even for a simple MATLAB function. It might seem unnecessarily complicated at first, but the overall software architecture of the generated code is simple *enough* to be readable and flexible/scalable *enough* to work for projects of various sizes.
Ideally you should clear all variables using clear command. You can also clear B specifically by using the clearvars B command
Here's a hint: what's cosine of 2*pi? what's cosine of 2*pi*2? what's cosine of 2*pi*10000*2? what's cosine of 2*pi*10000*128000?
I think you should de vide by fs instead of multiplying by fs:
The problem is that cos(2*pi*integer) is always equal to 1...so this has no effect
I don't understand what the issue is here. If I have a clear workspace - or at the very least, no variable defined as 'B' - then if I type B(:,4)=[1 2 3 4], I get exactly what you're looking for: a matrix where all entries are zero except for the last column.
For engineers it's often easier to write code in MATLAB because you don't need to think about how the computer works. You can implement and tune your design or whatever in MATLAB and then convert it to C to run on the real hardware or whatever
It sounds like it's your actual while condition (~any(strcmp(test_ID,'Huntington'))) Try setting the statement to a variable and running it manually to see if it takes some time to process. I don't know what kind and how much data you have in test_ID, but string comparisons are usually expensive time wise.
You can run a time trace with the for loop, and see what takes so long. One thing that jumps out at me is that you're setting the random number generator properties in the while loop; that's only going to cost performance while not actually changing the seed. You're better off only setting those properties once.
Maybe store each vector in a matrix, nchoosek for the possible row combos, then iterate through the combos.
I think this would work if I didnt need it to be variable number of vectors.
Store the number of vectors in n and use nchoosek(1:n, 2). Or just use nested loops and skip iterations where i == j.
Not exactly sure what you‚Äôre looking for but if you want to train a convolution network for machine image identification there‚Äôs a matlab deep learning onramp.
&gt;Not exactly sure what you‚Äôre looking for but if you want to train a convolution network for machine image identification Yeah, a nice step-by-step explanation of everything going on for this would be a good start! &gt; there‚Äôs a matlab deep learning onramp What does this mean? (no BM, just not sure) Thanks for your help!
But I want an empty character string with a certain length. Don‚Äôt just put random answers my dude
Try to look up on either Google or the Mathworks site: ‚ÄúMATLAB Deep Learning Onramp‚Äù It is a step by step tutorial showing how an example convoluted neural network, Alexnet, can take a color 227x227 pixel image and classify it into one of many image categories. It shows you how to get the image preprocessed for the network to identify it and all the functions available.
if i understand correctly, you want to dock your Editor to the main window: &amp;#x200B; [https://www.mathworks.com/matlabcentral/answers/182333-if-my-editor-window-became-undocked-how-do-i-dock-it-again-picture-inside](https://www.mathworks.com/matlabcentral/answers/182333-if-my-editor-window-became-undocked-how-do-i-dock-it-again-picture-inside) &amp;#x200B; if you do this you should now have one "master window" for the Matlab IDE with the Editor, Command Window, Workspace, Current Folder, and maybe others. You can then move these elements around by grabbing the title (Editor, Command Window, etc.) of the sub-window with your mouse and moving the the mouse. &amp;#x200B; Within the Editor your can also move the tabs for your open .m files from the top to the side, which is SUPER helpful if you have lots of things open.
I'm looking for the code to be on the left and the command window to be on the right.&lt; You mean this, right? And your post is consistent with this? I clicked on the link you posted and the screenshots didn't seem to show the code on the left and command window (am I calling this a wrong term?) on the right?
I understand what you're asking for is to have both windows side-by-side docked in the main window. But if you undock both of them, you should be able to use Windows' snapping feature to align each one to an edge of the screen.
You are right.. thanks a lot ,i forgot the time (t)!! solved it :D , also the sound() function was acting a bit weird
Get matlab schemer from the file exchange or the in program addins. Three are a few dark schemes you can use or find other's that have shared.
Have you tried `step(g1);` or `impulse(g1)`? What plotting trouble are you having exactly?
I think what you're looking for is `char.empty`. Each of the base datatypes in MATLAB has an `empty` method that creates an empty array with size `[n 0]` for some specified `n`. So to create a 5x0 character array you could do: `char.empty(5,0)` Also worth noting that `numel` and `length` of that value would still be zero.
A string is more or less an array of ‚Äúchar‚Äù, so the answer is not that random. Technically you could also do: for j=1 : length a(j) = []; end
When the editor is docked, you can click and hold on the bar above it that says 'Editor' and drag it to the left.
need a dark theme for octave.
While this changes the text and background colors, it doesn't change the toolbars, scroll bars, etc.
Can you explain what you mean by "hard code" in this context? There are different ways to calculate the dot product, but all will be made simpler or harder depending on how much you can rely on pre-existing functions. For example, does "hard coding" prevent you from using the norm() function?
I assume you mean using a function that only relies on basic addition/multiplication etc. A good starting point would be looking up what the dot product is, in particular I would look up what the dot product is *in component form*. Then have a think about how you could implement that.
How would you do this by hand? How do you find the size of a matrix in Matlab?
I run matlab as a shell from inside emacs. (Bonus points: When I edit a file remotely, it will auto-magically open matlab remotely and run my files and display any plots or figures locally. No local matlab install required.) And therefore, use any dark theme I want. Emacs, though, is its own set of crazy to learn. Looks like there's something similar for Sublime called "SublimeREPL" that supports running matlab from within sublime. And now I see your running Windows, which will be problematic as Mathworks chooses to not ship a binary that properly supports a command line interface for windows (Last time I checked one of the R2016s. I don't think they've changed). See the difference: [https://blogs.mathworks.com/community/2010/02/22/launching-matlab-without-the-desktop/]( https://blogs.mathworks.com/community/2010/02/22/launching-matlab-without-the-desktop/ )
Here are a couple of functions that would be helpful: sz = size(matrix1) - returns a vector with the size of each dimension matrix2 = ones(n) - creates a n-by-n matrix of ones &amp;#x200B; These two functions should help you get started
Last time I checked there wasn't support for it.
https://github.com/LMazzole/Color-Scheme this works for me
I'd start with the definitions of dot products: &amp;#x200B; [http://mathworld.wolfram.com/DotProduct.html](http://mathworld.wolfram.com/DotProduct.html) &amp;#x200B; There are lots of ways to turn a summation into a for loop or vector operations in matlab. Hope this helps.
That doesn't make any sense. If it's empty it's length is zero. He just told you how to make an empty array, which is one of the possible ways to make a meaningful interpretation of your irrational request.
That would yield an empty array, just like a=''
Oh my god thank you so much! I didn't even know about the size command, our prof never told us about it and we're only supposed to know and use the stuff he tells us about üòí But I still have problems with the code üòÖ So the function also needs to fill the extra space in the new matrix with zeros, could you give any advice on how I should go about that?
Roger that!
And I'm assuming use writematrix instead of xlswrite. I just discovered these last night actually. Since these were introduced in 2019a, I'm surprised there wasn't really advertising about them. Are these faster than the old functions? Are there still reasons to use xlswrite, dlmwrite, fprintf? Thanks!
Thanks! Could you help me a little more with it please? üòÖ I'm trying to make it combine the input matrix with a matrix of zeros to create a new square matrix and I keep getting an error message saying the dimensions aren't consistent.
Yeah but he asked for an array of chars with a certain length and was not satisfied with a=[] and/or a=‚Äò‚Äô for some reason.
Great questions! Let me check on that with the folks on the MATLAB Import team. Good point about lack of advertising. &amp;#x200B; And yes, xlswrite -&gt; writematrix
Your professor probably expects you to read the documentation on your own to learn these things. Reading the documentation is an important skill. Try searching the documentation for "zeros" and see what comes up.
This seems like an analogy to audioread/audiowrite. Thanks for introducing this!
Thanks to the tip. Can you pass along to the team that the "not recommended" disclaimers encouraging users to adopt readmatrix from [csvread](https://www.mathworks.com/help/matlab/ref/csvread.html), [dlmread](https://www.mathworks.com/help/matlab/ref/dlmread.html) and probably other related functions are currently linking to writematrix instead of readmatrix?
Can you explain why read matrix is better?
Good catch! I have passed it along.
Waiting on a response from the MATLAB Import team. I made the mistake of posting this on the Friday of a holiday weekend.
wavread - brings me back to my senior year at WPI. Memories...
Just noticed OP is working at mathworks I just wanted to know is there any plans releasing a dark mode editor? Thanks
Also readtable, writetable,readcell,writecell.
Well, are the dimensions consistent? If not, why not? How would you fix that?
Like I said, first you dock the Editor in the main window, and then you can move the elements around by grabbing and moving them around with your mouse.
You can do it yourself, using matlab schemer: [https://au.mathworks.com/matlabcentral/fileexchange/53862-matlab-schemer](https://au.mathworks.com/matlabcentral/fileexchange/53862-matlab-schemer) .
Unfortunately I can't comment on our development plans. Sorry.
I really don't know what I'm doing, I thought Matlab would help me do what I'm trying to do, so I downloaded it and I've searched everywhere. Basically, I've got this dataset and I'm trying to find a linear regression for it. I tried all sorts of functions and things and finally I just gave up and drew my own lines to represent the data I need to normalize to. But now I'm struggling to get the X,Y values given where the line intersects. For example, how would I find out what my X,Y value for the start of my black line is? In the coordinate space that I plotted the data in ?
........ describe the problem
I have installed mysql 64 bit in my pc Odbc mysql driver 64 bit for matlab And created a source But i am not able to connect. It is showing some error...
... Post the error...
Matlab error when trying to connect the database in SQL with matlab. https://imgur.com/gallery/kmVdJ0h
Instead of ‚Äúfun=@f‚Äù, perhaps try ‚Äúfun=@(x)f(x)‚Äù
I get the error ‚Äúarray indices must be positive integers or logical values‚Äù on line 22. I believe it thinks f(x) is an array assignment. Thank you though.
Clear your workspace. You probably have a variable ‚Äúf‚Äù floating around in your workspace, so MATLAB doesn‚Äôt see your function ‚Äúf‚Äù.
I want to kiss you. Thank you so much. I forgot that workspaces don‚Äôt clear every time I run.
I would guess just plain gradient descent? i.e. step proportional to the gradient. [Wikipedia ](https://en.m.wikipedia.org/wiki/Gradient_descent)
Desktop link: https://en.wikipedia.org/wiki/Gradient_descent *** ^^/r/HelperBot_ ^^Downvote ^^to ^^remove. ^^Counter: ^^259886
**Gradient descent** Gradient descent is a first-order iterative optimization algorithm for finding the minimum of a function. To find a local minimum of a function using gradient descent, one takes steps proportional to the negative of the gradient (or approximate gradient) of the function at the current point. If, instead, one takes steps proportional to the positive of the gradient, one approaches a local maximum of that function; the procedure is then known as gradient ascent. Gradient descent is also known as steepest descent. *** ^[ [^PM](https://www.reddit.com/message/compose?to=kittens_from_space) ^| [^Exclude ^me](https://reddit.com/message/compose?to=WikiTextBot&amp;message=Excludeme&amp;subject=Excludeme) ^| [^Exclude ^from ^subreddit](https://np.reddit.com/r/matlab/about/banned) ^| [^FAQ ^/ ^Information](https://np.reddit.com/r/WikiTextBot/wiki/index) ^| [^Source](https://github.com/kittenswolf/WikiTextBot) ^] ^Downvote ^to ^remove ^| ^v0.28
Could you also ask if there are options for different decimal points such as comma and period? Super annoying little quirk relevant in some EU countries. Thanks
Have you tried windows key plus left arrow
Options for importing data?
A Google search returned this. I don't have experience doing that so this is the best I can do for ya https://www.mathworks.com/help/database/ug/database.odbc.connection.sqlwrite.html
I often have data with comma as decimal point and semicolon as delimiter
I often have data with comma as decimal point and semicolon as delimiter
Yeah, making f negative will give you the maximum. The x_i constraints can be incorporated by the lower bound (l_b) argument to intlinprog.
Thanks! How do I then guarantee that x2 and x3 will be integers? Also since the lb will be a vector of zeros do I have the ub as a blank vector?
Use the intcon argument for that. It takes in a vector of indices of the design variables that you want to be integers. In this case, it should be [2 3].
... you can do better than that ...
When trying it using the code below: f = [1;1;3;1]; A = [1 2 3 4;4 3 2 1;1 1 1 0;0 0 0 1]; b = [20;10;-3;3]; intcon = [2 3]; Aeq = []; beq = []; ub = []; lb = [0 0 0 0]; [x,sol] = intlinprog(f,intcon,A,b,Aeq,beq,lb,ub); sol &amp;#x200B; Matlab returns: Intlinprog stopped because no point satisfies the constraints. &amp;#x200B; sol = &amp;#x200B; \[\] &amp;#x200B; Is there something that has gone wrong or is the question just one with no constraints?
You should be able to use the "detectImportOptions" function in combination with readTable and others (I'm sure for readTable but I haven't tried for the others) Take a look at the doc, if you need a specific example ping me back, I can't write it right now I'm on mobile but I have some examples somewhere in my files for that specific problem.
See https://www.reddit.com/r/matlab/comments/bsjytd/tip_use_readmatrix_instead_of_xlsread/ep0fit1 ( i made an error, replied to wrong user)
Perhaps it's because I'm trying to view it on my phone, but I can't read the error. Can you copy and paste the text? Or type it out? And have you Googled the error?
The third row of the A matrix should be negative. It looks like you got it right for the b vector, but forgot the A matrix.
yeah i found that too, i didn't quite understand it from that example. Thanks anyways, hope someone else is able to help me
There are 2 ways you can do this: 1) Save the matrix as a csv file and import the csv directly into your sql database, if this is a one time task 2) If you want to connect to the db through matlab, you'll first need a driver. Follow the step [here](https://www.mathworks.com/help/database/ug/connecting-to-database.html) depending on your database management system. Make sure there's a table in your database with the same headers and datatype for your matrix, then use sqlwrite to insert your data.
+ I'll check it out. Thanks!
are you saying you want the dashed lines going from: 1: (200,0) to (200,30) 2: (600,0) to (600,30) etc. ? &amp;#x200B; If so, use somthing like the following: &amp;#x200B; figure(1) hold on % your current plot code plot(\[200 200\], \[0 30\], '--') plot(\[600 600\], \[0 30\], '--') etc. &amp;#x200B; Other options would be to change the y-values of the dashed line to go from 0 to the value of the curve you already have, as well as changing the color of the line to be gray.
Any chance with heatmap?
I have some excel spreadsheets more or less like this: Station Longitude Latitude Depth Temperature Salinity 1 -26,189527 -48,583232 0.000 30.065 31.101 1 -26,189527 -48,583232 0.200 30.076 31.106 1 -26,189527 -48,583232 0.400 30.076 31.109 1 -26,189527 -48,583232 0.600 30.077 31.108 1 -26,189527 -48,583232 0.800 30.083 31.108 1 -26,189527 -48,583232 1.000 30.082 31.109 1 -26,189527 -48,583232 1.200 30.090 31.110 1 -26,189527 -48,583232 1.400 30.092 31.111 1 -26,189527 -48,583232 1.600 30.091 31.118....
What kind of PV system are you thinking? Solely DC power generation? Just a single solar cell? A full grid-connected system?
Matlab has some demos last time i used it.
Do the data in the spreadsheet keep going such that you have T and S all the way down to the maximum depth at each of your 5 stations? If so, you'll want to read it into Matlab so that you have a two-dimensional matrix of temperature and a separate two-dimensional matrix of salinity. If at each station the T,S data are not the same length (because e.g. you reached the bottom), then you'll need to fill the bottom in with NaN values so that they are all the same (so that you can fit them into a grid). Then once the data is set up you can use `pcolor` to make your plot. For example: pcolor( x, z, Temp); shading interp;
it's not totally clear to me what you want the plot to look like with the data you have. do you want colors? are the colors based off temperature and/or salinity?
just create a vector like x = [0:0.1:10] and evaluate the expression manually f = 0.025*T*x.^2 - 5*x^2 - 40*x + 300; then plot plot(x,T)
&gt;thank you for your reply, I have received this error; &gt; &gt; &gt; &gt;Undefined function or variable 'T'.
ok, you need to set T to your wanted value, eg. T = 5; and I made a mistake, it should be plot(x,f)
Is value of fun known? You are evaluating fun but actually want to plot x vs T. It is not clear what you want to do.
Replace f with T in the function before the plot
Digital Factory ElmPvsys is an example, with relative efficiency dependant on irradiance.
This function doesn't give a value of T for a given x, or x for a given T. It gives a value that is a function of both f and T. You need to understand what you are doing mathematically before Matlab can be of any help to you.
If you don‚Äôt know the exact value of T, try [fsurf](https://www.mathworks.com/help/matlab/ref/fsurf.html) . Good luck!!!
You are so right, I have rearranged the equation for T and succesfully plotted. For some reason I was thinking that the equation was impossible to rearrange to make T the subject.
I am confused by the question. Given the use of *fft()* I would assume the question is about taking the magnitude of the transformation, not an expectation.
I have to calculate E\[H\*H'\]: As I understand it means I have to take expectation of H\*H'. &amp;#x200B; But I do not understand, how does the question changes given the fact that fft() is used. Can you explain a bit more? Because I think you are on the right track. I have seen in some paper, they say expectation but takes magnitude. But I don't understand that either.
Perfect! That's the idea, how can I put the values ‚Äã‚Äãas a function of depth (Y-axis) in each of the 5 points? &amp;#x200B; Another problem, do i have to put all matrices at the same length? Like, the depth and the transect with the same values ‚Äã‚Äãof the vector?
I want the data in points. The color I can interpolate later. My difficulty is to pull the data from the worksheet in each of the 5 points
What's expectation here? It almost sounds like you just want the mean value.
Also why are your x's dotted. unless x is a vector, it shouldnt be.
I heard back from the MATLAB Import team. Here's a synopsis of the benefits of the new functions (readmatrix, etc.): &amp;#x200B; * Automatic delimiter detection, headerline detection, datatype detection. * Datetime, duration, categorical support vs. XLSREAD, CSVREAD * Cross platform consistency vs. XLSREAD. * Better interface, i.e. not zero based row/column selection vs. CSVREAD * Correct quoted field reading (vs. CSVREAD) * Import options support, including Decimal Separator, etc. * Multiple delimiters, multiple character delimiters, custom line ending... &amp;#x200B; Hopefully that answers the question (this is far as I can go). There is no data available for performance or benchmarking.
Yes x is a vector from 0 to 10 with 0.01 spacing, forgot to mention
From http://psychtoolbox.org/docs/KbName kbNameResult = KbName(arg) * If arg is ‚ÄòKeyNames‚Äô, KbName will print out a table of all keycodes-&gt;keynames mappings.
Side note: It's fairly straightforward to integrate C and CPP files with some wrapper functions and externs. It's pretty common to do this if you need to.
 %Data %data = xlsread('pernada1.xls'); % Setting axis xlim([0,2000]); ylim([0,30]); % 30 values % transect = [0:67:2000]; % 150 values transect = [1:13.33:2000]; y = [0.2:0.2:30]; %Bathymetry with 30 values %bathymetry = [0 1.33 2.83 3.53 5.53 9.73 10.22 13.92 15.92 17.32 19.22 21.3 22.42 24.02 25.12 26.11 26.61 27.18 26.18 24.48 24.48 23.59 22.9 18.79 14.09 10.89 9.79 4.79 0.4 0]; %Bathymetry with 150 values bathymetry = [0 0.4 0.8 1.01 1.33 1.66 1.80 2.33 2.53 2.83 2.98 3.02 3.15 3.29 3.53 3.83 4.53 4.67 4.99 5.53 5.83 6.37 7.44 8.53 9.73 9.79 9.82 9.97 10.02 10.22 10.86 11.62 11.92 12.48 12.87 13.92 14.29 14.38 14.72 15.57 15.92 16.02 16.16 16.88 17.10 17.32 17.67 18.08 18.45 18.86 19.22 19.72 20.09 20.62 20.88 21.3 21.42 21.65 21.97 22.2 22.42 22.94 23.11 23.34 23.8 24.02 24.21 24.53 24.86 25.01 25.12 25.28 25.53 25.74 25.99 26.11 26.27 26.36 26.45 26.57 26.61 26.72 26.91 26.61 27.02 27.08 27.11 27.18 26.78 26.54 26.18 25.75 25.11 24.76 24.56 24.48 24.33 24.29 24.17 24.12 24.08 23.99 23.87 23.72 23.66 23.59 23.39 23.27 23.08 23.01 22.9 22.42 22.14 21.87 20.4 18.79 17.55 16.79 15.92 15.21 14.09 13.45 12.09 11.77 11.01 10.89 10.57 10.34 10.29 10.17 9.94 9.79 8.62 7.29 6.78 5.67 4.79 3.98 2.79 2.11 1.25 0.4 0.3 0.2 0.1 0.1 0 0 0 0]; plot(transect, bathymetry) axis ij hold on % Perfile 1 at 200m (x axis) % temp1 = data(2,2:end); % Perfile 2 at 600m (x axis) % temp2 = data(3,2:end); % Perfile 3 at 1000m (x axis) % temp3 = data(4,2:end); % Perfile 4 at 1400m (x axis) % temp4 = data(5,2:end); % Perfile 5 at 1800m (x axis) % temp5 = data(6,2:end); title ('Transect almost there') xlabel ('Transect') ylabel ('Depth')
I do not think it would look nice, but thanks for the tip. I did not know this tool.
my excel data: [https://docs.google.com/spreadsheets/d/1iqif0YR\_O7A97epkn\_EH8SoUl3HuKmD2Ys0FZTV2hII/edit?usp=sharing](https://docs.google.com/spreadsheets/d/1iqif0YR_O7A97epkn_EH8SoUl3HuKmD2Ys0FZTV2hII/edit?usp=sharing)
We need more info on the model... Amongst possible issues: + use of a memory block within the model to break an algebraic loop that leads to some strange dynamics (which may depends on the solver) + use of switch, especially if you control the switch with the error signal and more generally any form of discontinuous dynamics + fixed step solver with wrong step size + use of hysteresis or deadzone + use of a derivative block (derivative being non causal, it should always be filtered) sometimes the solver can lead to some issue + discrete dynamics in the model with pure imaginary poles or zeros So as you can see many issues can be imagined and this list is far from being exhaustive...
I'll try to give somewhat of an explanation of the general procedure, but without knowing exactly what your file(s) look like, I can't tell you exactly how to do it. But even if I had your file(s) in front of me, it's not beneficial for either of us if I just write up a block of code for you to execute without understanding it. So even though I'm going to walk you through most steps, I'm still going to leave it to you to try and figure out *some* of the specifics. I also highly recommend that you seek some help locally, from your supervisor (if this is a work or graduate school project), or from your professor or TA (if this is for a class). Based on your post history, it looks like you've been struggling with this already, and there are probably a variety of resources nearby that you should be making use of before posting here. Luckily, this is actually exactly the type of work that I do - I'm a PhD student in oceanography in the US right now. So I'm going to make some educated guesses on what your data looks like, which will inform the procedure I'll explain. But of course, you may need to adapt this depending on the specifics of what you have. First, I'm going to *guess* that for each station you have a separate excel or csv file that represents a CTD cast. I'm going to further *guess* that a first level of pre-processing has been applied so that temp and salinity have been averaged within bins so that the depth column of each file looks the same (i.e., each file has a depth column that has 0, 0.2, 0.4, 0.6, 0.8, ....)^(\*). Finally, I'm going to *guess* that each CTD cast has a different maximum depth and that the file only goes up until that maximum depth. With those guesses, the procedure I would take will be roughly as follows (though there are probably different ways you could do it as well that would be equally correct): &amp;#x200B; **Step1** For each file, you need to read in the data. You can use Matlab's import data wizard, or you can use a function like `xlsread` or `textscan`. You want to read the depth column, the temp column, and the salinity column all as separate vectors that are all size `Nx1`, where N is the total number of rows in the excel/csv file. So now you have one vector for depth per station (I'll call them `z1`, `z2`, `z3`,...), one vector for temperature per station (I'll call them `T1`, `T2`, `T3`,...), and one vector for salinity per station (I'll call them `S1`, `S2`, `S3`,...). The size of `z1`, `T1`, and `S1` should all be the same as each other, but `z1` and `z2` might not be the same size. &amp;#x200B; **Step 2** You need to figure out which of your vectors is longest (i.e. which of your casts went deepest). We are going to build a matrix out of all of the T and S vectors, but if they are not the same size that won't work. If we find the deepest cast, we can fill in the bottom of that matrix with NaN values. For a small number of stations, I might do something like the following: Nmax = max([length(z1),length(z2),length(z3)...]); You'll also want to know which of the depth vectors was the longest because we'll use that at the end for the final depth vector. For a small number of stations, you can just look at the variables and see. **Step 3** Build a matrix for temperature and a matrix for salinity. The matrix will be size `Nmax x M` where M is the number stations you have. In your question you mentioned, you mentioned having 5 stations, so the matrix will be size `Nmax x 5`. Each column of matrix will contain one of the vectors that you read in previously. Below the bottom of the vector, the matrix will be filled in with NaNs. I might do something like the following to construct my temperature matrix (and follow a similar procedure for salinity): M = 5; T = NaN( Nmax , M ); % create a matrix filled with NaN values T( 1:length(T1) , 1) = T1; % fill in the first column of the matrix with T1 T( 1:length(T2) , 2) = T2; % fill in the second column of the matrix with T2 ... % etc. By building a NaN matrix first, and then filling it in bit-by-bit, I have a NaN values below the maximum depth of each cast. &amp;#x200B; **Step 4** Once temperature and salinity are constructed as vectors, you can visualize the results. You'll need a vector of size `1xM` of the across-transect distances of each cast (these are the 200m, 400m, 600m, etc) that you mention, and a size `Nmax x 1` vector of depths (which will just be exactly the longest of the depth vectors). For the following example, I'm going to pretend that `z3` is the longest, but you'll have to figure it out for your scenario. x = 200:200:1000; % Define x vector of station locations z = z3; % Define z vector of depths (assume z3 is the deepest) figure; % Create new figure window pcolor(x,z,T); % Create plot of temperature shading interp; % Remove visible mesh and set colours to be interpolated set(gca,'ydir','reverse'); % Flip the direction of the y-axis Remember if you get errors, or if you get stuck along the way, Matlab's in-built help section is really good. For example, you can type `help pcolor` or `doc pcolor` in your command line and get detailed instructions for usage and syntax (the same for any Matlab function). Typically the doc will also include examples. &amp;#x200B; ^(\*) If the pre-processing I mentioned hasn't been done, and the different files all have different depth vectors then you'll have a lot of problems following this procedure. If this is the case, you'll need to insert an extra step after step 1 to bin-average all the of the T and S onto common depth vectors. &amp;#x200B; Edit: If you do get this to work, I'd love to see what the result looks like!
I've put the model in the edit; indeed I have a derivative but I filtered it already...
Would anybody know what functions I would need to start recreating this program?
Use a coder.CodeConfig and set the TargetLanguage to C++, and then pass the name of that object to the -config argument of codegen https://www.mathworks.com/help/coder/ref/coder.codeconfig.html
You can try Kbcheck
When I try to use "readmatrix" it gives me an error message saying: Undefined function or variable 'readmatrix'.
It shouldn't even compile because main.c is wrong. The generated calladd function takes in a and b as an argument. If you give it two, it works as expected for me: #include "calladd.h" #include "calladd_initialize.h" #include "calladd_terminate.h" #include &lt;stdio.h&gt; int main() { calladd_initialize(); double a[3] = {1,2,3}; double b[3] = {4,5,6}; calladd(a,b); calladd_terminate(); getchar(); return 0; }
I would bet I some issue with the algebraic solver. It cannot be 100% accurate. Try yonmodelnyour sydtem explicitely, using euler Lagrange equation for instance. Also, never a good practice is to use an antiwindup scheme with the pid. So if for some reason you modify the control (saturation, rate limiter, on off of the power amplifier, etc) then it will avoid the drift of the integral in some situations
Conditional statements. If you need specific help with a problem happy to help. Here‚Äôs something to get you started: https://www.mathworks.com/help/matlab/matlab_prog/conditional-statements.html
Thanks for the reply üòÄ My ‚Äúprogram‚Äù given a number generates n integers random numbers and store them in an array,but I want them to be all different. For example if the precedent iterations gave the numbers [1,3,5,4,7,9] and the next iteration generates 3 which has already been created, I want the program to create another one, so when in the iteration the program detects a number which has already been created it jumps back to the command ‚Äúrandom number‚Äù= round(‚Äúsome constant‚Äù‚Ä¢rand(1)) to generate another one. I hope it‚Äôs clear what I mean üòÑ
You're looking for the cummulative sum, or cumsum: cumsum(A,3)
And how do you specify the index there? I understand the 3rd dimension but I want the sum to go to 1 til i
If I understand your request, then lookup the documentation for cumsum. It should do what you want without a for loop.
Give it a try
Another generation of programmers to try to implement GOTO before they learn the hard way why GOTO is horrible. It's the circle of life.
A "go to" command doesn't exist in Matlab, and you really never need it to. What are you actually trying to do? There are a lot of ways to control the flow of execution. For example you can exit a loop with `break` or skip to the next iteration with `continue`. If there is a block of code that you want to execute, you could simply put it in a function and call that whenever you want. Or, if it's a short piece of code, maybe you want to use an if-else block to control when it gets executed. Generally, if you find yourself wanting a "go to", you either want to use some existing control flow statement that you haven't learned yet, or you've structured your code so badly that a "go to" is really the only solution. In the former case, you should read the documentation to learn about the available tools; in the latter case, you should restructure your code so that it is more organized and doesn't need a "go to", and in the future learn to plan the structure of your code before you write it.
You're looking for the function `ismember()` along with a while loop. The documentation should explain both of those things very clearly.
Thanks!
I mean, goto has its place, it's just easy to abuse if one isn't extremely careful. In fact, at the hardware level, function calls are essentially a goto operation. It's not inherently evil, there are simply better alternatives that can be employed when creating a high level programming language.
That's great, than you!
nope, GOTO is inherently evil.
Look up `randperm` in the documentation.
Try ‚Äúsum( A(:,:,1:ind) , 3 )‚Äù if you want to sum from terms 1 to ‚Äúind‚Äù in the 3rd dim. ‚Äúcumsum( A , 3 )‚Äù will give you the results of the above for all ‚Äúind‚Äù. It will also be faster than manually looping
&gt; ...learn to plan the structure of your code before you write it. [Draw the rest of the owl](https://i.redd.it/auobn0jcerwy.jpg). :D
Lol Yeah, I didn't mean to make that sound easy. Still, there's no magic trick to it. You simply have to hold yourself to some standards of decency in code practices, and eventually you build an intuition for how something should be structured based on the problem it's meant to address.
Then so are function calls.
Right, and despite the humorous presentation, I think that there is a similar message implicit in that meme: you can only teach so much. I didn't learn my programming sensibility from courses or books, but from reading and writing code for two+ decades. Not something you can fit into a reddit comment!
Exactly.
Just to fuel the fire: [there _is_ a goto command in matlab](https://au.mathworks.com/matlabcentral/fileexchange/26949-matlab-goto-statement). But yeah, like even the author of that states, there's always, _always_, a better way to do things.
Cool. So in my last comment I gave you fairly step-by-step instructions and I said the following: &gt; But even if I had your file(s) in front of me, it's not beneficial for either of us if I just write up a block of code for you to execute without understanding it. But instead of trying to understand anything that I told you, you just posted a large hunk of code where you plot the bathymetry, and then linked to a file containing the data. You didn't bother asking any questions, and in your latest posts you haven't shown that you've made ANY effort to parse the CTD data. Are you expecting that since I put in the effort to explain things that I'll just do the work for you? Looking at your data, it's already really well organized in the spreadsheet, so there are actually fewer steps to load and plot than what I mentioned. Try reading the data in with Matlab's data import wizard - it will do ALL of the "hard" work for you. This should all be a really straightforward procedure at this point. If you need help, ask your teacher.
That's not a built-in function
Firstly, do you want to be my best friend? Hehehe Joking aside, I wanted to thank you for the time you had to guide me in my problem. I was very lost but from what I realized, I was more or less on the right path (not knowing). With your help, I managed to get almost at my goal, now I just need to hit some details. I believe that up to Step 2 I managed to do it differently, but with the same result. But I kept your guidance and had no overlapping issues. Now Step 4 was crucial for me to understand how to distribute my stations on the x-axis! &amp;#x200B; Now I need to define my bathymetry as the depth limit and interpolate the blank regions. &amp;#x200B; &amp;#x200B; Q.: I'm also an oceanographer, now I'm doing masters degree in Brazil.
Here's my code: &amp;#x200B; %new life clear; close all; clc; data = xlsread('pernada1.xls'); %Create all vectors with the same size %depth in each point d1 = data(:,1); d2 = data(:,3); d3 = data(:,5); d4 = data(:,7); d5 = data(:,9); %temp in each point t1 = data(:,2); t2 = data(:,4); t3 = data(:,6); t4 = data(:,8); t5 = data(:,10); %Aternative to fill the bottom of that matrix with NaN values Nmax = max([length(d1),length(d2),length(d3),length(d4),length(d5)]); M = 5; % number of stations T = NaN( Nmax , M ); % create a matrix filled with NaN values T( 1:length(t1) , 1) = t1; % fill in the first column of the matrix with t1 T( 1:length(t2) , 2) = t2; % fill in the second column of the matrix with t2 T( 1:length(t3) , 3) = t3; % fill in the second column of the matrix with t3 T( 1:length(t4) , 4) = t4; % fill in the second column of the matrix with t4 T( 1:length(t5) , 5) = t5; % fill in the second column of the matrix with t5 %Distribution of functions in the plot x = 200:400:2000; % Define x vector of station locations %x = 1:15.748:2000; % Define x vector of station locations %x = x.' % invert axis z = d4; % Define z vector of depths figure; % Create new figure window pcolor(x,z,T); % Create plot of temperature shading interp; % Remove visible mesh and set colours to be interpolated set(gca,'ydir','reverse'); % Flip the direction of the y-axis % Setting axis xlim([0,2000]); ylim([0,30]); hold on %Bathymetry with 127 values %bathymetry = [0 0.4 0.8 1.01 1.33 1.66 1.80 2.33 2.83 2.98 3.02 3.15 3.29 3.53 3.83 4.53 4.67 4.99 5.83 6.37 7.44 8.53 9.79 9.82 9.97 10.22 10.86 11.62 12.48 12.87 13.92 14.29 14.72 15.57 15.92 16.16 16.88 17.10 17.67 18.08 18.45 19.22 19.72 20.09 20.62 21.3 21.42 21.97 22.42 22.94 23.11 23.34 23.8 24.02 24.21 24.53 24.86 25.01 25.12 25.28 25.53 25.74 25.99 26.11 26.27 26.36 26.45 26.57 26.61 26.72 26.91 26.61 27.02 27.08 27.11 27.18 26.78 26.18 25.75 25.11 24.76 24.48 24.33 24.29 24.12 24.08 23.99 23.87 23.72 23.66 23.59 23.27 23.08 23.01 22.9 22.42 22.14 21.87 18.79 17.55 16.79 15.92 15.21 14.09 13.45 12.09 11.77 10.89 10.57 10.34 10.29 10.17 9.94 9.79 8.62 7.29 6.78 5.67 4.79 3.98 2.79 2.11 1.25 0.4 0.2 0.1 0]; %bathymetry = bathymetry.' %plot(x, bathymetry) %Transect with 150 values transect = [1:13.33:2000]; %Bathymetry with 150 values bathymetry = [0 0.4 0.8 1.01 1.33 1.66 1.80 2.33 2.53 2.83 2.98 3.02 3.15 3.29 3.53 3.83 4.53 4.67 4.99 5.53 5.83 6.37 7.44 8.53 9.73 9.79 9.82 9.97 10.02 10.22 10.86 11.62 11.92 12.48 12.87 13.92 14.29 14.38 14.72 15.57 15.92 16.02 16.16 16.88 17.10 17.32 17.67 18.08 18.45 18.86 19.22 19.72 20.09 20.62 20.88 21.3 21.42 21.65 21.97 22.2 22.42 22.94 23.11 23.34 23.8 24.02 24.21 24.53 24.86 25.01 25.12 25.28 25.53 25.74 25.99 26.11 26.27 26.36 26.45 26.57 26.61 26.72 26.91 26.61 27.02 27.08 27.11 27.18 26.78 26.54 26.18 25.75 25.11 24.76 24.56 24.48 24.33 24.29 24.17 24.12 24.08 23.99 23.87 23.72 23.66 23.59 23.39 23.27 23.08 23.01 22.9 22.42 22.14 21.87 20.4 18.79 17.55 16.79 15.92 15.21 14.09 13.45 12.09 11.77 11.01 10.89 10.57 10.34 10.29 10.17 9.94 9.79 8.62 7.29 6.78 5.67 4.79 3.98 2.79 2.11 1.25 0.4 0.3 0.2 0.1 0.1 0 0 0 0]; plot(transect, bathymetry) title ('Transect almost there!!') xlabel ('Transect') ylabel ('Depth')
here's my product so far: [https://imgur.com/0t7rHoH](https://imgur.com/0t7rHoH)
thak you
Nope, but OP didn't specify that as a requirement :p
A function call is inherently a dynamic pattern. GOTO is not.
A dynamic pattern... using a goto.
that's a pretty major distinction. a function call or a loop has exactly one entry point and will return to exactly one exit point when processing is completed. a GOTO can muck this up in uncountable ways and is a one-way ticket to spaghetti code.
Sorry, but it looks like you want to give me a lesson in morale. I'm no expert on that, and I've never used that language before. I'm beating like any other. At no time did I ask anyone to do anything for me, I asked for guidance from people who have experience so I can understand the path I must take. I liked your contributions, especially since you are from the same area. I'm trying to learn MatLab for personal reasons, it's not a product I need to generate. I gathered some data from a collection that I performed for practice. And yes, I have delegated and tried several ways to deal with the step by step you proposed. I understood the logic and I am trying to deal with the MatLab terms. I did not understand your attachment to my teacher. Why can not I learn here?
&gt;a GOTO **can** muck this up in uncountable ways... Can, sure, but doesn't have to. &gt;that's a pretty major distinction. a function call or a loop has exactly one entry point and will return to exactly one exit point when processing is completed. So in other words, they are examples of legitimate uses of a goto? I agree.
Alright you rascal, I see what you're doing here.
A simple outline is usually sufficient. That or a flow chart
You‚Äôd have better luck (and a better code) by just putting the info you want to skip in an if-statement and have the code perform those lines when the condition is false Alternatively, you can program a function to do the same thing. Those are the only two situations where I‚Äôd consider a ‚Äúgoto‚Äù function, and even then these solutions are better.
Easiest way is probably to make C the return value of calladd
Two questions for clarification: (1) What is the significance of your [1000 x 200] array? I‚Äôm assuming the 1st dimension number of random samples, and the 2nd dimension is the number of times (2) Are you saying you are looking at random samples only at times 40 &amp; 80, or periodically at every 40 &amp; 80 minutes? I‚Äôm assuming the former. If my assumptions are correct, then try ‚Äúhist3( A(:,[i40,i80]) )‚Äù where ‚Äúi40‚Äù &amp; ‚Äúi80‚Äù are the indices for the 40th/80th minute, and ‚ÄúA‚Äù is your array of wind power data. This should give you the joint PDF. In general: joint PDFs, correlations, etc must process the data from both dimensions *at the same time*, not one after the other. Otherwise, you can‚Äôt quantify how one dimension depends on another (which is the whole point of joint PDFs, correlations, etc.). Hope this helps!
Thanks for the help, I believe your solution has got it working, just for completeness I'll still answer the questions: 1) Other way around I believe, supposed to signify 1000 power generators, each sampled 200 times. 2) Yeah the former, random samples at those times Thanks for your help and thoroughness with your answer, it really helped!
You could pass a correctly sized array into the function as an argument using `[coder.wref](https://uk.mathworks.com/help/simulink/slref/coder.wref.html)` this works for simulink coder. Not sure if MATLAB coder is similar or not
Look up regionprops(). You can identify the circle in there and there are lots of other things like BoundingBox, where you could create a new image referencing just that area, or PixelIdxList, where you can turn the pixels of other objects to 0, etc etc.
Read the documentation for [rand](https://www.mathworks.com/help/matlab/ref/rand.html).
[randn](https://www.mathworks.com/help/matlab/ref/randn.html) will help. As far as I know, there's no bounds on the interval, so you'll have to find a way to adjust that yourself.
Why normal?
Because the task says "normal"
Yeah I'm having problems with that tbh ahaha I don't understand how I can make the matrix have the numbers within the given interval?
I have, but as far as I understand rand returns a matrix with uniformly distributed numbers, and I need them to be normally distributed?
The term you are looking for is "truncated normal". This might be what you want: [https://www.mathworks.com/matlabcentral/fileexchange/53180-truncated-normal-generator](https://www.mathworks.com/matlabcentral/fileexchange/53180-truncated-normal-generator) &amp;#x200B; EDIT: sorry, I missed the integer part. I guess you first need to define what you mean by normally distributed integers, since the normal distribution is continuous
Thanks! Honestly I'm not sure what I mean üòÖ The task says that the matrix should be filled with random integer numbers with random integer numbers with normal distribution, but maybe there was a mistake and it was supposed to say "uniform" instead of normal, since I'm taking a basic course and we're not supposed to know very advanced stuff.
So, if you want a normal distribution of numbers, they can't be "within a given interval." A normal distribution, by definition, is defined from -inf to inf. So, the question is- what do you want to do with the "excess probability" that is, the probability on either side of your region? To get everything but the interval, you can simply do round(std*randn(n) + u) where `std` is your standard deviation and `u` is the mean. That being said, you will likely get answers outside of your given interval doing that. The question is- what do you want to do with those?
[fread](https://www.mathworks.com/help/matlab/ref/fread.html?searchHighlight=fread&amp;s_tid=doc_srchtitle) will read binary data.
So, this is probably an issue of math vs. practicality, since the normal distribution is formally defined over an infinite region, although it is often used to describe things that have a finite region since it's rare to get data outside of the six-sigma band. You have a few options: 1. Use a normal distribution where the given interval covers a specified number of standard deviations. Any values outside the interval are set to the limiting value. (e.g. if bounds are -1 to 1, and you generate -1.1, set the value to -1) 2. Use a normal distribution where the given interval covers a specified number of standard deviations. Any values outside the interval are regenerated until they lie within the specified range. 3. Use a different distribution that is acceptably close to normal. A few examples include [Truncated Normal](https://en.wikipedia.org/wiki/Truncated_normal_distribution), [Raised Cosine](https://en.wikipedia.org/wiki/Raised_cosine_distribution), or [Von-Mises](https://en.wikipedia.org/wiki/Von_Mises_distribution). The key to the first two options above is making sure the region covers an acceptable number of standard deviations (sigma). If you only encompass, for example, two-sigma, then the distributions will look unusual. If, however, you encompass six-sigma or more, then the difference will likely not be noticeable. I'd probably favour the second, although it will need to be iterated on to ensure any regenerated values are within the target limits. For the third option, you'll likely need to generate them with rand, rather than randn. Otherwise, the important thing is making sure your selected distribution is sufficiently close to what you need. If you have data to fit, that's a bonus. The truncated normal sounds the most promising, but generating it looks to be more difficult. Strictly speaking, none of the above options are "Normal", but for the right settings any of them should be sufficiently close that they will be acceptable.
Normally distributed numbers are not integer valued and they're not restricted to a finite interval. You must mean some other distribution. Perhaps you want integers distributed **uniformly** over some interval? You can get that with `randi`. If you want something more complicated, it's quite possible to achieve but you're going to need to improve your own understanding. Matlab can help you do mathematical tasks but only if you understand what you're doing. You'll have to at least understand it enough to state your question more clearly.
Then the task also says they don't have to be within some fixed interval, because normally distributed numbers are not bounded.
What exactly do you mean by interferences? This is extremely vague.
It has to do with bmp being an 8bit array. Use a different image type.
Ive been given equations of like I = the integral of (sin(kx) + sin(kx + phi_o))^2 dx K = 2pi/lambda and lambda = 1 micrometer D = the length difference and to find I(d) This has to do with optics
I don't know a lot about the bmp format but I'm assuming this is because it's a low bit depth, so you're seeing the effects of your data being rounded to the precision of the file format. If there is a way to change this property of the bmp files, the imwrite documentation should explain how to do so. A better question though, is why you're writing this data to bmp in the first place? Image formats really aren't meant to store small matrices. Or was that just an example, and you're actually storing a full size image array? In that case I'd still question why you don't use a better image format, that is better suited for your needs?
Yes, I figured that much. So you've been given an equation? You want to plot it? Is that what you mean by simulation? I wouldn't call that a simulation, really, but if it's what you want, I'd suggest you start by reading the documentation for the `plot` command.
where can i find that?
The documentation? Press F1. Or go to the Mathworks website, if you prefer.
Shit. I'm a jerk. I'm really sorry for my comment. It looks like you actually posted your code and your data before I even posted my big comment, but I mistook the timing and thought that your post came after, and so was a response to it in some way. I got frustrated that I spent a bunch of time typing up what I thought were nice instructions, and then instead of reading them you just posted some data. I realize now that I didn't actually even give you a chance to try out my instructions before making that assumption. And on top of that, had I looked at what you posted, I could have tailored my instructions to be better suited to what your file actually looked like, and saved you even more hassle. Please feel free to message me if you need other Matlab help along the way, or have questions about oceanography more broadly. Good luck, and sorry again!
This looks fantastic!
Here's a snippet that does what you ask: r = [ 10 , 30 ] ; % min and max of range s = [ 300 , 500 ] ; % 300 rows, 500 columns % assumes range is 3-sigma wide, does not clip norm_int = @( range , size ) round( randn( size ) * ... diff( sort( range ) ) / 6 + mean( range ) ) ; non_clipped = norm_int( r , s ) ; clipped = non_clipped ; % Find any points that are out of bounds, replace them with new samples from % the distribution. There is only a 0.27% chance of any entry being out of % bounds, so this won't have to run much. while any( any( ( clipped &lt; min( r ) ) | ( clipped &gt; max( r ) ) ) ) out_of_bounds = find( ( clipped &lt; min( r ) ) | ( clipped &gt; max( r ) ) ) ; new_data = norm_int( r , size( out_of_bounds ) ) ; clipped( out_of_bounds ) = new_data ; end % Display fixed histogram histogram( clipped )
What's a better image format than bmp? I can't use jpeg as I can't use compressed formats
That was an example. What's a better image format than bmp? I can't use jpeg as I can't use compressed formats
Please format with four spaces: function V = ravnoteza( x,y ) g=9.81; k1=130; l1=0.6; k2=120; l2=0.6; d=1; m=0.25; V=m*g*y+(k1/2)*(l1-sqrt(x^2+y^2))^2+(k2/2)*(l2-sqrt((d-x)^2+y^2))^2; end This question appears to be about calculus/linear algebra and not so much MATLAB specific. Perhaps it is beyond my knowledge, but why can you not calculate the partial derivatives by hand and then evaluate their values when the function is called?
If you use coder to generate a mex instead and use the MEX in MATLAB, do the results match? It's probably an issue in the custom code
It's really an optimization problem, and the goal is to make a universal method for the gradient part. Here is the link to the problem but it's unfortunately not in english, if you have any problems be free to ask for translation! [https://www.fsb.unizg.hr/usb\_frontend/files/1528448189-0-ravnoteza.pdf](https://www.fsb.unizg.hr/usb_frontend/files/1528448189-0-ravnoteza.pdf)
I see the generated `run_bwboundaries_mex`, but how do I use it in Matlab? I tried `mex label.c ... run_bwboundaries.c ... run_bwboundaries_terminate.c` but then it says `fatal error c1083 cannot open include file '_coder_run_bwboundaries_mex.h no such file or directory`
Tiff is common in some scientific fields. Really, image formats aren't a great way to transmit data. If you can't use a .mat file, can you at least use an hdf5?
In optimization problems it is even more important/beneficial to calculate analytical gradients of your merit function! It can dramatically improve the speed and accuracy of your optimization. If you really can't do that, you want to look into the method of finite differences.
Just use it like a normal function. run_bwboundaries_mex(args)
The results from the MEX matches `run_bwboundaries.m` but not the C++ code in VS
Seems there's a problem in your main.c but I don't have time to find it, sorry If you are confident the issue is in MATLAB Coder, please contact technical support
I used diff and it gave me the analytical for of the derivative of my function, but now i have a problem with evaluation of that derivative function. It looks like this: &amp;#x200B; `g=9.81;` `k1=130;` `l1=0.6;` `k2=120;` `l2=0.6;` `d=1;` `m=0.25;` `V=@(x,y)m*g*y+(k1/2)*(l1-sqrt(x^2+y^2))^2+(k2/2)*(l2-sqrt((d-x)^2+y^2))^2;` `A=@(x,y) diff(V(x,y),x)` `b=feval(A,1,1)` And for b it prints only : \[ \]
I see in `run_bwboundaries.h` that it accepts an argument of `const double im[48400]`. `matToArr(cv::Mat mat)` converts the input `Mat` into a vector, and then I did `double* lennabin_ptr = &amp;lennabin[0];` to convert it to an array. Was this done correctly?
It could be the classic column major vs row major. Try putting coder.rowMajor in your run_bwboundaries M file
I placed `coder.rowMajor` in the `else` but before [B,~,N] = bwboundaries(im); fprintf( '\nLength(B): %s', char(num2ascii(length(B)),0) ) in the M file. Using `codegen`, it says `compilation failed. input image is not an image`. I get that same error if I try the `-rowmajor` flag in the command prompt
You literally have a formula for V written explicitly. Just take the partial derivatives. This is about 45 seconds of your life.
Try transposing "input" in MATLAB, I guess. If not then I'm not sure. You can debug the MEX using Visual Studio by attaching to MATLABand see what's different between using the generated MEX and your custom code
where should I try the transpose? You mean instead of `codegen -config:dll run_bwboundaries -args {lennabind} -report`, try `codegen -config:dll run_bwboundaries -args {lennabind'} -report`? I got the same error with that
Have you read the documentation for diff? It does finite differences on a vector. If you feed it a symbolic expression it will do symbolic differentiation, but that's not something you would do every time you want the derivative, is it? If you calculate that the derivative of x^2 is 2x, and then evaluate it at x = 3 to find that the derivative is 6, would you then, if you want the derivative at x = 7, go back to taking the derivative of x^2? Of course not! You would just plug the new value in to the expression you already have.
Whatever function takes the image. The doc steps are correct, just follow from step 3 and later
I followed the steps by clicking `Attach`, I opened the C-generated `run_bwboundaries.c` file in VS, I then ran `run_bwboundaries(lennabind)` in the Matlab terminal, I set breakpoints in `main.cpp` and `run_bwboundaries.c`, then after I click Continue, nothing is happening. I can click "stop debugging" but not "continue". It doesn't appear that any of the breakpoints were even hit
I'm not sure where the error you're seeing is coming from.
Personally I'd just use a while loop and a finite difference scheme.
ODEs are solved analytically in Matlab, so long as an analytical solution exists. The function 'dsolve' solves ODEs, a variable needs to be setup for the first derivative so that the initial conditions can be included with the equation. For example, considering the second order ODE: d^2y/dx^2 + 3y 0, y(0)=1, y'(0)=2 The following commands can solve: &gt;&gt; syms y(x); &gt;&gt; Dy=diff(y); &gt;&gt; y(x) = dsolve(diff(y,2)+3*y==0, y(0)==1, Dy(0)==2)
You'll probably need to show us some of your code.
[removed]
&gt;I am setting 'JPattern' as on. What do you expect that to achieve? According to the documentation: &gt;Jacobian sparsity pattern, specified as the comma-separated pair consisting of 'JPattern' and a sparse matrix. The sparse matrix contains 1s where there might be nonzero entries in the Jacobian. Have you read the documentation at all?
You could define a buffer and calculate the values of the last n number of data. Or you could evaluate it all for all the values, but this would increase the vector length with every new sample. In short time this would made the code run slower.
I'd recommend checking out GNU Octave, it is free and open source.
I don‚Äôt know anything about psych toolbox, but as long as whatever GUI it creates uses a MATLAB figure object, you can use uicontrol to add a slider to that figure.
If you know how to program in C++, you *can* program in MATLAB, but you are correct that you'll do a lot of things inefficiently. If I were you I'd just start using MATLAB, writing programs by hook or by crook using what you know, and when you want to know a better way of doing things, google what you want to do + MATLAB. Another important thing, even for functions you know about, type `doc functionname` into your command window to read up on it, and especially pay attention to optional outputs. For instance, the function `min` returns the minimum value found in an array (naturally). But if you read the doc for it, you'll see it optionally returns the location of the min as well. I've seen so many people using MATLAB use `min` to find the min value, then use `find` to find where in the array the min value occurs, instead of just returning the location in one step.
On the mathworks website, you've got some online exercices. I think it is call 'cody'. Once you master the basic principle of coding (structures, vectorization of operations, data type) then, I think that the best way to learn is to do things. Find a suitable. (i.e. Not too complex) project and start to code. You will have to search the doc, look in forums but you will improve.
Does it need to create 2 distinct colors of static on top of an image, like noise covering the image, or do you mean you need a slider that sets a threshold to show a difference between two images?
It really comes down to getting some practice. I hardly used MATLAB at all and got a BS in ME back in 2011. I just started grad school after not having looked at MATLAB since graduating. For me, I try to do all of my homework using MATLAB. Yes it takes longer, but I learned so much just practicing with the program. Filling arrays, filling matrices, writing functions, loops, etc... were all useful. Also see if you can write your own programs to approximate derivatives and integrals. I'm sure you're a step ahead having already had experience with C++.
The function imnoise in IPT applies salt and pepper noise with varying amounts to an input image. So basically you need a slider passing the amount of noise desired to that function and to update the displayed image with the new output image.
[https://projecteuler.net/](https://projecteuler.net/) Project Euler is a good place for some problems that require engineering programming to solve.
If you have a mathworks.com account, try out MATLAB Onramp. Lots of online resources to get you started.
You know how to get to Carnegie Hall, don‚Äôt ya?
First, get a good understanding of how Linear Algebra works then learn the logic of MATLAB.
You're sending R only once, once you read it your buffer is empty
In addition to the many good suggestions already noted: 1. Use it as a calculator when you are doing some calculations you'd normally use a handheld calculator for. You probably already know all the commands and syntax you'd use for that, but it gets you in the habit of using the command line, which can be handy for debugging. And it's actually a really great calculator, particularly if you write a few super-simple little functions for things you do frequently, and/or if you do a lot of complex number calculations (e.g. impedance). 2. Challenge yourself to use few if any loops, and to vectorize calculations instead. That makes Matlab calculations run much faster. Often you don't care, but sometimes you do, so it's good to have yourself trained to work that way. And it makes the code nice a tidy and compact.
I like stormy attaways books on matlab. because matrices (matrix laboratory after all) play a huge roll in MATLAB it helps to be able to think in matrices and matrix operations and constructs that MATLAB provides that make things easier than trying to reinvent something in a C-like kludge.
Thanks for your answer! Yeah, sending R once is pretty much my goal here. Since the Arduino, upon receiving R will begin the if loop to home the scanner (means that both steppers -x and y- will go to a known position). So my problem is with the Arduino code since my Matlab is sending the R character.
You can learn matlab its very useful in upcoming trend ,There are many opening in this course .
So you're trying to continuously command one phase of the motor?
This! Check the other interactive courses too, I personally found them really useful
str2func?
To be honest, I don't understand what you mean by "continuously command". &amp;#x200B; What I want to do is, at one point, send a character from Matlab to Arduino. At the reception of this character in Arduino, the motors which were on stand by will begin to move. Is that more clear? Sorry, I'm not a native English speaker so it may be hard to understand what I'm saying.
Don't worry! First off, "if" is a statement, not a loop. So you only enter if(serial.available()) once. Now if you are never setting those digital pins to high, you're stuck commanding only one phase of the stepper. If your digital pins switch on and off, you command one phase, then the other, then you're done. It doesn't seem like that's what you want to do. If you want it to loop between your two while loops you need either continuous serial communication or to do a sort of a switch that this loops till you get a command to stop doing it.
Use it for your homework. Figure out a good workflow of either using Matlab's built in "Publish" tool, using Latex, or pasting plots and text into Microsoft Word. For your first few assignments it *will* take longer, but the payoff is well worth it. For myself, I have bad handwriting, so I like turning in typed homework, and I'm finding that many classes want me to upload my homework online anyhow. The benefits of using something like Matlab for your homework are pretty great otherwise. For an assignment that has a lot of "do the same thing but at 3.3 volts," you can just change one variable and run the code again. Same thing if you're like me and read "50 Hz" as "60 Hz" and have to redo an entire problem: just change the variable and re-run. If you're using tools like Matlab's publisher or Latex, you might not even have to fix the plot in your document, since the changes will get pushed there automatically. I'm in grad school now, and have not had a class in a long time that accepted handwritten homework. One major benefit I'm finding, is that if I need to use a concept from one of my undergrad classes, taken some time ago, I can just look up the correct folder on my computer, and find the code I'd written. It is certainly crazy to see how my coding style and capability has changed over time. Some things I've learned from looking back over old code: * Use the Matlab "spell-check" (not sure what it's called, but the yellow bars that indicate coding errors). In general, try to write code that doesn't upset this, and learn from the tips it gives. * Just because you can do a complex operation in one line of many nested statements (I'm guilty of nested 'arrayfun') doesn't mean you should. Save your future self the headache of understanding what's going on. * A lot of work can be saved by a google search of "matlab \_\_\_\_{thing to do}\_\_\_." There are so many built-in functions in matlab, and clean code will take advantage of these rather than re-invent the wheel. The documentation provided by Mathworks is very good.
Thank you very much you saved my life
I think your code should work. Im assuming your digital pins 12 and 13 correspond to homing switches, which read high when activated. If it's an optical switch, sometimes the readout can be slightly noisy and cause a digitalread command to flip between 0-1 based on rounding errors. If that's the case, your stepper will move for some short time before the while(digitalread != high) is tripped. Maybe I'm completely off here, but if that is the issue you can switch to analogread and pick a threshold value, or add a capacitor in the circuit somewhere to dampen any voltage fluctuations. As a side note, to test what commands your arduino is receiving, you can have it resend the received serial commands back to Matlab via serial.print or serial.println. then on Matlab you can read via fscanf or freadf (something like that, I forget) to confirm that your stuff is getting sent properly.
put a stop point where the error occurs so you can see what is happening. &amp;#x200B; if it is indeed a 2x1 matrix, just pull out the value you actually want from the matrix.
If you need to store function handles in an array, you have to use a cell array.
Thank you very much
Thank you very much
I made it print the value when the "start" button is pressed. Start holds the code that runs the simulation. It is a 2x1 matrix, and I need it to be in a single value, so I can process it in num2str and all the other equations. On the first run (before the user tweaks the value using the slider) the variable is a single value, no matrix.
If you have Matlab licence over your university you should also be able to take the Matlab courses from the mathworks website. They are great and very detailed. Furthermore you can also take the simulink courses. [Here is the link ](https://www.mathworks.com/support/learn-with-matlab-tutorials.html)
Can you give more details on what exactly you want to archive?
Not a lot of info without seeing the code, but I suspect you want to take the average over an axis / dimension.
Are your epochs in the third dimension, i.e., pages instead of row or column? And your first channel is the first row I guess? Then I think you would do meanchan1 = mean(data(1,:,:),3);
Have you read the documentation? If you search for `mean` this should be pretty easy.
so put a stop earlier in your code and go line by line to see where it turns into a 2x1 matrix, or just pull out the value you want from the matrix.
If you are working with EEG data I would highly suggest looking into https://sccn.ucsd.edu/eeglab/index.php it has an amazing community of researchers. Also there is a plugin called ERPlab that is made by THE master of ERP's
It was added in R2019a. Are you using an earlier version?
https://www.mathworks.com/learn/tutorials/deep-learning-onramp.html
I've excluded them before and cloned the repo to new machines with no problem.
Thanks mate! Yes this is what I found too and am working through:)
Thanks mate! This is awesome!
Exclusion is usually just left to the final users of the repos, rather than the global settings. This helps people track things on their local trees if they want to, and when they push the items, they'll not be tracked as your remote settings are excluding it. So, all in all: Exclude in remote repo, leave it to the users in the local repo.
Have you tried importing the scipy and numpy libraries into python?
What does this code do at first?
send me a message, i will help you;
Oh yeah. That must be it. Thanks!
Ooooo, I was excited to learn about strong arrays :) from the title. Eval() should do the trick for you. Will evaluate the content and return the value of it.
Haha! Thanks for the advice.
I haven't written up everything because quite frankly your: * Throwaway account * Lack of problem description * non-formatted copy+pasted code * Missing variables Screams to me that you are late to submit that engineering/physics/dynamics assignment. But... If am completely wrong, you should find the following walk-through intuitive and helpful enough to get you on your feet. import numpy as np from scipy.optimize import fsolve # Use np.zeros() to create h and v h = np.zeros(100) v = np.zeros(100) # ... # Use np.linspace() to create a numpy # array with 100 elements in the range # [0, yMax]. Depending on how you define # yMax, you will need to adjust it for # 0-based indexing (Python) instead of # 1-based indexing (Matlab) for y in np.linspace(0, yMax-1, 100): # ... # Python also has anonymous # 'lambda' functions. However, # use ** instead of ^ (^ is bitwise # XOR). fp = lambda x: (1-y/y0)**(eta-1)*x**7+b*x**6-a*x**4-b # ... # scipy.optimize.fsolve is what you # want in place of Matlab's fzero roots = fsolve(fp, 1.5) If I am completely right, good luck copy pasting that and understanding it.
Most of the translation is straightforward, but the `fzero` bit is not so trivial. I think the closest thing python has is `scipy.optimize.fsolve`, so that's a starting point. If that doesn't work, look into maybe other symbolic solvers? And the Python equivalent of anonymous functions are called lambda functions, so look up that syntax.
&gt; scipy.optimize.fsolve This is the matlab Code: https://i.gyazo.com/f94015d8b30cdfaff8ccd9be6681fa3b.png and it gives this plot: https://i.gyazo.com/bf1c0fad7197187d5f0867dd38d5bc2d.png And this is my python Code: https://i.gyazo.com/6160a544630b8da27f16f935f1a765fc.png and this is the plot that it shows: https://i.gyazo.com/f7c6d19edb8dc05eeed37f5b26342b3e.png Now, how can I edit the code so that gives me the right plot?
The code appears to be working, so thats good. You need to double check that values/equations you are creating: - I noticed in the Matlab implementation you are are using `fzero(fp, 1.5)`, but your Python implementation is using fsolve(fp, 49000)). - Your calculation for `v(i)/v[i]` is different too ( your `^(1-eta)/lambda^2` in matlab, versus `**((1-eta)/la**2)` in python). I could be wrong, but I think your `lambda^2` is outside the exponent in Matlab, but in the exponent in Python.
Hi, thanks for your concern! There's something that I don't understand, not in what you are saying but in the way that Arduino answer to this code. For me, what I wrote would have the following effect if I phrase every ligne: \-&gt; while there's nothing to transmit, just do nothing \-&gt; if there's something, then make 'a' take the value of that very something. \-&gt; test if a = condition, 2 possibilities : true or false \-&gt; a =/= condition, so we do nothing \-&gt; a== condition, so we make the motor 1 move until the switch 1 is switched, then the motor 2 until switch 2 is switched. I don't understand why should I send R continuously, in my way, it should work with only 1 sending of R since I just want my while loop to be done once. And also, why am I controlling only one phase of the motor? Did you assume it because I didn't clarify what was stepperX and stepperY? (If that so, sorry) I tried putting my 2 while loop in my setup just to see if that was working, and it worked flawlessly. So I'm guessing I have an interpretation problem here.
Hi, thanks for your answer! You are spot-on, 13 and 12 are my logical switch. But my switch is just a press button, so I think I don't need to pick a threshold value and such, but I will remember this solution as it may help me one day. I will do that to see if I enter the while loop or not. Thanks for the idea.
Code: [https://pastebin.com/CtYn1jSj](https://pastebin.com/CtYn1jSj) &amp;#x200B; Result: [https://imgur.com/a/6ZevLzj](https://imgur.com/a/6ZevLzj) &amp;#x200B; Enjoy.
^(Hi, I'm a bot for linking direct images of albums with only 1 image) **https://i.imgur.com/b0dgu7J.png** ^^[Source](https://github.com/AUTplayed/imguralbumbot) ^^| ^^[Why?](https://github.com/AUTplayed/imguralbumbot/blob/master/README.md) ^^| ^^[Creator](https://np.reddit.com/user/AUTplayed/) ^^| ^^[ignoreme](https://np.reddit.com/message/compose/?to=imguralbumbot&amp;subject=ignoreme&amp;message=ignoreme)^^| ^^[deletthis](https://np.reddit.com/message/compose/?to=imguralbumbot&amp;subject=delet%20this&amp;message=delet%20this%20epvdx18)
Check the documentation about categorical arrays, it sounds like that‚Äôs what you‚Äôd want. And try not to use eval() if you can avoid it!
Easiest way would be to use trig identities to convert to/from cartesian coordinates and plot them normally.
Definitely not. These files change all the time during run and will lead to repo bloat. Mathworks released something called "Simulink Project" * a few years ago. I would highly recommend using this alongside your source control. In particular, it manages your path dynamically on project start and can create a 'work' directory that you should .gitignore where the slprj and other temp files will go. * R2019a added a MATLAB Project feature that appears to be identical from the docs, but I haven't used it.
I guess you need interpolation. Basically, this is the mathematical process of 'finding what is between the measurments'. The Matlab function is interp1. Here is some demo code. % create an input vector with more values Xnew=linespace(x(1),x(end),length(x)*5); % interpolate Ynew=interp1(x, y, Xnew) ; figure; plot(x, y, 'r*', Xnew, Ynew, 'b') ; However, be aware that it does not improve accuracy. The information is in the data. interpolation is a way to find a value which was not measured but in any case it could be more accurate than a measurement. In practice it works well but you need to perform enough measurements so that when you plot the data, having a line connecting the dots seems to be correct. At last, you can also use a spline to connect the dots.you just need to put 'spline' as the last argument of the interp1 function.
Yes, I suggest use interpolation and you can check out the help doc on *interp1*.
Thank you I‚Äôll have a look and see if I can get it to do what I want. If not is there any other way to provide data to a lookup table for torque co troll that you know of? (Not sure how they do it in industry)
Edit a lookup table is an interpolation!! Pls could you give us more detail on what you want to control: the torque of qn electric car, a gazoline one?
Take your input data, fit a continuous spline to it, then generate a new dataset of 100 points in length from your spline. A fit might also work. Use the guide toolboxes splinefit or cftool to help you along.
I just have a small electric car(not full size) that I am making in my spare time, I have a ‚Äúthrottle‚Äù like input that I want to input to a lookup table (currently using a lookup table dynamic) and want it to output a value between 0 and 100 depending on how much I push my ‚Äúthrottle‚Äù. I can do it using 0:100 in the xdat input and a data series into ydat containing the lookup values I‚Äôve put in excel manually (100 values to correspond with xdat points) I‚Äôm really looking for a simpler/easier method to do this than writing at least 100 points (depending on accuracy) every time I want to change the torque map
So you can use a Matlab scrip to import your excel data using xlsread. With this you should be able to easily recover your original data. Then I would simply use a lookup table in your simulink model. I do not understand why you would like to have more point. With linear interpolation, you are already joining the data with some line segment. Having intermediate point does not change anything. The only way would be to use something which is non linear between the point (and you will have to check the result, sometimes it can be strange). In fact having more point does not improve the accuracy. If the data is too sparse, then instead of linear interp, you may try to do a polynomial fitting (polyfit function) to guess the polynomial function that goes thru the point. Then you will have to program that using simulink (programming √† polynomial should not be that difficult, if help needed let me know). Last but not least, if you just want to program some exponential curve, I may have some simulink code for that somewhere...
So you can use a Matlab scrip to import your excel data using xlsread. With this you should be able to easily recover your original data. Then I would simply use a lookup table in your simulink model. I do not understand why you would like to have more point. With linear interpolation, you are already joining the data with some line segment. Having intermediate point does not change anything. The only way would be to use something which is non linear between the point (and you will have to check the result, sometimes it can be strange). In fact having more point does not improve the accuracy. If the data is too sparse, then instead of linear interp, you may try to do a polynomial fitting (polyfit function) to guess the polynomial function that goes thru the point. Then you will have to program that using simulink (programming √† polynomial should not be that difficult, if help needed let me know). Last but not least, if you just want to program some exponential curve, I may have some simulink code for that somewhere...
I think I may have been a bit silly/blind. What you said in your first point made me look at my lookup table block parameters and I noticed that I had the method set to use nearest input, therefore explains why it wasn't working using just a lookup table. Thank you for your help, sometimes you just need a reminder to double check setting, I guess Simulink isn't idiot proof haha, thank you again!
Only problem now is that I get this error: Error: The lookup method: Linear\_Extrap is not supported for code generation. Block: '&lt;Root&gt;/Lookup Table Dynamic'
You could try double(categorical(my_array))
Couldn't you just use linspace to create 100 points from a beginning point to your endpoint (the 20th point)?
99/100 that you want to use `eval` there is a better way that isn't terrible.
You variables need to BE something, you can't just feedback a symbol. Start small. First thing to do is read all about the feedback function (and other functions in the controls system toolbox) Follow the examples to create a system and feedback it. Also understand what you are feedbacking, if you use the following, Feedback(g, 1) you are making a unity feedback system. This is all control systems, a little background research will be needed to understand what you are doing. But again in your specific example, g7 g6 &amp; g8 need to be actual functions. Ie s=tf('s') g7=1/s g6=s*s g8=4*s/((s*s)-3s) That should get you a result for gg1. Follow?
I think I follow. I have done such examples before, in the book, where we assign a value to g7,g6,g6 etc. In fact the original question g1 to g10 all have values. I have solved such and received the answer in the form of powers of s. However as shown in the example I am unable to obtain answer in terms of g1-g10. I think the book implies that it can be done. What do you think ?
Is it a text file? If so, `dlmread` does the work.
Never mind, dynamic lookup table won't work for my application. I need a 3-D lookup table which contains the throttle % as the x axis with torque % as y axis (Output) and different maps (To make it 3D) for different RPM's. However the 3-D parameters look even more tricky to import my excel data into. If you have any experience with these I would greatly appreciated an help/advice thank you!
First thing I would do is get rid of the semi colons and input each command line by line and see if you get the same error
I've done that . The error occurs when I try to evaluate gg1=feedback(g6*g7,g8) Not enough input arguments
What if it's not a MATLAB figure object? It keeps giving me an error saying it's not a figure object, so how do I get it to work?
I was thinking dlmread, however the file is not a .txt file it is a .fit file from a garmin
I'll assume you're aware of both [local](https://www.mathworks.com/help/matlab/matlab_prog/local-functions.html) and [nested](https://www.mathworks.com/help/matlab/matlab_prog/nested-functions.html) functions which allow you to define multiple functions within a single .m file, but with the restriction that those functions are only callable from within the main function defined first in the .m file. As to why matlab doesn't allow you to import the local function from a .m file similar to how you can in python, I'm not sure. In most cases, it seems like having either local or nested functions, or alternatively defining [private](https://www.mathworks.com/help/matlab/matlab_prog/private-functions.html) functions if there are routines you want to use broadly within a particular project, works just as well as being able to import directly from another file.
By the way do you know if uicontrol only lets you add sliders to uifigures?
Being a "text file" is not the same of a ".txt file", but indeed, a .fit is no a text file (I got an example file on the web, and I cannot open it with a text editor) If you find a software to convert .fit to .csv, you can use matlab to send keyboard inputs to control the software, using keyboard shortcuts and tabs to reach some buttons and options. It's a huge dumb amount of work, it might even be easier to do it by hand, but it's a possible solution...
Thank you. Yes, I am quite new to MATLAB, and, although I understand local, nested and private functions, I don't understand why I can't simply do a file with all the functions I want to store for later use. Coming from c++ and Python it seemed to me an obvious option, but evidently it isn't.
Anyway, thanks for all your help.
Did you check the file exchange? Sometimes people have already created code to read the file format you're working with.
You don't need to define creaal32_t yourself. It's already defined in some header file included by "getRoots.h" and other files. So your two typedef are unnecessary (at best) and wrong (at worst) Also your "#define CREAL_T" create an empty macro. CREAL_T will be replaced by nothing (replaced by an empty string) in the rest of your code, so the line with data[3] is not a definition of a variable, but an assignment. Solution (maybe, at least a starting point): Start by removing everything between typedef double real_T; and } creal32_T; Then change your definition of data. Remove CREAL_T and add creal_T. Change the definition of complex as well to define it as a creal_T instead of a ..32_T.
It is an annoying weakness of the language, but in practice it isn't really a problem.
I'm just doing this visually FYI, I don't have matlab in front of me. What are your variables g6 g7 and g8?
I have edited the post to show the remaining portion of the page. Please see if the context helps.
Copy you actual Matlab input here
\&gt;&gt; syms g1 g2 g3 g4 g5 g6 g7 g8 g9 g10 \&gt;&gt; gg1=feedback(g7\*g6,g8) Error using feedback (line 71) Not enough input arguments.
So again this goes back to what I said before, g7 g6 and g8 need to be something I. E. g7=s
Thanks. It works now However, the values are not right. `data[0].re` is -5.701,`data[1].re` is .701, whereas in Matlab the `getRoots` returns `4 1`, which is what I expected
I understand that . All I've been trying to do is to reproduce the output given in the book . The one in the g1-g10 format , as apparently the author has been able to do so . But it would seem it probably is not possible . Thank you again for your help.
I may have missed something but can't you just use the max() command in a for loop?
Okay well your issue is most likely going to be in how you set up your g variables, not with the feedback command. If you show the full commands you put in for those I may still be able to get you pointed in the proper direction
It will take the max intensity of all the cells per image. I want the max intensity of each HeLa cell. I need to label the HeLa cells and then somehow use that to get all the information. I have tried using region props... it‚Äôs kind of working now.... but the area isn‚Äôt right. So I am sceptical
when you compiled the functionSquare, you choose package included runtime or runtime downloaded from the web? if you choose downloaded from web, how did you set up the matlab runtime in docker?
and what is difference in dockerfile if I want to run in windows?
You can use function handles to wrap multiple functions in a single .m file, but it isn't elegant, at least how I know to do it.
Except when you have 15+ .m files cluttering up the directory when you only need to run one of them.
Add any functions you need to a directory on your path, and you can call them wherever you want without cluttering up any directories.
I've had something similar looking happen, I think it was back around 2011/12. I tried to use a GUI someone made, but I was using mac and they were using windows when they made it. The reason for the problem might be different from yours, though.
came across this a while back: https://maxcandocia.com/article/2017/Sep/22/converting-garmin-fit-to-csv/ it‚Äôs python, but readable enough to convert into matlab if you feel up to it
A friend had some success with the following procedure on another software (I think it was Inkscape), hope this helps! https://www.lovemysurface.net/fix-scaling-issues-older-windows-apps/
No, in practice its an awful problem and leads to lots of "addpath" manipulation to get things organized; GOBS of files for simple functions; and it urges the most basic abstraction that a programmer has to be avoided, or pushed off until much later in the project. Letting local/nested functions exist in a script is a HUGE benefit, but many years too late.
What version of MATLAB and windows do you have?
r2019a and windows 10
I‚Äôll give it a go, thanks!
Hmm. It was a bug on older versions but it's been fixed now. Contact Mathworks support?
Yeah I have an open ticket and we have tried a few things but nothing has worked yet.
In my example case I was using the files that don't have the MCR included in it since I was using the Flywheel image, which had the MCR installed already. You can also download the MCR on your local machine and copy it over when you're creating and image from a Dockerfile so you don't need to redownload it every time. &amp;#x200B; (Since this post I've successfully gotten it to work where the MCR is included in the executable, which is then installed in the Docker Image, but i haven't gotten around to writing it all up.) &amp;#x200B; In terms of Windows, it should work fairly similar, but i'd recommend using Linux. When i was first trying to get these things figured out I was doing so on Windows, but there weren't as many guides available. Additionally, since I was on Windows Home I had to use an older version of Docker.
All right mate, no bad feelings. I understood your misinterpreted frustration. I wanted to thank you for the contribution. I have not finished my personal project, but I'm trying! When I close, I'll send a print! or ask for help if I'm in an alley with no way out!
It only does all those things if you have terrible programming habits, which would cause trouble in any language.
I'm lucky that I've avoided all those bad programming habits in the the other languages I develop in (C and Python) then.
Yes I suppose so.
I can‚Äôt be much help since I did this a couple years ago in undergrad, but it can definitely be done. The solution was something along the lines of editing the mini-refprop files and removing the ‚Äúmini‚Äù prefix in some lines of code, essentially making Matlab think it had the entire thing. Of course, you still will only have access to the free components, but all Matlab functions will work. I‚Äôm going to see if I can find what I had previously done and check in later.
Sorry, I responded quickly before getting my kids to bed. There are several items that annoy me about Matlab, but the added resistance to creating functions is my biggest gripe. I spend minimal time in the GUI (I use emacs as my editor), and so compare my Matlab experience, to other CLIs. I've done my share of LISP and LaTeX coding, and greatly appreciate the ability to write functions. Matlab, by its nature, promotes quick scripts. I really have a hard time to see how it promotes good programming habits. The best options to build a library are a class, or by creating a "super" function that is a large case statement of the first (string) argument. Ick. (I've done both of these, as well as abuse of anonymous functions). The "regular" way is to just create a directory and fill it up with your mini functions. I have done quite a bit of simulation work in MATLAB and still often choose to work in Matlab. However, I also often feel that it's working against me. (the way I choose to write pseudo code with function calls then break down and write the smaller functions, etc [as I do in C or Python]; vectorizing loops [not a big deal, but after developing in Julia, I've realized how much time I spend in Matlab getting the vectorization or row/column transpose correct when I'm converting my for loops/sums in my algorithm]). Matlab has a lot going for it, but its clear that MathWorks is less promoting it as a language (which is how I use it) and more as a suite of apps.
This is a very common problem. xlsread allows reading matrix from your xls file; I do not see any problem there Matlab/Simulink allows to work with 2D interpolation (that's the commonly used vocabulary when you have z=f(x,y)) . In Matlab, you should look at interp2d and in simulink there is a 2D lookup table block. &amp;#x200B; Honestly, if you have only a 20x20 or so point, do not lose time to program the xls import if you are not familiar with it, I suggest to copy paste the data in a .m file and then manually adding the result to have a working script (i.e. add a variable name, add braquets, etc). &amp;#x200B; All this is very used in the automotive industry (and many more), so there is no doubt that you can be sucessful with Matlab/Simulink for this. &amp;#x200B; =&gt; if you provide us more info, we may hep you more, pls be more specific on what you have already done and what is the issue.
You seem like you're using Matlab in strange ways and then being surprised when it's inconvenient. I was a linux developer for gentoo for years, my everyday pc was a Linux machine with a wm that didn't even support icons. I did *everything* in the console. I wrote my thesis in latex in vim in a handful of terminal windows, two of which were running python shells. I still use the Matlab ide because it's insane not to. A lot of the other stuff you complain about really just seems like bad practices in any language.
Okay, that's a neat idea. I'll give it a go. Thanks for the response!
For me it's in bin/glnxa64, using 19a though but doubt it changed sarnex@pc /mnt/Software/MATLABR2019a $ find | grep -i libmat ... ./bin/glnxa64/libmat.so ...
Yes this can definitely be done. If you follow NIST‚Äôs guide for setting it up with MATLAB but replace all of the REFPROP references to miniREFPROP instead it will work without issue. If you can‚Äôt afford REFPROP, I would suggest using CoolProp instead. It works with the same function calls as REFPROP in MATLAB and it gives you the full functionality in terms of the fluids and mixtures available. I definitely prefer it over REFPROP these days. The only caveat to this that the MATLAB interface is simply a Python wrapper. The instructions are pretty straight forward to setup from their website though.
It's just another one of those quirks harking back to the dark ages of the 1980s. Personally if my project has a large number of global subroutines or classes, the approach I like to take to avoid cluttering up my working dir with a million and one tiny text files is to just create a package (a namespace, in matlab speak) and throw all the subroutine files in there. Other people's workflows may well differ
Any reason you can't resize myarray to a myarray{100:200}?
That's what I thought; I figured it was simply missing but wanted to be sure before pushing forward a request. Thank you.
Kudos to this post. I have 2 folders on my path for function calls. A "new or needs test" folder and a "solid" folder. Obviously my developing or quick scratch m files go in one folder and the good useful well used ones go in another. The joy with matlab (and other languages) is that you can move the files and it doesn't matter as they are both in the path.
You can do this using the app builder app. Set a slider on a figure with an axis and setup your callbacks to make a great gui.
If it isn't converging then there is a mistake in your code. That said...nobody is going to sift through your uncommented code to try and figure out what problem you are even working on. Go back through it yourself. Its there.
thank you! I appreciate the feedback.
Obviously there is a mistake in the guy's code... why else would he be on here. But I hope this Nobody fella will sift through the code soon because its awful late.
Honestly, forget the gui IMO, more effort for something you do not care about. I'll help with the file management side first. 1. Put all images into the same folder folder = pwd %current working directory, replace with new directory chdir(folder); files = dir('.jpg'); %or equivalent image file extension [n,m] -= size(files); for i = 1:n img = imread(files(i).name); %new_image = insert code to change format new_name = [files(i).name,'_crop.jpg']; imwrite(new_image,new_name); end This is half the work. Google around for cropping images to what you want, I'll figure out the rest tomorrow.
Thank you!!!!!
no worries, for the conversion to 3:2, I would just pick a certain image size and create a zero image of that size, crop your new image on top of it. So either you crop an image, or zero pad it, and it's alway the same size, this way you can handle different image sizes easily. First you need to define the number of pixels [ height, width] that you want.
imCenter= im(100:200 , 100:200)
Nevermind, I understood what I did not before. You were right, I need to continuously send R as the buffer is cleared each time. In this way, I created a while loop on Matlab : fprintf(co,'R'); a="o"; while a~="OK" fprintf(co,'R'); a=fscanf(co); end But I have one of the biggest issues on earth, I named it : "Unsuccessful read: A timeout occurred before the Terminator was reached". In fact, even though I send back an "OK" using serial.println (on Arduino side), it never arrives. Anyway, I have the same Baudrate, the same everything, I looked into the Matlab help but couldn't find anything related to me since I double-checked everything. Any ideas?
Ok so currently I have a 20x20 matrix where each row is 5% of throttle percentage and each column is the second input which has a 5mph increment up to 100 mph (Wont reach but was just a good number to go up to). I currently load this data using the 'PostLoadFcn' within the model properties: data = xlsread('TorqueMap','B2:V22'); Is this the most efficient way? The next steps for me are to add the 3rd dimension to the lookup table. I would like to have 2 modes, a normal one and a 'race' mode where my torque is just a bit sharper. I am not sure how to do this though. My lookup table currently looks like this: https://ibb.co/8M1yrzN How do I adapt this for a third input to swap it to a different 20x20 matrix when demanded? I assume the 3rd breakpoints I should allow 2 options [1, 2] but unsure how to get other data in. I also need to put a PID controller after my lookup table to smooth the change of torque demand which will just be some tuning and testing. Thank you
You can define a static method in a classdef file and put as many functions in there as you want.
Thanks, could you explain "zero image" to me? https://www.google.com/search?q=zero+image&amp;rlz=1C5CHFA_enUS788US788&amp;oq=zero+image&amp;aqs=chrome..69i57j69i61l3j69i65.864j0j7&amp;sourceid=chrome&amp;ie=UTF-8
Google 'ImageDataStore' and 'AugmentedImageDataStore'
Matlab imports images as a 2D array where each position in the array corresponds to the pixel position. The value at that pixel essentially corresponds to the brightness of that pixel, usually 0 to 255 (black to white). When I said zero image, I meant an image made up of zeros only, or a black image.
type: help zeros into the cmd line
Hello, I've used it with no problem. One thing I don't understand about your model: what's the point of the feedback from the PID output going through a delay block and then into the error calculation? The error should be calculated from the measurement.
Oh, that's kind of goofy. I was looking within `R2018b/extern/bin` instead of `R2018b/bin`. Silly me.
I assumed you needed the feedback from the PID output the determine that the desired value is reached if not the PID output will keep rising? I‚Äôm not super familiar with them so I might be wrong. The delay block was added because I was getting an algebraic loop error when trying to run on external. Would appreciate any help, thank you
The PID output only goes to your actuator. The input of the PID is the error, which is calculated by subtracting the set-point (desired value) from the actual value (measurement). The measurement is actually in the feedback loop not the PID output.
Thank you for all the answers! I think I will try to adapt to the matlab way.
I second this. I've done several school projects using CoolProp, and it's worked extremely well.
Don‚Äôt use a unit delay in continuous time.
Ok I'm having a blank mind moment with this now sorry aha. So my constant block where I choose the value I want my output to be should be on the negative part of the sum and the actual output (I don't have any real measurements as it's a simulation) is on the positive part, or the other way round? I'm sure it will all make sense to me soon haha thanks for the help!
Without it I get an algebraic loop error is the only problem with the delay
I think what you want is a low pass filter instead of pid.
Won't that only work with 1 value? I need it to do this with every random change, increase or decrease
It will always work.
Also, as you can see form the image, all lines say 'no data yet' even straight from constant, why is it not picking up any values?
could you please tell me why?
A low pass filter removes high frequency content from a signal regardless of if it is going up or down. Fast changes have high frequency components. The low pass filter will remove those. Think about how how the step response works. It smooths out the step. Same thing would happen here.
It can be done either way, it depends on whether your system has a positive action or a negative action. Let's say you're controlling a variable y and the PID output is u. If increasing u makes y increase then: error = setpoint - measurement If increasing u makes y decrease then: error = measurement - setpoint
Not a clue on how to get that to work for what I want on simulink
Thank you! I've just installed CoolProp with way less problems.
So I need a physical measurement method to put back into the loop, can I not do it in software only? (Sorry for stupid questions, it's just not going in for some reason, I've only used PID's for stopping over/undershoot previously so this implementation is new to me). I'm not sure why it works perfectly in normal simulation mode and not external. As my PID output in the normal simulation ouputs my 'measurement' (-) and the constant (+) is the desired value, the result of this is fed into the PID as the error, just a bit confused.
Try this to compare https://imgur.com/a/tuAAY67 The cutoff frequency is 100Hz in this example. It looks like you want it to be very slow from your PI gains, so maybe try 0.1Hz?
Ok so that kind of works with 0.1Hz (I get an error if I go over 2Hz). However it doesn't do what I set out to do which is to provide an output that gradually gets to the desired input rather than instantly, is this something it can do? Thanks for the help!
Sketch what you want. Input and output.
This might work: -plot the contour map across the entire plot area -plot the line (h1) - plot a line along the x axis (h2) - use the fill command to fill in the area between h1 and h2 with white. Basically you'll have a white mask overlaid on the contour plot, which should give the desired effect.
If you want to do an offline simulation (no hardware) you need to include a model that represents your system in your simulink model. This model would simulate how your controlled variable y responds to the control input u coming from the PID. Usually this model is a transfer function of your system. As far as I know you can find this function if there are differential equations that describe the behavior of the system (for example Hook's law for the spring). Otherwise you'd have to estimate it experimentally. Matlab has a System Identification toolbox for such purposes.
Ah ok that makes sense! Is there any other way that you can think of that will allow me to input a square wave and have the output equal the same vale but with a slope, therefore reaching later? Thank you again! Been really helpful!
Looks like [this camera](http://www.scopecity.com/detail.cfm?ProductID=2653) should have come with a software that runs on windows versions up to Windows XP (so good luck with that). It communicates over a serial port, so that does give you a few options. MATLAB does have some standard image protocols integrated into it, but based on their [documentation](https://www.mathworks.com/hardware-support/image-acquisition-hardware.html), it does not appear that the manufacturer of your camera supports these standards. They might, though, so some of those may be worth trying. If those don't work you basically have 2 options: &amp;#x200B; 1) Check and see if you can find an API for this camera. It is probably going to be in C or C++, but this will have serial port communications protocols handled for you. This is probably your easiest option. There is not one listed on the spec sheet, so there might not be one. Also, if there is an API, it will almost guaranteed not work within MATLAB. You will have to write acquisition software yourself in C/C++. &amp;#x200B; 2) You open a terminal and listen to the port that has your camera. If the camera has an external voltage trigger you trigger that, see what comes over the serial port, see if you can identify where your image info is, and figure out how to reorganize it so that it is a coherent image. This could be done in any language (including MATLAB), but it looks like there is no voltage trigger based on the specs I saw, so that may not work. &amp;#x200B; All that said, this camera is not very good compared to a lot of more modern options. For example, they boast that their USB 1.1 interface is almost as fast as USB 2.0. We are well past that now. If you want something at this price point that will blow it out of the water in terms of performance and ease of use, check out Ximea or Point Gray. They make some great cameras with intuitive API's and good user interfaces. Both are usable in MATLAB, and Point Gray even has specific MATLAB toolboxes. Ximea uses an industry standard format, and should also work in MATLAB.
Thanks for the tips! And yeah, a newer one would definitely be better but unfortunately this is what I'm stuck with in my lab!
The low pass filter doesn‚Äôt go to the output instantly. Are you sure you don‚Äôt just want a rate limiter?
Don‚Äôt have my laptop on my at the moment but the closest I can find online is this: http://www.swarthmore.edu/NatSci/echeeve1/Ref/MatlabCurveFit/img14.jpg Obviously it‚Äôs smooth in my model but that kind of gives you an idea. Input is the square wave
That is exactly what a low pass filter will do. I don‚Äôt see how what I showed you wouldn‚Äôt work.
When I tried what you sent, the output was near identical to input
Depends on the time scale. Instead of 100 put 0.001. The lower the number the slower the filter.
Ok I‚Äôll give it a go when I get back to my laptop. Thanks for the help!
You are quite welcome my friend! You can try to use a low pass filter with the square wave. It should make the transitions smoother and slower. Otherwise if you have a specific slope in mind, try to use the Signal Builder in Simulink. It allows you to create a signal of any shape you like.
For getting image names in a folder, check out the dir() command. For resizing images, look at imresize(). For a gui-based directory selection, look up uigetdir(). To write new images, look at imwrite(). I think that should cover it.
Where is says curl( inputs ) can you not just right click and open the curl function?
&gt;[curlx,curly,curlz,cav] = curl(X,Y,Z,U,V,W) computes the curl (curlx, curly, curlz) and angular velocity (cav) perpendicular to the flow (in radians per time unit) of a 3-D vector field U, V, W. &gt;The arrays X, Y, and Z, which define the coordinates for U, V, and W, must be monotonic, but do not need to be uniformly spaced. X, Y, and Z must have the same number of elements, as if produced by meshgrid. &gt;[curlx,curly,curlz,cav] = curl(U,V,W) assumes X, Y, and Z are determined by the expression &gt;[X Y Z] = meshgrid(1:n,1:m,1:p) So your vector J are lists of the field components at a bunch of points that are implicitly defined by the meshgrid statement that isn't actually needed. Maybe you need to use the meshgrid or equivalent in Python and figure out what those points are, so you can follow the plan in that example.
Yeah, that was one of the main pages I looked through when trying to figure out how it works in Matlab. I am using one of the last lines: &gt;\[curlx,curly,curlz\] = curl(...) &gt; &gt;returns only the curl. Where I am passing 3 n\*n\*n double matrices and it returns 3 same size matrices. That is what I am trying to do in Python.
The curl is just the determinant if I remember correctly. Or Nablus X F where F is your vector/function. You don‚Äôt need calc to find it really.
You don't provide code for how you are evaluating your polynomial function, so I wonder why you aren't using [polyval()](https://www.mathworks.com/help/matlab/math/create-and-evaluate-polynomials.html). Is there a reason you need to make it symbolic before evaluating it?
&gt; why you aren't using [polyval()](https://www.mathworks.com/help/matlab/math/create-and-evaluate-polynomials.html). This is because I didn't know it was a thing. &gt; Is there a reason you need to make it symbolic before evaluating it? I have to write a code for various methods of interpolation. Given a few data points, a set of pairs (x,f(x)), it must generate a polinomial that passes at all those different points. I just thought using symbolic would make more sense, since you generate the function, and then you can just evaluate/plot it for sets of x. Guess I went the wrong way. But in my defense I suck.
Well, there are a lot of tools in Matlab. Don't forget to congratulate yourself since sucking and asking questions are the first two steps on the path of success.
Is the camera supported in micro manager?
I'm trying to help you understand what the curl function in Matlab actually does. It is about vector fields. I think you're going to need it to understand what does vector fields are and how it's dealing with them in order to set up the right stuff in Python following the example about vector fields.I guess an alternative to understanding what it's about would be to open up the curl function in Matlab and duplicate the code inside without really thinking about what it's for.
You'll be better off not converting to symbolic if you can avoid it, and in this case you can. You'll want to look at these functions: 1. roots 2. poly 3. polyval 4. interp1 All numeric.
You are right. I thought I had an alright understanding on vector fields in calc 3 and Diff Eq but it is not really coming back to me. I am able to run through the equations and get them, but being given the 3 matrices and trying to replicate it is really throwing me through a loop.
SO changing the scale did exactly what I wanted but when I try and run this in external mode the output of the TF is always 0, I'm confused as to why that is
I've tried the low pass which again works in normal simulation but not in external mode (Just outputs 0 no matter what I input) I don't understand why it's not working
What target hardware are you using? Did you set up external mode properly?
Arduino Mega 2560, seems to work on other models (not using PID‚Äôs or filters) should I change something to allow these types of calculations?
https://docs.sympy.org/dev/modules/physics/vector/api/fieldfunctions.html#curl
Maybe try to use a discrete PID? Although I don't see why that should be necessary. Did you install the Simulink Support Package for Arduino?
Discrete PID doesn't change anything unfortunately I did yep
Hmmm I don't know. Could you share a pic of your model?
I have the PID discussed before and the filter side by side to just compare for now, but both output 0 in external mode. Both work perfectly in normal sim mode
... For _some_ A, yes. For most, no. Thing is, the eigen vectors are normalized (sum(V.^2) == [1 1]), and I don't think there is a way with standard eig to undo that...
I'm going to another country for a week for my job, so I do not have so much time. Actually, you just want to switch between two lookup table, you do not want a real 3d one. Therefore I would advice to simply use a switch fed by two diff√©rents lookup tables (although there are more efficient implementations, this one remains simple). I'm used to use a Matlab script to pr√© process all th data before compiling my model, but if you're familiar with your approach, that's fine. If you want to smooth data, pid is not the proper thing. You should use a rate limiter to calm down the joystick actions and avoid too large variations, if needed. If you have noise issue, it may be also a good idea to put a linear filter on the lookup table input (joystick). For the latest, the settings is : + numerator [1] + denominator : [1/cutofffresmq 1] The larger the cutoff frequency is, the less efficient the filtering is. Too small cutoff freq leads to slow response. So basically you just start with a large one and reduce it until the filter output is fine. More elaborated synthesis exist based on fft of your signal, but that's a more theoretical approach
real(V)
I appreciate your reply, thank you! 1. What are the more efficient methods? Happy to use a switch but I am looking to make this as efficient as possible. I am also not familiar with the approach I‚Äôm using, it just my first time doing this kind of thing. If you have any advice or help to make this better when you have any time spare. 2. My PID seems to be working faster/more smoothly than a rate limiter. Friends of mine seem to be set on using a PID as when testing in industry the small changes and jolts in the throttle the PID picks up the changes a lot more smoothly. But we certainly are not experts, maybe it‚Äôs a case of trying different methods to see works better on the physical model Thank you for the help! Hope I can get there eventually aha
For ease of code consistency I leave the call backs named what they are. Within the call back function I would call a new function which does all the heavy lifting. This way you can call the function from other buttons or functions as well and can pass extra or less things into it. This also makes it much easier to debug the call back and the function going forward.
Is the arduino set up to expect the same?
Hi deterjoforaar, Try double(V) maybe? This will convert it to a MATLAB double precision number . It would be kind to let me know what it has given to you. Thanks.
Hi, If your ultimate goal is just to plot that function, you can just set a vector of x values with enough points in between the min and max values (to have a smooth curve), then define the y vector such as y= a\*x\^2 + b\*x + c and plot(x,y).
Unfortunately, it didn‚Äôt work. It gives the same answer as in eig(A)
Then I would have to mess with matlab's own functions and make sure that my function is in matlab root or somewhere where it can be found from anywhere. Feels counter-intuitive to do it like that because this is the only case where I need to have this change. Also it is not very portable.
Add the function as a subfunction within the app then
I am trying to do just that. So that the callback refers to my own function within my script file but it does not seem to work the way I assumed it would. Or did I misinterpret what you meant?
 if (myVal_lastPass ~= myVal) (your var changed) end myVal_lastPass = myVal;
Hey! &amp;#x200B; Thanks for answering. If I do this I just get an error "Undefined function or variable 'myVal\_lastPass' because it's called before it's defined. How do I fix this? Sorry if this is a dumb question, I'm brand new to programming.
You need to define myVal_lastPass somewhere before then. You could just do like myVal_lastPass = myVal right after you define myVal
But since this code is in a while loop doesn't this always result in myVal\_lastPass always equaling myVal? Therefore the code inside the if statement never gets executed and it needs to be.
Is it possible for you to post your entire, unedited code? Or is it too long?
I'll post the while loop for you. &amp;#x200B; %% Loop for scale loop t0 = GetSecs; answer = 0; while answer == 0 \[x,y,buttons,focus,valuators,valinfo\] = GetMouse(screenPointer, 1); if x &gt; rect(3)\*scalaLength x = rect(3)\*scalaLength; elseif x &lt; rect(3)\*(1-scalaLength) x = rect(3)\*(1-scalaLength); end &amp;#x200B; %Defines the position of the slider on the scale scaleRange = round(rect(3)\*(1-scalaLength)):round(rect(3)\*scalaLength); % Calculates the range of the scale scaleRangeShifted = round((scaleRange)-mean(scaleRange)); % Shift the range of scale so it is symmetrical around zero position = round((x)-mean(scaleRange)); % Shift the x value according to the new scale position = (position/max(scaleRangeShifted))\*100; % Converts the value to percentage &amp;#x200B; %Makes the slider start at 0 and end at 100 if position &lt; 0 position = (position + 100)/2; elseif position == 0 position = 50; elseif position &gt; 0 position = (position + 100)/2; end &amp;#x200B; %Calculates the noise level. The noise level ranges from 0-0.20 so we %divide by 500. &amp;#x200B; noiseLevel = position/500; noiseLevel\_lastPass = noiseLevel; &amp;#x200B; %Apply salt and pepper noise to the image noise = imnoise(image, 'salt &amp; pepper', noiseLevel); stimuli = Screen('MakeTexture', screenPointer, noise); if (noiseLevel\_lastPass \~= noiseLevel) % Draw image if provided if drawImage == 1 Screen('DrawTexture', screenPointer, stimuli,\[\] , rectImage, 0); end end noiseLevel\_lastPass = noiseLevel; &amp;#x200B; % Drawing the question as text DrawFormattedText(screenPointer, question, 'center', rect(4)\*(scalaPosition - 0.1)); &amp;#x200B; &amp;#x200B; % Drawing the scala Screen('DrawLine', screenPointer, scaleColor, midTick(1), midTick(2), midTick(3), midTick(4), width); % Mid tick Screen('DrawLine', screenPointer, scaleColor, leftTick(1), leftTick(2), leftTick(3), leftTick(4), width); % Left tick Screen('DrawLine', screenPointer, scaleColor, rightTick(1), rightTick(2), rightTick(3), rightTick(4), width); % Right tick Screen('DrawLine', screenPointer, scaleColor, horzLine(1), horzLine(2), horzLine(3), horzLine(4), width); % Horizontal line &amp;#x200B; % The slider Screen('DrawLine', screenPointer, sliderColor, x, rect(4)\*scalaPosition - lineLength, x, rect(4)\*scalaPosition + lineLength, width); &amp;#x200B; % Flip screen onsetStimulus = Screen('Flip', screenPointer); &amp;#x200B; % Check if answer has been given if strcmp(device, 'mouse') secs = GetSecs; if buttons(responseKey) == 1 answer = 1; end elseif strcmp(device, 'keyboard') \[keyIsDown, secs, keyCode\] = KbCheck; if keyCode(responseKey) == 1 answer = 1; end else error('Unknown device'); end &amp;#x200B; % Abort if answer takes too long if secs - t0 &gt; aborttime break end end
And exactly what variable are you looking ot see if it changed?
noiseLevel
Pid is a controller for a closed loop control. When you have a measurement and a control signal available, it allows computing the control signal in such a way the output follows a given reference/set point value. So i do not think a pid could be used in your case... But I may not have a correct understanding of your pb
Okay, I think I understand your question. First, you were saying that myVal_LP wasn't defined, so you couldn't run the script. That code would be something like this: while (condition) myVal = (whatever); if (myVal ~= myVal_LP) (myVal has changed) end myVal_LP = myVal; end Right, so we need to define myVal_LP before we do the comparison in the if statement. Okay, so let's throw that definition outside of the loop. myVal_LP = 0; while (condition) myVal = (whatever); if (myVal ~= myVal_LP) (myVal has changed) end myVal_LP = myVal; end Okay, now we face a different problem. The first iteration of this loop will go into the if statement (unless myVal happens to be 0.) You could forcefully skip the first iteration by doing something like this (kinda janky, but it's okay): count = 0 myVal_LP = 0; while (condition) myVal = (whatever); if (myVal ~= myVal_LP) &amp;&amp; (count&gt;0) (myVal has changed) end myVal_LP = myVal; count = count + 1; end This way, the first iteration is basically moot. You're just setting the value of myVal_LP and myVal. But in the next iteration, if myVal gets changed, then you'll break into the if block.
I don't really understand what you're wanting. Do you want something like (based on A,B, and C that you provided): 1 0 3 4 0 6 7 0 0 10 0 0 0 0 0 0 2 3 4 0 0 7 8 9 10 0 0 0 0 1 0 0 0 0 6 0 8 9 0 11 12 0 14
I think it‚Äôs because I don‚Äôt need a measurement, I just need it to ramp up to the desired input rather than getting their instantly. A PID using its output as the ‚Äòmeasurement‚Äô seems to do this quite smoothly
minVal = min(vector1); maxVal = max(vector1); newVec = [minVal:maxVal maxVal-1:-1:minVal]
Put an ad in the local newspaper. &amp;#x200B; Based on the information you've given us, that should work.
NewVec = max(vec) - vec + min(vec)
Thanks a bunch! It worked and I really appreciate your help.
Or NewVec = range(vec) - vec
oo, looks like we're showing different options. I got one: revVec = [vec(ceil(numel(vec)/2):end) , vec(2:ceil(numel(vec)/2)) ]
What if I only wanted to apply this to a certain section of the vector? For example, turn vec \[8 3 6 1 5 4 3 2 1 2 3 4 5\] into newvec\[8 3 6 1 1 2 3 4 5 4 3 2 1\]
Loop through the starting index like (vec(ii:end)) and check if it's equal to fliplr(vec(ii:end)), if it is, then split your vector into two, the pyramid vector and the non-pyramid vector. apply this line to the pyramid vector and recombine it with your non-pyramid vector
How come no one is using circshift in their solution?
Because everyone thought of a sollution with a different approach first i guess
I meant no disrespect to anyone else, cool to see other approaches. It just jumped out to me as a circular shift operation I guess.
Well, no disrespect to you too, but to me using an index jumped out first.
So basically your are programming exactly the same think. If you use a pi (i. E. Pid with no d) with its output as measurement, the result actually a first order linear filter as I explained.... So its algebraic equivalent and the gain kp is the cutoff frequency.
Ah ok, I did not know that. That actually makes sense now you say it. Thank you for your help, really appreciate it!
this the right answer thanks a lot bro
That's really strange because it worked with me when I tried it with your same matrix. Even without the double command, the eigenvectors terms are double precison numbers.
I don't understand what you mean behind "set up to expect the same"? Both the Arduino and Matlab are linked by using a serial port. They both have the same BaudRate (which is set to 9600). I set the Terminator (so the end character) to be a carriage return and I'm supposed to send OK followed by a carriage return to Matlab.
It's seems like you've set the output display format to rational before. Use the command : format short and calculate your eigenvalues again. It must work this time. Let me know about it.
How about use fliplr ? [fliplr(x(1:6)), fliplr(6:10)] for the 11pt pyramid for example.
Try sending it from only one side. Or use a digital pin as an OK or NOK input. If you have the serial port open on Matlab and arduino and the same time only one can use it.
You're forming this in kind of a weird way. Why do you want the start command (sending r) to come from Matlab and end command (sending OK) to come from the arduino ide? But anyway, you can still do it this way. I'd recommend using dread instead of fscanf though. And define your size and data type. Make sure your object is open when you're trying to read. If you're trying to read an empty or non-existant buffer you'll get this error.
If you still have this issue, check what you have in your buffer. You might be reading "OK" partially or along with other characters in which case you're getting it but not reading it properly. This is why defining size or parsing your received information correcting is very important
Right on the money. PID is overkill in this case. &amp;#x200B; You want a [discrete low pass filter](https://www.mathworks.com/help/physmod/sps/ref/lowpassfilterdiscreteorcontinuous.html). Lots of ways of [implementing this](https://www.mathworks.com/matlabcentral/answers/37462-a-simple-lowpass-filter), depending on which toolboxes you have installed. If all else fails, try implementing it in MATLAB and use a MATLAB Function Block.
You want to see a p code in matlab?
you can't. that's the point. You might be able to look through it and get some ideas. Also next time read the sidebar before asking a question. See the link: [asking a question](http://www.catb.org/esr/faqs/smart-questions.html#intro)? click it.
Try this solutions. https://au.mathworks.com/matlabcentral/answers/290827-how-to-run-a-p-code-matlab
variable1 = abc.variable1
In the import tool there should be an option for column headers or the like to set each column or row to a variable name. If that doesn't give you what you want, I have found that the read table function and the help associated with it is really nice. Although it isn't a gui, it sure does alot for importing data.
Yes but it does seem to need some file name in the import tool window.
if there is a way to do for several variables at once.
Like [this?](https://www.mathworks.com/matlabcentral/answers/94573-how-can-i-dynamically-extract-fields-from-a-structure-and-create-variables-in-the-matlab-workspace-u)
Let me work on it.
datenum [https://www.mathworks.com/help/matlab/ref/datenum.html](https://www.mathworks.com/help/matlab/ref/datenum.html) works
So I have this one cell array where each row is a subject. Every cell is a string and every row x column intersection is a different measurement for that row's subject. Columns are in sequential order for each subject. The problem is that not all subjects were measured on all days. I need all subjects who were measured on the same date to be in the same column. &amp;#x200B; Within each cell is an identifier that marks the date that measurement was taken. I'm tying to reference those identifiers and shift all the cells so that if a subject wasn't measured on a certain day, the row x column intersection for that subject on that day is empty. &amp;#x200B; Does that make any more sense?
So right now, you could have a dataset like this? Will: 58%, 01/01/2019 | 75% 01/03/2019 | 77% 01/04/2019 | 90% | 01/06/2019 Jill: 62%, 01/02/2019 | 63% 01/03/2019 | 70% 01/06/2019 Bill: 44% 01/01/2019 | 63% 01/04/2019 | 66% 01/05/2019 | 75% 01/06/2019 And from that, you're looking to seperate your data like so: ------------------------------------------------------- | SUBJECT | Jan1 Jan2 Jan3 Jan4 Jan5 Jan6 | ------------------------------------------------------- | WILL | 58 N/A 75 77 N/A 90 | | JILL | N/A 62 63 N/A N/A 70 | | BILL | 44 N/A N/A 63 66 75 | ------------------------------------------------------- Is this right?
the (newer) App Designer gui‚Äôs have these icons on by default for the uiaxes... not sure about the older GUIDE axes.... there are more differences between axes and uiaxes
I have historically just put an 'inspect' button in my GUI's that recreates the axis in a new figure to make these features available. Not the best workaround, but better than nothing.
I intially learnt by just reading through the code generated using guide, but I would reccomend looking at MATLABs appdesigner (its much easier!)
Seconding the recommendation for the AppDesigner if you're using a more recent version of MATLAB. I believe 2016b or later.
This might help: https://www.mathworks.com/help/vision/ref/vision.peopledetector-system-object.html#mw_6c03411a-3516-4f90-a051-e6128dbe36fb
Example projects help so much! Go to the mathworis website, search app designer, and go to the examples. Such a great way to start.
Hi Sir! That's because I'm thinking of controlling a CNC machine with an app designed in Matlab. In order to do that, I need Matlab to send the start command (corresponding to a button for example), and Arduino to give a feedback when it has finished its task.
I did that. That was exactly what I was missing. The problem was not coming from Matlab, it was from the Arduino side. It was not reading the good command. The [serial.read](https://serial.read) was too slow compared to the Arduino processing. Now it is solved. Many thanks for your concern over my topic!
http://imgur.com/lsSoCwS Heres the question if someone needs it.
You need to calculate distance from given point (xp, yp) to every customer location, distance between these locations is d. And so customer have 6 points you need to have 6 distances for every (xp, yp).
But doesn't d(k) mean that from the vast array d only the kth element will be returned? If so then why we need the kth term?
You can create an matlab function executable with matlab compiler. This compiles the function into an exe file which can run after a matlab compiler runtime is installed on the OS. This allows you to run on any OS without a license or Matlab installed (just need to confirm if the functions you are using are supported by Matlab compiler, which most are).
Yes, you can generate compact code using Embedded Coder. It‚Äôs used all the time in the automotive industry.
Yes, it looks like indexing the distance with k is unnecessary. The distance variable is only used once in the subsequent line. It would be completely fine to remove the index from d. The only reason to keep it indexed with k would be if you want to maintain the vector of customer distances for analysis/debugging/plotting purposes. So while it's not necessary for the existing code to run properly, it may be helpful to keep that information around for another purpose.
is your objective to learn using MATLAB with GNU parallel or is it to run the same MATLAB code in parallel? Your code works fine on my computer with version R2018a. I tried parallel 'matlab -nodisplay -nojvm -r "x={}"' ::: {1..10} and that worked fine as well.
To run MATLAB code on Raspberry PI or Arduino, you should download the Raspberry PI or the Arduino support package. (you actually don't need a ML Coder or Embedded Coder license for these two specific target, only MATLAB) I'm not completely sur of what a DCNN is (I guess some sort of convolutional neural network, but what's the D? Also I'm more in the Simulink side), so you should check the support package page to see what's supported as unfortunately, not all functions can be used (or give it a try, you can download these for free) To download, in the MATLAB Toolstrip, click on "Add-ons", and search for Raspberry Pi) A few links: - [the support package page](https://www.mathworks.com/hardware-support/raspberry-pi-matlab.html) - as you want to run everything on the Pi, [this page should help](https://www.mathworks.com/help/supportpkg/raspberrypiio/run-on-hardware.html) but look around for more doc.
And can you explain how we assumed in line 6 the min_cost to be 100000? In the question nothing is such sort has been given? Am i missing something?
Well its reading two people as one and one person as three so idk if thats the code you want
That's just a programming trick. You assume a very high value (higher than you would ever expect to see in your actual results). Then you compare your current value to the lowest value so far. If it's lower, you set your minimum value to the current value so that it becomes the new minimum value. It's a valid approach but not the best way to solve the problem.. Especially for matlab. A better approach is just to store all of the values in a vector then use the min function to find the minimum value of your set.
They are trying to find the minimum by comparing each total cost they calculate the previously calculated minimums. On the first "loop" they need some initial value to compare it to, so they start it at a relatively large value. Personally, I would have approached the problem a different way, trying to avoid the use of for loops and if statements. I'd probably use somewhat high fidelity meshgrid (maybe like 0.1 or 0.01 miles) on something like "cost\_total = sum\_i (0.5 \* V\_i \* sqrt( (x\_i - x)\^2 + (y\_i - y)\^2 )) " then finding the min value(s). Plus you could then do a pretty 3-D plot to see where different minimums are if you need to take other factors into account.
Thank you ! Based on my research some referred to CNNs as Deep Constitutional neural Networks. Yeah i tried both packages, thankfully university pays for both, but the issue is that i need to be always connected by wire or if any wireless communication mode.
This is excellent. My question maybe dumb, but any recommendations on what boards i could use to execute the compact code? I'm guessing definitely not arduino but perhaps Raspberry pi ? thank you !
Oh Excellent! So i can generate the .exe of my function and the OS (windows or linux perhaps) can just run them without MATLAB. Thank you very much. Have you tried this yourself ? If so i am interested to know what hardware did you use. Thank you again.
It's calculating the cost for the "kth" customer. d(k) is the distance to the "kth" customer. V(k) is the volume of material being delivered to the "kth" customer. Honestly, I'm fairly certain you could just remove that for loop over k and just do: d = sqrt( (xloc-x).\^2 + (yloc-y).\^2 ); cost = 0.5 .\* d .\* V; cost\_all = sum(cost); You could do syms x y then cost\_all could be a symbolic function where you could just input different x and y, using meshgrid. Then do min() across both dimensions, get an index and use that to find the x and y for the min. &amp;#x200B; FYI, it looks like that code has a typo (it says c = d\*V, where it should be c = 0.5\*d\*V), though it doesn't affect the answer (best x,y location for minimum cost).
Well, the code generated is pretty compact and efficient and is just standard C or C++ code. As usual it will depend on the complexity of your model and the capability of your hardware. If you're trying to perform image identification, then I imagine you would need something more along the lines of an RPi. However, I suspect there may be functions you need to abstract yourself - not sure if neural networks are supported or not.
Thank u so much. That helps alot. Although i mentioned i found that code on the internet cuz i didnt know how to go with the problem.
I am sure kind stranger u know very well and better than me. While for me, i am a beginner. With u geniuses' help i would also get to be good
It works for me in Matlab 2019a I also tried Octave 5.1 with `parallel 'octave --eval "x = {}"' ::: 1 2 3` and worked too. [Btw, I wasn't aware of parallel, looks interesting!]
I have done this many times, but only ever used on various other PCs. But there is no reason I can think of why it shouldn't work other places as well (they advertise usage in servers etc...).
I have done this many times, but only ever used on various other PCs. But there is no reason I can think of why it shouldn't work other places as well (they advertise usage in servers etc...).
What version of Matlab are you using?
2018b
2018b
Why curly brackets? And not []
Can I find the full code somewhere so I try to repeat the error on my PC?
I do all of my GUI completely by code. I've come up with a few things to help: 1. Using an object-oriented approach in general makes it much easier to manage GUI handles and retrieve/lookup fields. 2. Use some math to figure out the specific layout of things. I tend to use normalized window components, so I'll set some standardized sizes like margins, spacing, etc., and compute where each element goes so they can be well-aligned. 3. Do some practice examples with multiple sliders and windows. Learn to reference the fields and values. For example, if you have a text window and a slider, learn how to write callbacks suck that when the callback for the slider is called (for example), it updates the field as well, and vice-versa. This way you can keep components linked. Here's a sample class to get started: classdef sample_GUI &lt; handle properties h_figure; % handle to figure h_slider; % handle to slider h_textfield % handle to textfield end methods % constructor function obj = sample_GUI % create the figure window obj.h_figure = figure('Units','normalized','Position',[.3 .3 .4 .4],'MenuBar','none','NumberTitle','off','Name','Sample GUI'); % add a slider obj.h_slider = uicontrol('Units','normalized','Style','slider','Position',[.05 .05 .15 .05],... 'SliderStep',[0.1 1.0],'Min',0,'Max',100,'BackgroundColor','w','Callback',@obj.slider_Callback); % add the associated textfield obj.h_textfield = uicontrol('Units','normalized','Style','text','Position',[.05 .11 .15 .05],'String','0.0','BackgroundColor','w'); end % sample callback for our slider function slider_Callback(obj,h_slider,~) value = h_slider.Value; obj.h_textfield.String = sprintf('%g',value); end end end
Matlab/embedded coder
where are you talking about? For `codegen`? Because that's what I used for other Matlab code I was able to successfully convert to c++
The full code for `simple_nlm` is at: https://www.mathworks.com/matlabcentral/fileexchange/52018-simple-non-local-means-nlm-filter The code I used as a substitute for `im2col` is: function B = im2col_substitute(A, neigh) m=neigh(1); n=neigh(2); [nrow, ncol]=size(A); B=zeros(m*n, (nrow-m+1)*(ncol-n+1)); colnum=1; for j=1:(ncol-n+1) for i=1:(nrow-m+1) for c=1:n B((m*(c-1)+1):m*c, colnum)=A(i:(i+m-1),j+c-1); end colnum=colnum+1; end end
The Deep Learning toolbox is fairly easy to use AFAIK.
For the hobby part have a look at this video tutorial. Its machine learning then deep learning and then both. https://www.mathworks.com/videos/object-recognition-deep-learning-and-machine-learning-for-computer-vision-121144.html
We put an Easter egg into a compiled matlab executable that our engineers and some customers use. We grabbed several dozen Chuck Norris jokes but replaced the name with our VP of engineering and had them show in random order when you clicked a certain button in sequence. Never forget that our VP of engineering can divide by zero.
At a party we started plotting weight vs height of all of us and implemented a linear regression manually. The Skript Outputs, after manual input, if someone is to small or to tall for his weight. Since we had some pretty weird height weight combinations, and we got pretty drunk the outputs were quit funny. Btw. I am to tall for my weight üòÄ
Oh another one comes to mind: A friend and I were killing time on a rainy friday afternoon and tried to save al possible reasons by the "why" function to a text file. At some point we started calculating how much disk space that would take. Gigabytes of text, apparently.....
Oh boy, now I need that in my scripts. Could you post the code?
There closest I have done is put code in to email when the program finishes it crashes. Although when I finished my senior design project early my advisor made me add a pointless GUI to it to (it was a neural model). Taught me a very important lesson about form deadlines.
*too
It should be done using compound interest u are using simple intrest
So I gotta use connect to determine the transfer function for this. I've looked at it using help/Matlab forums, but I can't seem to figure it out. I've declared the two matrices, but the connect function says that I need a Sum = sumblk () as well. Can someone point me in the right direction? Thanks
Im just imagining that engineer who takes his Laptop to a party and then writes fun regression scripts while the people around getting wasted
I made a command that allows you to change font sizes by typing `font 16` or whatever size you want. It became very useful in research meetings.
The SMS code actually sounds useful...
Obviously not a native speaker, but thank you!
This is what I did. I warn you, it is the opposite of elegant, but it minimizes the probability of fucking up your variables. &amp;#x200B; Standard use of audioread is [Y, Fs] = audioread(filename); returning some signal Y being the sound and Fs being something like the sample frequency, I assume. Now: Put an mp3 in a folder that is always on your pas. I have a folder with random useful crap, scripts and functions. Do the thingy above for your file: [Y, Fs] = audioread(wilhemscream.mp3); Pull Fs and write down/memorize, ask your roommate to spell in number vermicelli. let's assume it's 44100. then the following line in your code does the trick. sound(audioread('wilhelmscream.mp3'),44100); without fucking up any variables you had and which were named Y of Fs.
Was a Party in our dorm so the next laptop was close by üòÄ Interestingly the diversity of people that got interested in this ‚Äûproject‚Äú at the was quit large.
After initialization, try dx(1,1:3000) =0.5
dx(1,1:3000) = 0.5; Or since it is a vector you can use the array indices instead of the row-column indices. dx(1:3000) = 0.5;
I combined clear, clc, close all, and bdclose all into a utility called "get_ready". I used it in front of a big customer and they thought I had access to secret functions.
Another story comes to mind: A guy who worked at Delft Hyperloop apparently wanted to take his girlfriend to a concert. A radio station was giving away tickets to the fastest caller at a song by this band. So he built something in Matlab (I think) that listened to that station all da, recognised a song real fast, called him and the radio station and connected him. That dude didn't win those tickets. He earned them.
Do you still have this? This would be amazing for meetings!
Yes. Give me a couple of days and I'll post it to GitHub or something.
After analyzing 8000 rows of data and drawing the curve for the heat exchanger and other diagrams (being general on purpose)...the script would throw a pop-up msg with random facts like "a human being swallows around 600 times per day" (true story) etc.
I had a lot of assignments in Matlab back in the day and it was usually 12% like figuring out how to do the actual assignment, and then 88% making minute changes to my plots that made no real difference. I was doing a Least Squares estimator problem the iteratively estimate the location of an aircraft in a simulation. I wanted it to show each estimate as it covered, but I also really wanted it to have a number that told you which iteration it was even though it really obvious because closer ones were pretty much always newer ones. Well, I spent probably 4 hours creating a separate variable with location of each estimate and adding a function that counted which estimate it was, plotted the text, and then, by far the longest part, made very small adjustments to the location of the text relative to location of the estimate so it was right next to it, but not on top of it and not too far. Like literally hours moving this stupid number like three pixels at a time.
Lol been in that position for my master's project. Professor wanted at least 50 more pages in the report, so I just started simulating or analysis anything related I could think of.
Definitely The Price Is Right Horns upon error. Also lots of pause; drawnow when shit just won‚Äôt animate properly.
Double pendulums have just been trying to show their affection to us this whole time
Wow, thats cool. Can you share some experiment details.
You can send yourself a text message via email, so you use the [send mail](https://www.mathworks.com/help/matlab/ref/sendmail.html) function. Run your script in a try-catch block. If you end up in a catch send a text saying "oh no" and if you get through the try/catch send a text "oh yeah"
Very, very relatable. I always spend WAY too much time on making the script easily useable, in the process making it so horribly complicated that is is not useable in any way any more.
A parametric equation is better in this case : t = linspace(0,2*pi,100) x = cos(t) y = sin(t) figure plot(x,y)
Huh? Are you talking about aliasing or stability? [https://en.wikipedia.org/wiki/Nyquist\_rate](https://en.wikipedia.org/wiki/Nyquist_rate) [https://en.wikipedia.org/wiki/Cfl\_condition](https://en.wikipedia.org/wiki/Cfl_condition)
Yeh the equation is r^2 = x^2 + y^2, not just f. Agree with the parametric approach.
Please don't do homework for people.
Stability and accuracy of the model. I am basically modelling a pendulum, but it is also an axial spring-mass system (because of the stiffness of the rope). Accidental storage of energy is solved by some artificial damping. Basically, I am looking for an easy way to justify not making the time step smaller which i more clever than "Oh I ran it and it doesn't crash. CFL does not apply as far as I understand the principle, as I did not dicretisise space. Sampling is not an issue; dealing with ocean waves so very much slower. My concern was the natural period of the axial spring matching the time step, or even being smaller. That would cause problems (or so I assume)
Very cool. You should plot the energy to get an idea of the integration accuracy
This is very interesting! I‚Äôd love to know the answer too üòÅ
Searching through the documentation, it doesn't look like [GANs](https://en.wikipedia.org/wiki/Generative_adversarial_network) are directly supported in the Deep Learning Toolbox. There may be some sort of workaround for creating a GAN in MATLAB, but I'm not sure what that would look like.
**Generative adversarial network** A generative adversarial network (GAN) is a class of machine learning systems invented by Ian Goodfellow in 2014. Two neural networks contest with each other in a game (in the sense of game theory, often but not always in the form of a zero-sum game). Given a training set, this technique learns to generate new data with the same statistics as the training set. For example, a GAN trained on photographs can generate new photographs that look at least superficially authentic to human observers, having many realistic characteristics. *** ^[ [^PM](https://www.reddit.com/message/compose?to=kittens_from_space) ^| [^Exclude ^me](https://reddit.com/message/compose?to=WikiTextBot&amp;message=Excludeme&amp;subject=Excludeme) ^| [^Exclude ^from ^subreddit](https://np.reddit.com/r/matlab/about/banned) ^| [^FAQ ^/ ^Information](https://np.reddit.com/r/WikiTextBot/wiki/index) ^| [^Source](https://github.com/kittenswolf/WikiTextBot) ^] ^Downvote ^to ^remove ^| ^v0.28
Advice to potential students: Never copy &amp; paste code from the Internet without at least attempting to understand what it does. That said, the following code from 2016 is titled suggesting that it does GANs in Matlab. https://github.com/layumi/2016_GAN_Matlab
Do yourself a favor use python for machine learning
Focus on aliasing then, I find it's the more stringent requirement for most systems in practice. For a thesis you should still talk about numerical stability, especially when using explicit methods--or justifying the use of implicit methods. Error accumulates.
I just showed this code as an example. I basically want to be able to plot any function in terms of 2 variables. Hope this makes sense
Well that‚Äôs fine, your code will do that. It just won‚Äôt be a circle.
Can you integrate both or would it be better to be exclusively python?
I actually did that to choose the ode-Solver and of the 7 explicit solvers only ode113 and ode23tb were anywhere close to a constant total energy. [Energy Plot.](https://imgur.com/a/t83KbhO) As you can see it looks like ode23tb is better but I also tested other initial values. And most times ode113 had better results. I should probably mention that using other solvers gives totally different plots, that aren't even close to a heart. So i doubt that you could ever make a double pendulum trace a heart IRL.
There isn't really much to explain. I was testing different initial values in the double pendulum simulation I made for my university course and noticed a heart like shape at some point. So i plotted again and again with very small changes to the initial values until the heart I saw was as clear as it was gonna be, within reasonable amounts of testing.
 I actually did that to choose the ode-Solver and of the 7 explicit solvers only ode113 and ode23tb were anywhere close to a constant total energy. [Energy Plot.](https://imgur.com/a/t83KbhO) As you can see it looks like ode23tb is better but I also tested other initial values. And most times ode113 had better results. I should probably mention that using other solvers gives totally different plots, that aren't even close to a heart. So i doubt that you could ever make a double pendulum trace a heart IRL.
^(Hi, I'm a bot for linking direct images of albums with only 1 image) **https://i.imgur.com/Wo7SXbe.png** ^^[Source](https://github.com/AUTplayed/imguralbumbot) ^^| ^^[Why?](https://github.com/AUTplayed/imguralbumbot/blob/master/README.md) ^^| ^^[Creator](https://np.reddit.com/user/AUTplayed/) ^^| ^^[ignoreme](https://np.reddit.com/message/compose/?to=imguralbumbot&amp;subject=ignoreme&amp;message=ignoreme)^^| ^^[deletthis](https://np.reddit.com/message/compose/?to=imguralbumbot&amp;subject=delet%20this&amp;message=delet%20this%20eqjtgbr)
There isn't really much to explain. I was testing different initial values in the double pendulum simulation I made for my university course and noticed a heart like shape at some point. So i plotted again and again with very small changes to the initial values until the heart I saw was as clear as it was gonna be, within reasonable amounts of testing.
Reminds me of style transfer: https://github.com/jcjohnson/fast-neural-style
Nice my dude! What are your integration tolerances?
There would be no reason to do this. Just use one language.
Not sure why this is getting downvotes. Python is the language used by ML researchers, and therefore a task using state of the art ML will be easier to do in python.
Direct support for GANs is not present but you could try a very simple kind of generative network. This probably will give you extremely poor results for anything even slightly complicated to generate but I've tried it for mnist digits and it worked okay. So at the outputs just put relu units and at the inputs put the labels. So it would sort of learn to generate images when given labels. So for example put 784 units at the output to generate a 28x28 image. The input would be for example an array with 10 elements each corresponding to a number. Sort of a reverse NN if you think about it. If it's anything more complicated, I'm afraid you'll have to use a GAN. And python will always be a better option for ML/ DL so maybe switch over to that if you're looking to do more complex projects.
Neural network research is very prolific today. There are only two Matlab releases per year and converting and debugging existing pyhton code to Matlab can be very time consuming (i assume). So do not expect new neural networks things to be released within Matlab very quickly. My feeling is that the deep learning toolbox is a nice thing to solve basic classification or other 'simple' problems. If you want to do more advanced stuff or reseach, I would go for pyhton and start using an existing code.
The time vector isn't setup correctly: time_vector=(120);%creating initial empty vectors time_step=0.01; The numbers used for the time range are 0 to 120 minutes. The time step is given as 0.01 minutes, which means there should be 100 samples in a minute. The time vector being used only has 120 samples which would be 1.20 minutes.
Wow thank you so much! I completely overlooked that but that makes so much sense, it looks infinitely better now, I super appreciate it!!
A function usually has inputs and returns a value (or multiple). Like x = size(y). Y is the input to the function ‚Äúsize‚Äù and x is the output. To call a scrip simply add the script name to your other script. See [this ](https://www.mathworks.com/matlabcentral/answers/174625-call-a-script-via-a-function)
That would be painful and probably unnecessary. Python is so far ahead when it comes to ML, there would be no need to do anything in Matlab imo. Matlab's original neural network toolbox was so awful, so unintuitive, and painful to use, and so unintegrated with the rest of their ML ecosystem, it really set them back. I basically had to write a Matlab meta-toolbox (a wrapper for all the main ML tools) so that people could use the same conventions for everything rather than relearn new conventions for neural nets vs linear discriminant vs knn. Frankly I abandoned it because Python -- maybe they have improved -- but Python is the standard now.
I don't do much deep learning stuff, but I'm pretty sure Keras objects can be brought into MATLAB. That being said, there wouldn't be a huge need to use MATLAB at all at that point.
A lot of machine learning research is done in MATLAB, but moreso on the application side, not development. Also, [Keras is officially supported by MATLAB](https://www.mathworks.com/help/deeplearning/ref/importkerasnetwork.html;jsessionid=f3331646c0d12224ecff11687ef4). That doesn't mean it's justifiable to use both languages, but if you really don't want to learn Python you can get around it. I think MATLAB is more robust for shallow learning, Python for everything beyond that.
Look up Nyquist frequency to show why you can't get away with the same sampling freq as the system. Look up aliasing to get why 10x is better
Please can you explain how MATLAB is more robust than python for shallow learning?
hm, fair. Thanks. Will look into that. Tomorrow morning it should be on my supervisors desk, so let's see how far I'll get.
Hm, I know Nyquist frequency from wave measurements; will look into it. Brain feels like mashed potatoes at the moment, thanks in any case!
I don‚Äôt think MatLab is the appropriate tool to build your GUI. It would be much easier using Python with the TKinter library. I did a similar simple GUI that did Bluetooth serial to an ESP32 and was able to get it running in a day.
Hi Sir! I have never used Python in my life since all I've been taught is C++. In this aspect, wouldn't it be difficult for me to try to make a GUI in Python? Also, into this GUI, I need to 3D plot in real-time and add some functionalities, such as a spurious filter, a matrix expansion and a surface plot (that I already incorporated in my Matlab GUI). If I'm saying all of this, it is just to have a fair judgement whereas it would be possible for a strict beginner like me to do it. Thanks for your interest!
What do you mean not good enough? Still too much noise, too much lag, other reason?
Mostly noisy
Try moving average multiple times
There are many low-pass filters you can try out to reduce the noise more efficiently. Choosing the best one depends on your requirements. You can also try increasing your window size for the moving average. Maybe have a rolling weighted average. If that doesn't work and your system is time-invariant, try a butterworth filter. You'll need to determine a few characteristics for it and do more work to set up compared to just a simple average window.
Thank you ! I'll try that
You've received a great answer. I'll add that in general filtering is an entire world to explore. Having said that, for your application, the Kalman filter specifically is well accepted and optimal in some senses.
A script would be a rigid set of lines of code that reaches a definite answer, with likely no input. A function incorporates input(s) to then solve for a solution via those inputs and a relationship. Use a function call, it is far easier in this case.
The difference between a function and a script is that 1. The first line of a function is `function returnValue = functionName(inputArg1, inputArg2,...)` where `functionName`, `inputArg#` and `returnValue` are whatever you want them to be. 2. Functions have their own internal workspace, so you don't have to worry about unexpected variable name collisions. The only variables defined at the start of the function are your input arguments, and the only values returned are your return values. None of the other variables defined in the function will persist after the function is complete. 3. A script, when called from another script, operates in the same workspace as the calling script. In other words, it's equivalent to just copy/pasting the contents of the script into the calling script. Any intermediate variables created by the script will be left behind, and any input variables must be named exactly the same as in the calling script. It's very tedious and error prone to reuse code in this way. **This is all covered in more detail, and with examples, in the documentation. Read the section on functions.**
Most of those functionality can be covered using matplotlib and other python libraries. There is a lot of support online for coding in python which should be easier than C++ and not all that different. In the end it is up to you.
If you want to enter a Kaggle competition you cannot use Matlab or other closed-source files. I have used Matlab for shallow learning (a lot) and not sure about it being more robust for anything. I love Matlab but once our focus switched to ML I switched us over to Python there was really no question. Matlab is great for some things, and I really didn't mean to start a flame war or anything, but at this point in time if you are getting started on a ML path and plan to do it in industry don't do it in Matlab is all I'm saying. If you end up, surprisingly, at a job that does it in Matlab, then it will be incredibly easy to switch from Python to Matlab. FWIW, kaggle survey on this question, which obviously will be biased toward open source platforms: https://www.kaggle.com/kaggle/kaggle-survey-2018
Here's a pastebin link: [https://pastebin.com/cLHLVNmH](https://pastebin.com/cLHLVNmH)
Maybe I haven't explored python enough but I've personally preferred the shallow learning tools and the documentation is much better Do you have any recommendations for shallow learning tools in python?
That's fair enough, to each their own! I wasn't criticising what you said by the way, just curious about what other people use and why. Although i've never delved too far into it scikit-learn is pretty nice to use.
Thanks a lot. This is very helpful. I have coded heavily in other languages but am new to Matlab. TBH I didn't even know Matlab had classes.
No worries, it's always an interesting debate. Robust not might be the best word, but I've tried using Keras for shallow nets and it didn't go well. I've tried other toolboxes like Neupy and they didn't work that well either. I find MATLAB's tools (for shallow learning) match anything available in Python, while having more detailed documentation. Some algorithms, like LM which is default in MATLAB, is hard to find in Python and subsequently I can't get the same performance out of trained shallow networks. I use Python for spatial projects and definitely want to make the switch for ML, but I'm not totally convinced yet.
Although your code is not running when I am calling 'sample\_GUI'
Make sure you named the file `sample_GUI.m` and that it's available on your Matlab path.
I've never even known that matlab has a certification. Do you have any more info about it?
Just google it Da, MATLAB associate and professional certification. I'm fond of this software and LabVIEW, so I'm working towards it.
The cause isn't immediately obvious. Please send full reproduction steps to technical support.
Yes.
Can you link me to a place where I can learn more, I'm crearing a broyden function.
I have no issues running this, Make sure you use single quotation marks, not apostrophe. menu('Play again?', 'Play' , 'Quit') try the code above, copy paste it.
I‚Äôve used Pascal‚Äôs Triangle to smooth noisy data. Take the fifth or seventh row (as long as it‚Äôs a odd row) and weight each point about the centre value. It‚Äôs similar to how subdivision surface smoothing works.
u/stabbot
Not sure what you need to know, but here are a couple of things that *might* help you: * [`fzero` documentation](https://www.mathworks.com/help/matlab/ref/fzero.html) for simple nonlinear systems. * [Anonymous function documentation](https://www.mathworks.com/help/matlab/matlab_prog/anonymous-functions.html) * [Definition of Jacobian](http://mathworld.wolfram.com/Jacobian.html) * [Broyden's Method on Wikipedia](https://en.wikipedia.org/wiki/Broyden%27s_method) Until/unless you give more information about what you actually need, that's the best cross-section of information I can think to give you. Best of luck.
**Broyden's method** In numerical analysis, Broyden's method is a quasi-Newton method for finding roots in k variables. It was originally described by C. G. Broyden in 1965.Newton's method for solving f(x) = 0 uses the Jacobian matrix, J, at every iteration. However, computing this Jacobian is a difficult and expensive operation. The idea behind Broyden's method is to compute the whole Jacobian only at the first iteration and to do rank-one updates at other iterations. *** ^[ [^PM](https://www.reddit.com/message/compose?to=kittens_from_space) ^| [^Exclude ^me](https://reddit.com/message/compose?to=WikiTextBot&amp;message=Excludeme&amp;subject=Excludeme) ^| [^Exclude ^from ^subreddit](https://np.reddit.com/r/matlab/about/banned) ^| [^FAQ ^/ ^Information](https://np.reddit.com/r/WikiTextBot/wiki/index) ^| [^Source](https://github.com/kittenswolf/WikiTextBot) ^] ^Downvote ^to ^remove ^| ^v0.28
I‚Äôm using a mobile hence the apostrophe. I still get the same error.
Menu is not recommended. Use [listdlg](https://www.mathworks.com/help/matlab/ref/listdlg.html) instead.
Okay then you can just copy paste it from mathworks page. However, they recommend using listdlg function instead.
Kalman filter?
I wouldn't bother.
 h = [0, 0, 0; 0, 1, 0; 0 0 1]; out = imfilter(yourImage, h);
I think you wanted that third row to be different.
You want a filter that does nothing? That's a very basic question. I think you should review the mathematical basics here before you start trying to do it in Matlab.
Yes I did. I‚Äôm so used to typing the third row of an affine transformation with no translation that muscle memory took over. Thanks.
I don't know. What does the documentation say?
Newton's method.
 [https://www.youtube.com/watch?v=qiQn9CYbALY&amp;list=PLPhi9dVsEVfZOlbIPsrQx0drJlBX9T15r](https://www.youtube.com/watch?v=qiQn9CYbALY&amp;list=PLPhi9dVsEVfZOlbIPsrQx0drJlBX9T15r)
sounds like youre giving it a .csv when its expecting a .mat? Maybe save it off as a .mat aswell then do load('filename.mat')
`bwboundaries` supports C/C++ code generation using **MATLAB Coder**, so if you want the exact same results use that approach.
You're looking for `fzero`. Also, I'm pretty sure there is already a built in function called `intersect`. You should not name functions the same as built in functions.
Thank you, that was very useful.
Why?
Just practice. demonstrating what you have done using it is more worthwhile imo
Haha, awesome. Since your text was below another person's response. I got a little confused. I'll start working on it! Thanks!
To clarify this slightly, what you want to do can already be done by doing x = fzero(c1-c2) and then using that x in either function to get the corresponding y value.
Im not looking for the turning point though...? Ah, got it about the naming part
interp1([fromLow, fromHigh],[toLow, toHigh], value) https://www.reddit.com/r/matlab/comments/80675x/matlab_function_that_behaves_like_arduinos_map/
I'm not sure what you mean about the "turning point". You want to find the intersection of two functions. How do you do that, mathematically?
I'm not sure if you're asking me or telling me. That's correct, but it's generally better to help people figure this out instead of just telling them.
That was meant for OP, but yeah, I get what you‚Äôre saying. Sorry!
Thank you!
What does the documentation say?
I want to run the same Matlab code using GNU parallel, instead of "parfor" parallelization for a benchmarking purpose. I need to run the code in a system with at least 16 cores and because of that I was running it on my external machine. Instead, I tried running the code on my laptop with 4 cores and it works. Now, I detected that the problem appears only on my external machine but I can not find the reason. Anyway, I use another machine to run and it works. Thank you :)
For the first one (xOld, yOld), I can find it using (yOld - yNew) = mOld (xOld - xNew) For the second one, I already have another function, where, when i put in a Y value, I will be given X. So, if I put in yNew, I will get xNew &amp;#x200B; Mathematically, I would make yNew the subject (from the first one), and throw it into the function I already have, effectively eliminating yNew, and getting a numerical solution for xNew Then taking xNew and placing it into either curves to get yNew &amp;#x200B; My second curve has a few function, depending on what I want to put in, but I already have functions that give me xNew when input yNew regardless of case; hence I'm bent on solving by using that pre-existing function (There's other variables for the second curve in the input as well) &amp;#x200B; By turning point, I was referring to when gradient of function was = 0 (I got confused here) I'll try using the "function to solve" part on Matlab's page and hope it works &amp;#x200B; Thanks a lot
Okay, I feel stupid now, was literally on the matlab page &amp;#x200B; thanks a lot!
log(x) &lt; 0 where 0 &lt; x &lt; 1.
log(0.1)=-1 ?
Two functions f and g intersect where f(x) = g(x), or where f(x) - g(x) = 0. `fzero` finds the zeros of arbitrary functions, not their minima.
You got the intuition about logarithms the wrong way around üòÉ
There's no log of zero nor negative numbers. I think you mixed the definitions here.
Did that I had to remove a NaN column and now it works but I'm having trouble finding the first arrival time for the waveform.
I was hoping for another way besides using the Coder
Do you need to alter the physical placement of the x-ticks or do you need to change the labels of the x-ticks? Both are configurable, the first via **xticks()** and the second via **xticklabels()**.
de2bi: Convert decimal numbers to binary vectors. And then theres syntax explanations. decimalToBinaryVector: Convert decimal value to binary vector And then syntax explanations which are very similar to de2bi. This one requires the Data Acquisition Toolbox though. (Sorry for the formatting, I am on mobile.)
Are these built-in functions?
Yes.
I figured it out,thanks for the help
It looks like they simply belong to different toolboxes. It's probably neccary for both the Data Acquisition Toolbox and the Communications Systems Toolbox, so they each come with their own implementation. Otherwise you'd need other toolboxes to make one work. Looks like they will both do the same thing, but they have slightly different defaults. The documentation and some quick experimentation makes their differences clear. Just use whichever you want.
https://www.mathworks.com/help/coder/ug/use-c-arrays-in-the-generated-function-interfaces.html
So you just want to plot or visualize the 3D data? I believe there is VolumeViewer for that - they have demos that show 3D MRIs, the app allows you to adjust the contrast, etc https://www.mathworks.com/help/images/explore-3-d-volumetric-data-with-volume-viewer-app.html
This sounds like a question for your TA, not a programming subreddit
Aaaaaahhh okay, my bad! Thank you!
I see, that makes more sense. Thank you!
You can convert dates to serial numbers using datenum function, after plotting values manually show specified date numbers using xticks and yticks, and assign labels with xticklabels and yticklabels
Since you are obviously looking for an easy answer with code, here you go: &amp;#x200B; `c = clock;` `b=strcat(sprintf('%04d',c(1)),'-',sprintf('%02d',c(3)),'-',sprintf('%02d',c(2)),{' '},sprintf('%02d',c(4)),':',sprintf('%02d',c(5)));` `mycell = {b{1},rand(1)};` `clear b c` &amp;#x200B; instead of `rand(1)` you enter your variable into mycell, of course &amp;#x200B; Hope this helps
I would guess it calls some other piece of code that he has and you don't, or uses some file etc. Debug it...
But the thing is that we downloaded the exact same file from the same link :( All the steps leading up to running the programme were the same
Is the function causing the problem Matlab built-in, or is it self generated? You may not call it in the same way, you may be missing a file on your computer that it calls on. I doubt that it just happens randomly. Do you know how to debug the issue? Put a break point before the end.
Is the function causing the problem Matlab built-in, or is it self generated? You may not call it in the same way, you may be missing a file on your computer that it calls on. I doubt that it just happens randomly. Do you know how to debug the issue? Put a break point before the end.
We both downloaded an entire folder from GitHub and called the function in the path.
They might have more toolboxes installed that you don't have. would help if you pisted the actual error or just debug it.
So many things could be going wrong here. Its possible you have different versions of MATLAB. It's possible you have different toolboxes that the other which would cause different behavior. It's possible you both ran it a different way. Did you both open the function and hit the play button? I will repeat what everyone has said here. Run the code side by side (you and someone else) in debug mode and see line by line if you are getting the same results.
`while E &gt; 0` isn't doing what you think it's doing. I think you should use a for loop with something like for ii = 2:numel(x) do stuff Starting the indexing with 2 because you know E(1) already.
It could be that you are running from a different directory or otherwise have different pathnames.
Honestly didn't know arduino had a CAN library, this is neat!
It may be overkill, but I'd use a timetable or timeseries. `TT = timetable(rowTimes, variable)` You can then use `TT.Time.Format = 'uuuu-MM-dd HH:mm';` to set the format. Unless you *must* use cell arrays, I'd prefer something less nested.
A `while expr` loop continues to execute until the condition captured by `expr` fails to hold. This condition should evaluate to a single logical variable, equal to either `true` (continue looping) or `false` (stop the loop). In your case, however, E is a vector. As a result, the expression `E &gt; 0` evaluates to a *vector* of logical variables (of the same dimension as E itself), the `j`-th element of which is true if and only if `E(j) &gt; 0`. You could see this for yourself by assigning the condition to a variable (e.g., `tmp = (E &gt; 0)`), and then inspecting it. The way MATLAB deals with this vector of logicals as the condition in a `while` loop is to only continue looping if *all* the elements are `true`. In this sense, your while loop is equivalent to `while all(E &gt; 0)`. But when you first get to the loop, you can see that most of the elements of `E` are equal to zero, and therefore `all(E &gt; 0) = false`. Thus, the interior of the loop is never actually reached. This is why nothing is ever assigned to the elements of `E` beyond the first one. Now, as far as suggesting a fix, I'm not sure what the best option is because I don't know exactly what you're trying to accomplish (looks like some kind of integration of a differential equation?). Also, FYI, the expression `x(E)` which appears in your loop is not going to work (it will throw you an error): `x(E)` would denote the elements of `x` in the `E`-th positions, but `E` will not generally contain whole numbers, and thus it cannot represent indices.
It comes with the MCP2515 breakout
Make sure you have a relatively recent version of Matlab as well. You couldn't plot time series class variables (or variables what didn't only contain numbers) until around 2017ish?.
Check out Anderson &amp; Fouad - Power System Control and Stability. It includes tons of both analog and digital modeling information and tables full of real machine data. Another pair of good books featuring Paul Krause is Electromechanical Motion Devices, and Analysis of Electric Machinery and Drive Systems, both of which feature sections on modeling and control of machines. From the pure Simulink perspective, one of the best resources around is [UMich's site](http://ctms.engin.umich.edu/CTMS/index.php?aux=Home). It will hold your hand through quite a lot of Simulink. I'm also quite fond of [Swarthmore's LPSA site](https://lpsa.swarthmore.edu/), but that's more pure control theory, despite having a couple of pages on modeling. For the power system side, you might want something like SimPowerSystems (which I think is now Simscape Electrical...). You need both good machine models, and some Simulink know-how in order to get the job done. This ought to get you started. Best of luck!
Thank you! I‚Äôll check them out as soon as I can get in front of a computer
Thanks for the detailed explanation. You were right about it being an integral of a differential equation. It's supposed to be the inverse integral of the Stopping Power of a heavy charged particle through matter (Bethe-Bloch). This is the code that I ended up using for the loop: dEdx = x*0; dE = x*0; E = x*0; i = 1; E(i) = 250; while E(i) &gt; 0 gam = E./pm + 1; beta = sqrt(gam.^2-1)./gam; dEdx = ((4.*pi.*n.*z^2.*em.*re.^2)./beta).*(log(2.*em.*c.^2.*beta.^2./... (75.*(1-beta.^2)))-beta.^2); dE(i) = -dEdx(i).*dx; E(i+1) = E(i) + dE(i); i = i + 1; end I think that solved all the errors I was getting, although I didn't understand why my initial code was so wrong until I read your explanation! Thank you
I wanted to overlay specific voxels a different color/contrast on the 3D image. I figured it out though. I was changing the wrong index values to 1. But I was able to find the voxels I needed, change them to 1, then go back to the original image and replace those original voxels.
Transform your cell array to a datetime arrays, then use plot. DateArray = datetime(yourcellarray) %. Maybe read the doc for input format argument plot(DateArray, otherVariable)
I'm glad you got this to work, but I think there's still something amiss. You appear to be looping over every element of E, but your loop has no way to stop when you reach the end of E. If you're trying to loop over each element of E, I suggest being explicit about it by using a `for` loop. Maybe you need a `for` loop to loop over each element, then a `while` loop inside the `for` loop to do your calculations.
Matlab is telling you where the error is. So somewhere at that line, you have an equation where the left side doesn't have the same dimensions as the right side.
Matlab tells you the error and the line it's happening. Check the line, check the variables you are using, check their dimensions (try `whos var_name`, check where they're been called, use breaks to verify the variables' values on the run... Go for it Sherlock, it's your time to shine!
haha thanks! turns out i need to use linspace. can't believe i missed that.
You can call the arduino functions directly in the S-Function if you link against their libraries and include the header.
 tic t = toc;
Yes it is possible but may be painful if you want to solve some real world problem. The basic problem that you will have to face is the estimation of the gradient and or the hessian. Several approaches can be used. The theory is not that difficult but in practice, you must also pay attention to some numerical issues. So the answer really depends on what you would like to do...
I agree, this does seem possible.
As you want to post process existing data, you are not restricted to causal approaches. Without having motr details, it is difficult to help y ou more. I assume you are using encoders to get the position. If this is the case, you should try to keep only the sample period where an update occurs (at low speed, the encoders position may not change during different sampling times due to the encoder resolution). Idx=diff(x) ~=0; x2=interp1(t(Idx), x(Idx), t, 'spline') ; Duplicate for y. I would start easy with a simple fourth order Butterworth filter and using the filtfilt function to get a zero phase lag filter. I do not have Matlab right now, but the code should be somehow like this : Wn=...... To be guessed [b, a] =butter(4,Wn, Ts); x3=filtfilt(b, a, x2) ; Nb: you have to look at the doc for the Butterworth filter, I do not remember the syntax for a discr√®te time filter. This remains simple. If you need to compare data, that should be sufficient and you will avoid lags encountered with causal approaches.
I bet you have a function on your path with the same name as a built-in function, and this code you're trying to run is trying to use the built-in function but getting your version instead. Do not name functions the same as built-in functions.
Did the exception have any useful information with it?
I have done something like this and ended up having to do the optimization toolbox that has fmincon. Essentially you have to first make a merit function, like calculating the difference between two point clouds (re interpolating onto the same grid) and feed that into fmincon optimization. Then you can define search ranges for all of the translations and rotation.
it said `N was nullptr`. When I changed it to `double N[100]={0};`, the exception then says `access violation reading location`
Not sure if this is the issue, but did you mean to call `bwboudnaries` instead of `bwboundaries`?
That was a typo. It should be `bwboundaries` not `bwboudnaries`. I fixed the typo in the OP
If you can make your code into a class then defining properties with PreSet, PostSet, and AbortSet attributes might be useful. If you‚Äôre new then it might be easier to just do some logic checks as others have suggested.
Do you have the optimization toolbox? If so, the [lsqnonlin](https://www.mathworks.com/help/optim/ug/lsqnonlin.html) function might help. There are several examples listed on the documentation page.
Sort of a hacky way to do it but you could do PCA on each point cloud, and the first principle component would be the long axis of each face (I.e. the direction of highest variance in the point cloud). Then use a homogeneous transform to align that axis with one of the Cartesian axes. I‚Äôve done something similar to align medical image point clouds and it worked decently.
I will try comparing our toolboxes, thank you! As for debugging, the error occurs on the second line of code which says "Output argument "st_Letter" (and maybe others) not assigned during call to "f_GetLetterSize" ." But for the other person this does not occur even though it is exactly the same code.
The output type of B is :? x 1, so the easiest way is to create an empty emxArray of compatible type. The issue here is that the second dimension need to be one, and you can also use the 2D version: emxArray\_cell\_wrap\_0 \*pCW = emxCreate\_cell\_wrap\_0(0, 1); &amp;#x200B; Then the container (each cell) of cell\_wrap\_0 is another emxArray (so we have a nested emxArray.) If you check the documentation of bwboundaries, the outer emxArray represents the collection of all boundaries, and each boundary is a collection of coordinates. That inner type is of size :? x 2. So you can iterate through all the results with something like: &amp;#x200B; `emxArray_cell_wrap_0 *pCW = emxCreate_cell_wrap_0(0, 1);` `double N = 0;` `run_bwboundaries(data, pCW, &amp;N);` `std::cout &lt;&lt; "N is " &lt;&lt; N &lt;&lt; "\n";` `for (int i = 0; i &lt; N; i++) {` `emxArray_real_T *v = pCW-&gt;data[i].f1;` `std::cout &lt;&lt; "[" &lt;&lt; i &lt;&lt; "]: size=" &lt;&lt; v-&gt;size[0] &lt;&lt; " x " &lt;&lt; v-&gt;size[1] &lt;&lt; ": ";` `for (int j = 0; j &lt; v-&gt;size[0]; j++) {` `if (j &gt; 0) std::cout &lt;&lt; ", ";` `double coord_1 = v-&gt;data[j*2];` `double coord_2 = v-&gt;data[j*2 + 1];` `std::cout &lt;&lt; "(" &lt;&lt; coord_1 &lt;&lt; "," &lt;&lt; coord_2 &lt;&lt; ")";` `}` `std::cout &lt;&lt; std::endl;` `}` &amp;#x200B; I hope this helps. Alexander
Here's something you can try. First set up the options for the fit: %set op options for logistic fit opts = fitoptions( 'Method', 'NonlinearLeastSquares' ); ft = fittype('c + (b - c)/(1 + (x/a)^d)'); %fit function % a: logistic infliction point % b: logistic minimum amplitude % c: logistic maximum amplitude % d: logistic Hill's slope. The Hill's slope refers to the steepness of the curve. It could either be positive or negative. Then it's a goog idea to give starting points and lower and upper boundaries for the fit values (they depend on your data, so replace by the values you need): opts.StartPoint = [start_a start_b start_c start_d]; opts.Lower=[lower_a lower_b lower_c lower_d]; opts.Upper=[upper_a upper_b upper_c upper_d]; Then it's a good idea for you to prepare your data (if you have weight's, you can add them here, otherwise leave that out): [xData, yData, wData] = prepareCurveData( x_in, y_in w_in); opts.Weights=eData; And then finally do the fitting: [fitresult, gof] = fit( xData, yData, ft, opts ); And plot with e.g (or use errorbar for the data if you have errors (e=1/w^2)): plot(fitresult,'r-',xData,yData,'k.')
debug and compare st_Letter values prior to using it with a breakpoint. If your function isn't creating it try to work out why.
In general this is a very complex problem for which there is still active research into algorithm development. You're not going to create a general purpose algorithm for it o your own without a deeper background on the topic. However, it's much easier to find solutions for *specific instances* of problems like this, if you know something about the data you have and can limit the problem complexity. For example, if you know your point cloud represents the surface of a simple geometry, like a plane or a sphere, you could fit the points to that geometry and then compare much simpler features (eg sphere centers or plane normals). Then simply move the point clouds to make those geometry fits line up with each other. This kind of special case solution still depends on knowing the details of the problem, in order to guess at what kind of simplified approach might work.
for me, the code works fine. Maybe its due to the starting velocity. Once i had a planet moving away, but in the end, it turned its path towards the other two
If you set n = 2 the problem becomes more obvious... the first planet is attracted to the second planet, but the second planet seems either repelled by the first planet or is simply moving away on a similar acceleration vector. Initial velocity is set to zero for everything...
Let's take a solar system with 1 orbiting planet as example, keeping the sun at coordinates 0,0. What's the angle of the planet if it's at coordinates 2.2? It should be 45 degrees, right? Now, what's the angle when the planet is at coordinates -2,-2? It should be 45+180 degrees, but in your code, the angle is still at 45 degrees, causing the forces to be applied in the opposite direction. You'll need to add some conditional statements based on the signs of the x and y positions and add 90, 180, or 270 degrees for certain quadrants the planet's in.
Or, if you literally just change `theta = atan(dy/dx);` to `atan2(dy, dx);` it seems to work. `atan2` gives the proper quadrant for inverse tangent.
Oh my gosh I'm an idiot. Thank you, this solved everything. Cheers!
As others have mentioned, I suspect your issue may be related to one of you having masked a built in function. A quick way to debug these things is just type in: edit function for the function that provides the error. You can add breakpoints here to see whats going on but more than likely it will become obvious if you compare the results to that of your peer. You will probably right away see which functions are being overwritten with custom functions, etc.
How do I use it? Is there a library I need to use? If they don't work in the s-function could I use a timer?
You mean including the arduino.h? Because it doesn't detect the millis().
You might want to factor in how consistent of a quality your images are. Will the image always be flush to the front of the face, or are you ever looking at it from an angle? Are you ever only looking at a part of the face‚Äîsay from the nose up? Will you always have similar levels of resolution and similar numbers of data points? Also consider‚Äîhow quick do you need the facial alignment process to be? Can it take a minute per face, or should it be less than a second? I‚Äôd really recommend trying u/Djent_Reznor1‚Äôs solution as a first pass. It‚Äôll be quick to run and code. Feel free to ask him/her or me if you need any help implementing it! However, this solution assumes that you are always looking at the same region of the face from the same angle‚Äîfor example, always from the chin to the forehead and straight on. I suspect that this is true for your data. If it is, just use it. If this is not true for your data, you could consider a feature based approach. This is more time consuming, so don‚Äôt do it unless you have to! Make a function that uses curvature estimates or something like that to output a feature, which should just be a number. A feature should correspond to how much a certain clump of points resembles a ‚Äúnose,‚Äù ‚Äúchin,‚Äù ‚Äúforehead,‚Äù ‚Äúeye,‚Äù etc. Then, make a probability distribution for each feature based on some training data (try simple Gaussians to start). Finally, after detecting these features, orient the face based off of where they occur. Good luck :)!
is there any way to return the number of boundaries in C++, equivalent to `length(B)` in Matlab? In the example code you provided, for my input image, `N` was 2, but if I extended the `for (int i = 0; i &lt; N; i++)` to `for (int i = 0; i &lt; 1000; i++)`, it was able to keep going until around i=230. So how can I get `N=230`?
For my primitive requirements this was absolutely enough and actually really good. I dont have that much knowledge and experience in these fields. Your simple solution was the most appealing one and it works like a charm :D
Awesome, glad it works!
I'm not sure what arduino header and library have that function
full disclosure snake: ich bin kinda drunk, but sounds like you want ~512 points but only 210 numbers? You need to predefine the variable to be the final size then put your numbers where they go. &gt;&gt;test=zeroes(1,padNum); &gt;&gt;test(1,1:210)=thenumbersyouwant(1,these); probably the (row,column) is wrong cause dislexia and drunk. some of us call this zero filling, and prefer 2^n size data. beyond maxLen*2 you get no real improvement... matlab calls it predefining for speed. Do it at the top of the script or function like you are programming c and need to define variables before using them. good luck! edit : they took out my &gt; &gt; carrots :(
Decent answer for a manual solution! Now to help you in turn: &gt; they took out my &gt; &gt; carrots :( '\&gt;' indicates quote formatting on reddit. To use special characters in the markdown spec here, you can escape them with a '\', which it seems you figured out in your edit, but didn't revise... perhaps because you didn't know that code formatting requires prepending four spaces like: myVariable = theBest(allVariables); Alternatively, you can enclose with grave accents \`\` like `so`. Also, "carets" (\^\^), not carrots. Alcohol is funny! Finally, those are just angle brackets (aka "chevrons"). If we're getting REALLY pedantic, they're actually "greater than" symbols due to their elongation w.r.t. character width (see: ‚ü© vs. &gt;), but that's a bit much honestly. Have a splendid day!
Double-check the [documentation for `padarray`](https://www.mathworks.com/help/images/ref/padarray.html). The examples show you how to use the `padsize` argument to pad any desired dimension, e.g. `[nRows, nCols, nPages, nBooks, nShelves, ...]`.
Does the plot function take cell arrays?
x1.1, y1.1
I don't know? The plot page on Mathworks says the input arguments are scalars, vectors, and matrices. I didn't change how I defined any of my variables though...
You can't plot data that is in cell arrays you can plot the elements of the cell array
I converted x1 to a datetime array and replaced y1 with y{1} in the plot command but now I'm getting a different error with Plot "Error in color/linetype argument." I don't know how that's possible since I'm using the exact same format as Mathworks????
How would I do that
Where is the connection to Matlab? What is Q in your case? Gummy bears? Please be more specific.
The csvread function
Which version are you using? There is an issue with plotting timeseries on older versions.
Or over the toolbar button which say **IMPORT**
sure you could also just drag it into the IDE
&gt; csvread Well csvread lets me get a plot using y1 = csvread('Results.csv',4,11,[4 11 543 11]) but I need to be able for this program to reads variable number of rows, I need 543 to be something like end
I realized I was accidentally using a 2013 version (computer has 2 matlab versions installed for whatever reason) but I switched back to the version I was using earlier (2018b) and the problem persisted. Could opening the script in the old version buggered it up in the new version?
You assigned x and y from xr before you make any changes, so x and y will never update. Change the order of your lines to assign x and y after the filter, or better yet: just plot x(:,1) and xr(:,2)
&gt; I don't know how to update the output of the s-function This happens in the callback `mdlOutputs`. [See here for more info](https://www.mathworks.com/help/simulink/sfg/mdloutputs.html).
and how would I do this if I wanted `run_bwboundaries` to accept an image of any size, such as a 100x100 image of 25x 52 image? I tried the following in Matlab: ARGS=cell(1,1); ARGS{1}=coder.typeof(0, [Inf,Inf], [1,1]); codegen -config:dll run_bwboundaries -args ARGS -report I then see in the generated header file run_bwboundaries.h: extern void run_bwboundaries(const emxArray_real_T *im, emxArray_cell_wrap_0 *B, double *N) but when I try the following in C++ I get a `unhandled exception access violation reading location` error: run_bwboundaries_initialize(); cv::Mat im=cv::imread("input.bmp"); vector&lt;vector&lt;double&gt;&gt; imvec=matTo2Dvec(im); double **temp; temp=new double*[im.rows]; for(int i=0;i&lt;im.rows;i++){ temp[i]=new double[im.cols]; for(int j=0;j&lt;im.rows;j++){ temp[i][j]=imvec[i][j]; } } double* mat_ptr=&amp;temp[0][0]; emxArray_real_T *emx = emxCreateWrapper_real_T(mat_ptr, im.rows, im.cols); int *sz=0; double* N=0; emxArray_cell_wrap_0 *pCW = emxCreateND_cell_wrap_0(*N, sz); run_bwboundaries(emx, pCW, &amp;N);
and how would I do this if I wanted `run_bwboundaries` to accept an image of any size, such as a 100x100 image of 25x 52 image? I tried the following in Matlab: ARGS=cell(1,1); ARGS{1}=coder.typeof(0, [Inf,Inf], [1,1]); codegen -config:dll run_bwboundaries -args ARGS -report I then see in the generated header file run_bwboundaries.h: extern void run_bwboundaries(const emxArray_real_T *im, emxArray_cell_wrap_0 *B, double *N) but when I try the following in C++ I get a `unhandled exception access violation reading location` error: run_bwboundaries_initialize(); cv::Mat im=cv::imread("input.bmp"); vector&lt;vector&lt;double&gt;&gt; imvec=matTo2Dvec(im); double **temp; temp=new double*[im.rows]; for(int i=0;i&lt;im.rows;i++){ temp[i]=new double[im.cols]; for(int j=0;j&lt;im.rows;j++){ temp[i][j]=imvec[i][j]; } } double* mat_ptr=&amp;temp[0][0]; emxArray_real_T *emx = emxCreateWrapper_real_T(mat_ptr, im.rows, im.cols); int *sz=0; double* N=0; emxArray_cell_wrap_0 *pCW = emxCreateND_cell_wrap_0(*N, sz); run_bwboundaries(emx, pCW, &amp;N);
You need to put it in square brackets like the documentation says.
I do accept that I probably made a dumb oversight. I've checked documentation on structures, but maybe am not seeing the pertinent part you refer to. size(SA.sequence[]) % Invalid Expression size(SA.sequence[:]) % Invalid Expression size(SA.sequence.[]) % Invalid Expression size(SA.sequence.[:]) % Invalid Expression
I'm on mobile so I cannot check, but I think you can do length(fieldnames(SA.sequence))
 Solved
That worked! Just let me figure out how to format the response correctly to get you solution credit.
Awesome! Glad it worked.
So, I could put the PID output on mdlOutputs?
You're using the wrong API version of emxCreate. You should not use the emxCreateND, you should use emxCreate\_cell\_... The ND version requires you to supply an array of sizes (for each dimension) in case it is more than 2D, but the output B is a 2D matrix (= a vector if the first or second dimension is 1). &amp;#x200B; Furthermore, you are setting double \*N = 0 which is wrong also. It should be "double N = 0" and then you pass the address &amp;N. Look carefully at the example I provided. I actually ran that to ensure it's working. (And it is agnostic to the size of the image.)
I never used Simulink, but take a look at [GUIDE](https://youtu.be/Ta1uhGEJFBE). Maybe it's what you're looking for.
I'll take a look thanks!
Try either Dashboard blocks or use App Designer (instead of GUIDE). https://www.mathworks.com/help/simulink/ug/tune-and-visualize-your-model-with-dashboard-blocks.html
Thanks!
Simulink is already interactive and user friendly in my opinion... What more are you looking for?
https://www.mathworks.com/help/matlab/matlab_prog/access-multiple-elements-of-a-nonscalar-struct-array.html [SA.sequence] {SA.sequence}
I suppose you could, if you know how to write a PID controller as code (sample time, finite difference equations, Tustin transformation, etc.). Personally, I'd prefer to keep it simple by using the PID block, but this isn't my project! Just so I'm sure we're on the same page, in [this feedback model](https://upload.wikimedia.org/wikipedia/commons/thumb/2/24/Feedback_loop_with_descriptions.svg/1200px-Feedback_loop_with_descriptions.svg.png), your s-function would ideally handle just the reference command and sum block on the left hand side (even if it does other things not related to the control of this process/plant). The PID controller accepts the output of `mdlOutputs` as *e*, the tracking error (or "measurement error" as it's called in the picture), and generates the necessary control signal to give your plant.
To show just some parameters like setpoint, control mode, distance... and not the whole block system, also to add something to choose the control mode (P, PD...)
You can tie simulink back into matlab and use the visualization and interface creation stuff there as well.
What do you mean? The matlab command window?
The Dashboard blocks mentioned above would work. An option that is easier to use and runs better, but is also uglier is the display block for showing parameters. You can also edit values while the sim is running, so you can put your PID gains in constant blocks that can have their values changed. For not showing the whole block diagram, you can put it inside a subsystem.
I made a typo in my last post. I actually did use the same emxArray_cell_wrap_0 *pCW = emxCreate_cell_wrap_0(0, 1); double N = 0; that you used, yet I still could not `N=230
Is this for homework? Do you have to do it in some specific way, or do you just need an answer?
Hey, thanks for making this fantastic extension. How do I add matlab to my system path? I tried "export PATH=$PATH:/Applications/MATLAB\_R2018b.app/bin/matlab" it doesn't work.
I'm a bot, *bleep*, *bloop*. Someone has linked to this thread from another place on reddit: - [/r/codinghelp] [Ground Truth\/ LabelData array Error? Help!](https://www.reddit.com/r/CodingHelp/comments/c0m2au/ground_truth_labeldata_array_error_help/) &amp;nbsp;*^(If you follow any of the above links, please respect the rules of reddit and don't vote in the other threads.) ^\([Info](/r/TotesMessenger) ^/ ^[Contact](/message/compose?to=/r/TotesMessenger))*
My experience with CAS(Computer Algebra System) solvers is that they‚Äôre usually pretty bad at doing trigonometric reductions the same way a human would. Best you just do this one by hand or you‚Äôll end up spending a lot more time overall.
Your derivative method should work. You can you take the second derivative of your fitting function with respect to x and then set it to 0 and solve for x? FYI, when d=0 (the logistic function), the inflection point is exactly your parameter c.
Do you know how I can code that? I did \[fx,fxx\] = differentiate(fitresult,x); to take the second derivative of the cfit. How do I set it to 0 and solve for the x value? &amp;#x200B; Also my parameter d is equal to 1.05
I meant take the derivative of your function analytically and then solve for 0. If you wanted to do it in matlab, you could set a dense grid of new `x` values (from 2.5 to 6.5, say), put them back into your function with your best-fitting parameters to get the predicted `y`. Since the asymptote of your function is `a`, your inflection point is `a/2`. So where is `a/2` closest to your predictions in `y`? It's the `x` that minimizes `abs(y-a/2)`. `[~,index]=min(abs(y-a/2))` will give you that inflection at x with `x(index)`.
Yep. You can do anything with simulink data you would do with data in the matlab command window and visa versa.
https://www.youtube.com/watch?v=x9fqDid7i4s Hello, it appears you tried to put a link in a title, since most users cant click these I have placed it here for you ^I ^am ^a ^bot ^if ^you ^have ^any ^suggestions ^dm ^me
https://www.mathworks.com/help/images/ref/regionprops.html Requires image processing toolbox, but has a very powerful ability (including perimeter output).
Another option similar to dashboard blocks is just to add a mask over the subsystem that houses the control logic
For example BH1750 light sensor
Thank you
You might need to do syms thetaA thetaB (that syntax might be wrong) to do symbolic equations and then you can take the equation it spits out and create the variable values you need and plug them in.
If you don't have access to the toolbox, you could still write your own algorithm. It would need to identify the group / subset of points associated with a given blob. Then, assuming the points are sorted, you could calculate the distance between consecutive points and keep adding it to a running sum. This would give you a numerical approximation of your perimeter using lines to connect the points. Not absolutely perfect, but probably pretty close if the points are close together.
I think that's what I'm going to have to do. I'm technically using octave so I don't have all the available toolboxes.
You can store the names of the files in a cell array and use your loop counter to go through different files.
Since you already have traced your blobs it sounds like you have the points defining the curve of the perimeter. The length of the perimeter would just be the arc length of the perimeter curve. One approach to this is to use an interpolant of the perimeter points with quadgk as the author of this file exchange does: https://www.mathworks.com/matlabcentral/fileexchange/34871-arclength Note this may not give you sufficient accuracy if the points you have are too widely spaced but the interpolation might help beyond just using connecting lines.
If you have all the csv file in the same directory you can use the command `dir *.csv` to get a list of all the csv files in the directory, put this in a vector, cycle the vector with a `for` loop, read each csv file and plot them. Or, if you already now the file names you can create a vector with the names or only the different part in the files' names. Like: lbls=["1" "2" "3"]; for ii = 1:3 fl_nm = "file_number_" + lbls(ii); M = csvread(fl_nm); plot(M(:,1),M(:,2)) end ^the codes were written in mobile and not checked on matlab, some mistakes are expected
&gt; you can use the command In Soviet Russia, the command can use **you**! ^(this post was made by a highly intelligent bot using the advanced yakov-smirnoff algorithm... okay, thats not a real algorithm. learn more on my profile.)
&gt; you can use the command In Soviet Russia, the command can use **you**! ^(this post was made by a highly intelligent bot using the advanced yakov-smirnoff algorithm... okay, thats not a real algorithm. learn more on my profile.)
Fuck mobile...
You can use the perimeter trace points you already have, input them into the circfit function you can find the math works file exchange (it's very simple so you can copy paste the few lines into octave) and that will fit a circle to your trace and report the radius. Then it's pi*2*r.
Without knowing details about your variables, it's hard to say for sure, but my guess is that at least one of the inputs reads in as a cell array, so that [get(handles.Title_Input, 'String') get(handles.Y_Label_Input, 'String') 'vs' get(handles.X_Label_Input, 'String') date] itself is a cell, rather than a character array (which is what I think you want). If the function 'title' is called with a cell array as an argument, it plots each element on a different line, rather than concatenating them horizontally. So my suggestion is to check each of: get(handles.Title_Input, 'String') get(handles.Y_Label_Input, 'String') get(handles.X_Label_Input, 'String') date to see what data format it returns (e.g., assign each to a variable and inspect the variable type). From there you can figure out how to return a character array instead.
How are you determining the values are not the same? Do you compare them by printing out a value and reading the matching entry in the original file? You've given over a lot of control to Matlab via detectImportOptions. If it casts the data type in a way you do not like how are you checking up on it? Do you need to use a table for this, as you immediately break the data out of the table into a series of separate variables tripling the memory usage from T, to A, and then to B.
I just comapre the table to the text file(its in another window) I may not needed a table but I'm very nee to matlab and thought I could create a table of my entire text file and easily access the data I want but of course things aren't that simple... Could importdata() work? What do you suggest?
&gt; I just comapre the table to the text file(its in another window) What do you mean by another window? Are you viewing the data in the editor or are you comparing a plot window? I ask all these questions because if you see a value in the editor that looks incorrect Matlab likely shorted only its display and not its actual value. Additionally, depending on the precision of your data Matlab or any OS really may have trouble storing it if it requires too many significant figures. &gt; very nee to matlab and thought I could create a table of my entire text file You can use a table, but tables are a recent addition to Matlab. If your original data is a csv file with minimal variation [writematrix/readmatrix](https://www.mathworks.com/help/matlab/ref/writematrix.html) may be more intuitive.
I'm comparing the table in the workspace to the text file by just clicking on the text file in the current folder and looking at the two
An event is made up of a group of channels that the acoustic emissions system uses to determine the location of the signal. Its the channels in the bracket next to the *Gp #1 line. I want to check every channel in the third column and if it is in the * line with bracket, I would open the waveform .csv file using the time value to the left of that channel( directly left of the channel column) and graph them. I want to be able to get the first arrival time for each channel in each event using a Hilbert transform. Its proven too hard for me so now I'm just trying to take the time values for just the first event since I know what channels make the event by looking at the file. I plan to use these time values to open the corresponding waveform files, and get the first arrival for this first event using a hilbert transfrom. However, even this is not working...
I will look into these, thanks .
Go to MATLAB Answers with this question, you will get a response pretty soon.
Yes you will have to keep the constant part of the name and concatenate the variable part.
Could you elaborate more? Are you trying to find files with **_55.csv** at the end of them?
Yes
Well thats the format but I'll open several files using different numbers
Logical indexing and get creative. strfind and compiling a list of all files in a directory should be useful.. e.g.
I tried. No one responded there :( Fortunately I ended up figuring it out but ran into another problem. I'll post my solution in case someone else runs into the same problem
So what's the problem? files = dir('*55.csv) gets you all the files that end in 55.csv in the current folder. Then just go through all of the structs in the struct array d to load them: for f = 1:length(files) filepath = fullpath(files(f).folder, files(f).name); Do stuff end
This sounds like an [XY problem](https://en.m.wikipedia.org/wiki/XY_problem). What are you actually trying to achieve ?
Do a double `for`, one looping an array of string with the numbers you and to search and the other loop for the files themselves. fl_num=["1" "2" "3"]; for ii = elements in fl_num fl_dir= gets the list of files using dir("*"+fl_num(ii)+".csv"; for jj = elements in fl_dir do your stuffs and thanks the guy who told you about the dir on the previous posts =D
You're looking for sprintf.
A big issue is that the texr file I'm getting numbers from to open a .csv file with those same numbers in ite name actually do not share names. Ugh. So thats why I can never find the .csv files with those numbers, they dont exist...I'll just talk to someone familar with this data, thanks everyone.
A system of equations represent the intersection of n hyperplanes in n dimensional space so unless you have a very small system like 2x2 graphically solving isnt a method
Look up fmincon
You mean like the intersection of two lines? What do you mean "graphically"? You want to plot the solution?
I think im really wasting everyones time sry ill delete my post
You could try using an if statement and or a while loop. If you use a while loop you could code x to increase and set while x&lt;50 and then when x becomes equal to or greater than 50 the loop would end. You could also use if statements and have an if statement for when x is less than 50 and then a different if statement for x being equal to or greater than 50. If you type help while or doc while in the command window it will tell you more about while loops. You could also use a for loop and code like, for x=1:.1:50 and the loop would run through until the cutoff point
For example, X=1; While x&lt;50 T=(X*Y)/Z; X=X+1; end That loop will run until X is equal or greater than 50. You'd obviously have to define Y and Z. But it should work
If you keep your algorithm modular with some functions to split it up, I recommend making one of the functions take in a pair of the points for the distance calculation, and handing out the segment length. Later on, when you want to perfect it further, you might consider usage of a static variable (a class would truly be better for this, and this var could just be a member). Once you get 6 points in, you can quit the lines and start using 5th order b-splines :-). That will be the next level. However keep in mind, this will complicate the problem since you will need to apply a the arc length formula to a 5th order polynomial. Might not be necessary though depending on the nature of your data. I really would recommend assessing what is good enough if this isn't your only goal.
no, not homework. what do you mean by specific way? I would like to try to do it myself, but the problem is I do not know where to start.
The problem in your new example is that you have misinterpreted what row major means and how the C programming language deals with ND matrices. &amp;#x200B; In C, if you type &amp;#x200B; double data\[10\]\[50\] &amp;#x200B; it does not mean that you get a vector of pointers, or an array pointers for each row. The interpretation of double\[10\]\[50\] in terms of memory layout is the same as double\[500\]. And each element \[i\]\[j\] is computed as 50\*i + j, where 'i' is the row (= row major format) and j is the column. &amp;#x200B; In the case of that you have a function that accepts an 2D matrix of any size (which was your new case, right?) it'll be modeled with an emxArray as well. The data part of the emxArray is just the regular row major format as just described but using the size vector (which is also part of the emxArray). Thus, an arbitrary size of a 2D matrix will become: &amp;#x200B; double \*data (pointer to the first element) int \*size (pointer to first element of the size vector) &amp;#x200B; So, data\[ size\[1\] \* i + j \] (Note that size\[1\] is the number of columns of the matrix) is how you access the element of the matrix. Now the emxArray is carried by a variable 'x' you would have something like: &amp;#x200B; x-&gt;data\[ x-&gt;size\[1\]\*i + j \] &amp;#x200B; To access \[i\]\[j\] of that matrix. &amp;#x200B; Thus the emxArray (pointer to data) is using the same representation as C itself for bounded arrays. Therefore, if you already have a matrix (in C) of that style, and given that you've enabled row major for code generation (which you have as indicated by your example), then: &amp;#x200B; double x\[10\]\[20\]; emxArray\_real\_T \*emx\_x = emxCreateWrapper\_real\_T( x, 10, 20 ); &amp;#x200B; will create the row-major version of that data. &amp;#x200B; As a complete example I assembled this: &amp;#x200B; rowmajor.m: function rowmajor(x) coder.cinclude('stdio.h'); coder.rowMajor; for i = 1:3 for j = 1:5 coder.ceval('printf', ['%2d ' 0], x(i,j)); end coder.ceval('printf', ['' 10 0]); end main.c: #include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; #include "rowmajor.h" #include "rowmajor_emxAPI.h" int main(int argc, char *argv[]) { int x[3][5], i, j; emxArray_int32_T *emx_x; (void)argc; /* Silence warning */ (void)argv; /* Silence warning */ for (i = 0; i &lt; 3; i++) { for (j = 0; j &lt; 5; j++) { x[i][j] = i*5 + j; } } emx_x = emxCreateWrapper_int32_T(&amp;x[0][0], 3, 5); rowmajor(emx_x); emxDestroyArray_int32_T(emx_x); return 0; } To compile: codegen -config:exe -rowmajor -args {coder.typeof(int32(0), [inf inf])} rowmajor main.c And the result is: &gt;&gt; !.\rowmajor.exe 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14
Have you tried replacing X with min(X,50)? That should suffice.
Ah, yes, i figured that part out, thanks a lot and apologies for the late reply!
i try to restaorate image using this code but something goes wrong and show me like &gt;`a_wnr=deconvwnr(sinimage,sinusoidalnoise,0);` &gt; &gt;`figure` &gt; &gt;`imshow(a_wnr)` &gt; &gt;`title('restaorated image')` but something goes wrong and show me like this: [https://ibb.co/jW0gw8q](https://ibb.co/jW0gw8q)
update the other slider in the callback function: &amp;#x200B; function slider1callback(handles, hObject, eventdata) valueFromSlider1 = get(handles.slider1,'value') set(handles.slider2,'value', valueFromSlider1) &amp;#x200B; then do the same for slider2. seems redundant to have two sliders in this scenario; why not use one?
I'm confused. What is the point of using `codegen` on `rowmajor`? Is that something I should include with the `run_bwboundaries` code? How does that solve the issue I have with getting `N=2` instead of `N=230`? Also, I've noticed that since I changed `run_bwboundaries` so it accepts an input image of any size, (so it accepts `emxArray_real_T` for `im`), that when I run only the following run_bwboundaries_initialize(); cv::Mat im=cv::imread("input.bmp"); vector&lt;double&gt; imvec=matToArr(im); double* im_ptr = &amp;imvec[0]; double N=0; emxArray_cell_wrap_0 *pCW = emxCreate_cell_wrap_0(0,1); run_bwboundaries(im_ptr, pCW, N); that the `run_bwboundaries(im_ptr, pCW, N)` takes a few minutes to run, whereas it should only take a few seconds like in Matlab. Why is this?
I'm confused. What is the point of using `codegen` on `rowmajor`? Is that something I should include with the `run_bwboundaries` code? How does that solve the issue I have with getting `N=2` instead of `N=230`? Also, I've noticed that since I changed `run_bwboundaries` so it accepts an input image of any size, (so it accepts `emxArray_real_T` for `im`), that when I run only the following run_bwboundaries_initialize(); cv::Mat im=cv::imread("input.bmp"); vector&lt;double&gt; imvec=matToArr(im); double* im_ptr = &amp;imvec[0]; double N=0; emxArray_cell_wrap_0 *pCW = emxCreate_cell_wrap_0(0,1); run_bwboundaries(im_ptr, pCW, N); that the `run_bwboundaries(im_ptr, pCW, N)` takes a few minutes to run, whereas it should only take a few seconds like in Matlab. Why is this?
An image of a hyperlink. Wow.
Install simulink support package or matlab suport package from matlab addons and follow the getting started videos.
Row-major vs column-major is just how the elements of a matrix are organized when viewing it as a linear vector. Given a matrix, let's say 10x50 (10 rows, 50 columns), you can compute an element of that matrix given row and column as: element = data\[50\*row + column\] (row-major) element = data\[10\*column + row\] (column-major) where the total array size is 500 elements. This is the difference between row and column major, and it is an issue when integrating with C code because C is row-major by default whereas MATLAB is column-major by default (inherited from FORTRAN.) That's the reason why you sometimes want to instruct MATLAB Coder to produce row-major code. &amp;#x200B; I can try to create a complete example for you, but we need to agree on the input data. Where can I find your "input.bmp"? (So I can download the same image.) I'm not familiar with the OpenCV API, so I'll have to check how it represents images in memory.
Sorry for the mess up. Corrected.
Weiner deconvolution is used to remove the effect of convolution by a point spread function, not additive noise.
thanks.
I used these packages once, but I found Matlab is not suitable for embedded. I love Matlab, but I don‚Äôt like it when people try to do things it not supposed to do.
Your starting seems to need to be closer to the "correct" values for it to converge. For the data you have, try changing the first value to e.g. 20.
Thanks! That makes it look a lot better but still not as good as the cftool solution. However, why does it converge in cftool but not in the generated code? The opts.StartPoint was defined in the code generation process so I presume that these points are the same between the two?
maybe the boundaries are set in cftool? Or maybe the tolerance is different. I agree, that the generated code, should have all the necessary variables written. I can't test it now myself, as I'm currently using my computer for running some other code.
thank you for the response. The thing is my GUI has multiple pages, so I have sliders in two different pages. I want them to be synced.
Sorry to hear that - what issues have you come across when trying to use it for embedded applications?
In the set and get functions when u write slider 1/slider 2 are u referring to the name of the entire call back functions?
I didn‚Äôt really like the overhead from Matlab. For applications like robotics, it just doesn‚Äôt make sense to put all the code in Matlab.
It doesn't matter what page they are on, or even what figure they are in. The important thing is that they can somehow "see" the variable containing the other slider. How did you make the GUI? Is this an old-fashioned figure-based GUI or a new uifigure-based GUI? Did you build it with guide or code it by hand? The way it is structured determines what you have to do to make the variables visible to reach other.
thank you but how can i restaorate my image, how can i start with?
I guess you could just subtract the sinusoidal pattern. What are you actually trying to do here?
I understand. Well, keep us in mind. We've been investing [a lot in robotics lately](https://www.mathworks.com/products/robotics.html).
The easiest way is to linearize your system about some quiescent operating point, generally by making small signal assumptions or by introducing substitution states. [Here is a good introduction](https://www.mathworks.com/help/slcontrol/ug/linearizing-nonlinear-models.html). You can click around from there to see other ideas/approaches, specific to MATLAB/Simulink.
The function has its own workspace, so the definition of `u` inside the function file is invisible to your calling script ("ode file"). Define `u` in your calling script prior to passing it as an argument in the function call and you'll be good to go.
Thanks I'll try! By the way, do you know what could ve the reason for a servo not to move even though the output seems in range?
No idea... could be a number of things, but my first stop would be making sure all the physical connections are both correct (i.e. they actually route where you think they do) and snug. From there it's a matter of step-by-step troubleshooting. Does the servo work when you give it a DC signal? Does the meter/scope show the correct value/waveform at your controller output? So on, so forth...
I've made two models: - one just using arduino support package blocks and a pid block - implementing a s-function builder block for the sensor's measure and then a pid block to get the sinal for the servo (same pid with same output between 0-180 and the servo works fine in this model)
I know Robotic tool box has been a thing for awhile now, and tbh I haven‚Äôt looked into that a whole lot. But I still like Matlab for its simplicity to test things out. I really hope you guys would focus more on simulation and make it as easy as possible. I do see the academics use Matlab a whole lot but I never really see they use the new fancy toolboxes (they used DSP, Control..., since it directly connected to the courses). And when they defined a problem, most of the time students (undergrads and postgrads) still go back to C and Python, since it has a bigger support. The only way you guys can win us over is to make things more like plug and play (but still leave room for customization).
Now I received an error asking me to define 't', a variable that the ode file solving for?
Have you used [Simulink](https://www.mathworks.com/products/simulink.html) a lot? I saw "simulation" in your reply and immediately thought of Simulink (it's also the side of the business I work on, so I'm a bit biased).
Copy/paste the error text and tell me to which line in your code it refers. Doing so might even help you solve the problem on your own, but if not I'll try to help you figure it out. From what you've typed it looks fine since you gave `tspan` for `ode45` to use on your function handle... but who knows.
t should be a continuous variable for tspan, however i dont know how to define it beforehand Undefined function or variable 't'. &amp;#x200B; Error in ode45\_ex (line 14) u = \[u0\*sin(w\*t); u0\*w\*cos(w\*t)\]; \&gt;&gt;
I was thinking of something like ROS.
Interesting. Put a breakpoint on that line and run your "ode file" script again. It will get tedious quickly as it will be called as many times as the solver needs it to be, but you will hopefully see the error in the first run. While the debugger is paused at the breakpoint, mouse over the variables and make sure they have values. It might have something to do with your inclusion of `varargin` in the argument list, as the function call tries to assign variables inside the function's workspace, and that acts as a catch-all for any additional arguments you pass. Since you're not using it anyway, try removing it to see if that helps.
Okay, so this is a purely simulated servo? That almost certainly means something is not connected, routed incorrectly, has inappropriate dimensions, or some other simple but often-overlooked thing. Use your finest-toothed comb to n-tuple check the servo input, and put a scope on the line so you can watch the signal during the simulation.
Have you tried restarting yet? üòÇü§£
Yes I tried üòÇ
The scope shows a value within the range and the servo is a real one, I'll show you the blocks: https://www.reddit.com/r/matlab/comments/c05y50/does_anyone_know_why_the_servo_isnt_moving_even/?utm_source=share&amp;utm_medium=ios_app&amp;utm_name=ios_share_flow_optimization&amp;utm_term=enabled
Okay, so replace that input with a constant value and see if it works. If so, make sure the output scaling is correct, as per the manufacturer. You say the servo worked with another model; does it still work, right now, today with that model? I hate to keep saying it, but make sure the connections are snug; one bump is all it takes to drive you completely insane.
Yes I tried the servo with the other model today too and it works just fine that's why I'm going crazy ü•∫ Okay I'll try with a constant value as input and let you know
i'm trying to restaorate my image using wiener filter
A vectorized/array language like Matlab is \*so\* different from C++ in terms of its idioms and performance characteristics that you probably want some actual introductory material on it, instead of just trying to port your C++ skills over. I like learning new languages from books. If you do too, and have $50 to spare on a used copy, I recommend "Mastering Matlab" ([https://www.amazon.com/Mastering-MATLAB-Duane-C-Hanselman/dp/0136013309/](https://www.amazon.com/Mastering-MATLAB-Duane-C-Hanselman/dp/0136013309/)). The [Matlab Online documentation](https://www.mathworks.com/help/matlab/getting-started-with-matlab.html) is also good. &amp;#x200B; You'll want to know: * Array manipulation basics * The common statistical functions * The new @table, @datetime, and @string classes. (These are new enough that I don't think they're covered in the book, but they're important enough that you \*really\* should know them.) * Data import and export using the basic I/O functions, csvread/csvwrite, readtable/writetable, and maybe the HDF5 I/O stuff. * Basic plotting and data visualization Also, Matlab is more of a "functional programming language" (as opposed to an imperative language like C/C++) so it wouldn't hurt to the learn the basics of functional programming. I don't have a good reference for you there.
Slightly wrong path. I think you want "D:\\Program Files\\Matlab\\R2016a\\bin\\matlab.exe". Or cd into that "bin" directory and then run plain "matlab".
Because you‚Äôre not feeding the PID controller output to the controlled process
But you aren't degrading the image in a way that you would use a weiner filter to restore.
[There are several thousand here](https://www.mathworks.com/matlabcentral/fileexchange/), give or take.
Although it should work with PDE toolbox, you might have found a bug in which case you can maybe report it to the Mathworks and directly get help from them. Alternatively, heat transfer with different material properties in different subdomains can also be simulated with the [FEATool Multiphysics](https://www.mathworks.com/matlabcentral/fileexchange/63144-featool-multiphysics-matlab-fea-physics-simulation-toolbox) toolbox, for example as done in this example https://www.featool.com/model-showcase/02_heat_transfer_03_heat_transfer3
Gotcha. Check out [this](https://www.mathworks.com/help/robotics/examples/get-started-with-ros-in-simulink.html) and [this](https://www.youtube.com/watch?v=nHVGhwDD4VU) when you get a chance.
The vast majority of stuff on File Exchange is what I'd call "trivial", though. I'm looking for stuff with a bit more substance, and especially the possibility of collaboration. &amp;#x200B; But I should go through and add the important ones from File Exchange to my list.
I guess u should try subplot. For example, subplot(2,2,N) will make a 2x2 grid, where N is number of your current plot.
If x is the same between plots, you could try 'hold on' which allows multiple plots on the same axis.
Seconding the subplot function unless you meant "one graph with multiple X and multiple Y axes". The latter is possible with: plot(x,y) hold on yyaxis right plot(x,y2) [This is the Mathworks tutorial on multiple axes on the same plot](https://www.mathworks.com/help/matlab/creating_plots/graph-with-multiple-x-axes-and-y-axes.html)
no, it's referring to the element of the GUI. &amp;#x200B; if you're using GUIDE to do this, everything is saved in the handles structure. that example function i wrote up there first pulls the value from slider1, then sets slider2 to that value.
I meant that I want to plot each waveform in one figure. So if I had 5 waveforms I would see five plots in one figure, 5 separate graphs.
So why not use "hold on"? plot(x,y) hold on plot(x2,y2) plot(x3,y3) As far as I know, you can only have two of each X and Y axis but the above is how you can stack plots.
[Use subplots.](https://www.mathworks.com/help/matlab/ref/subplot.html)
Nothing is working, all I get is the waveforms all plotted on one set of axis and its messy...the number of waveforms changes I can't subplot all of them individually, and so I guess I'm having issues with the loop
I'm not sure entirely what you're doing but one possibility is a separate y-axis which I'm pretty sure is [possible.](https://www.mathworks.com/help/matlab/creating_plots/plotting-with-two-y-axes.html) &amp;#x200B; I don't have a current license and you appear to be plotting from some file.
I'll just talk to my professor, thanks everyone!
Leaving a few assumptions on table here but it‚Äôs a string you can use strtrim to trim white space. If it‚Äôs not a string you can convert it to one and do the same thing.
I have the image at: https://imgur.com/a/PP8wXOl The value i got for `N=2` and `N=230` was for a different image that is proprietary so I can't share it here. But I realized I made a mistake with that. Matlab also showed `N=2`, as the 230 was obtained from `length(B)`, which I can't get the equivalent of in the C++ code For that lenna image, in Matlab, I got `N=986` and `length(B)` to be 1092, and in C++ I also got `N=986` but don't know how to get `length(B)`. How can I get `length(B)`?
^(Hi, I'm a bot for linking direct images of albums with only 1 image) **https://i.imgur.com/TSqi21u.png** ^^[Source](https://github.com/AUTplayed/imguralbumbot) ^^| ^^[Why?](https://github.com/AUTplayed/imguralbumbot/blob/master/README.md) ^^| ^^[Creator](https://np.reddit.com/user/AUTplayed/) ^^| ^^[ignoreme](https://np.reddit.com/message/compose/?to=imguralbumbot&amp;subject=ignoreme&amp;message=ignoreme)^^| ^^[deletthis](https://np.reddit.com/message/compose/?to=imguralbumbot&amp;subject=delet%20this&amp;message=delet%20this%20erj7c0u)
If you're looking to format an m-file, you could use an IDE like Visual Studio Code to open your file. If you set the 'trim trailing whitespace' setting then on save all trailing whitespace'will be removed.
Well, you mentioned solving via a Taylor series, and I didn't know if you were required to do it that way. I would use [fzero](https://www.mathworks.com/help/matlab/ref/fzero.html) to solve this. You can easily make it a "solve for zero" problem by just bringing the `x*b` to the other side and then saying `y*ln(1 + y/a) - x*b = 0`. So, in this case you would let `fzero` vary `y` while you handed in different `x`'s . It's not an "efficient" way to solve it, but even handing solving it 360 times (so, one degree increments of x) would run in about a second.
In the Matlab editor, if you select all text via Ctrl-a and then do a Ctrl-i to autoindent, it will remove all trailing whitespace in your file. It also fixes your indenting. This probably depends on the editor's settings. But I've grown accustomed to doing these two steps followed by a Ctrl-s to save every so often.
Go check out Matlab regular expressions. They are great for parsing text and altering it in a very modular way. However it might be Overkill for this. https://www.mathworks.com/help/matlab/matlab_prog/regular-expressions.html If it is overkill, I recommend taking a look at fseek: https://www.mathworks.com/help/matlab/ref/fseek.html Maybe then you can move through the file backwards to find the extent of the white space at the end of the file.
Can you upload the finished graph as a picture? Maybe one can understand than what you were looking for.
Sorry I'm new to Simulink and I don't really get what you mean by feeding the output because in my other model (same but instead of analog input a s-function block that contains the sensor's code) the servo works fine with the same PID block
Still cannot get to linearize the model it appears 'Plant Cannot Be Linearized' and I don't know how to solve that
 Still cannot get to linearize the model it appears 'Plant Cannot Be Linearized' and I don't know how to solve that
Probably best looking for open source languages, python octave etc.
This is what I do. I prototype the script/functions in Matlab, not caring of formatting, and then I make it pretty (and document it) with vscode.
I think this is what `strtrim` or `deblank` are for. Check out the documentation for those functions.
Just do it in Matlab. ctrl-a ctrl-i No need to go to another IDE.
i need to identify my noise components with `imagesc(log10(abs(fft2(sinimage))))` and then i need to identify "peculiar" spikes or generally strange features in my 2D fft of the image, then i mostly likely have coherent noise/interference noise, Then i need to reduce interference throught identify fourier- components and remove(set to 0) and i need to do inverse fft. I don't know how i can do that
None of that is what I'd call a weiner filter. Have you tried that yet? Have you been able to create the Fourier transform image? Have you tried to filter it? What's not working?
i tried now but i don't know how to do that, and it can be filtered with Wiener2 but i need signal components
That's not a MATLAB problem but I'll try to help you none. Suppose you have a fully actuated system dx/dt = f(x, u) You can linearize the system at every time step so that dx/dt ~= f(0, 0) + (pf/px) x + (pf/pu) u If you want dx/dt = - K x, you can pick u = (pf/pu)^(-1) (- f(0, 0) - (pf/px) x - K x) assuming that (pf/pu) is invertible and does not depend on u. This means your P gain should be taken as (pf/pu)^(-1) K and you'll roughly get your desired trajectory. *pf/px is the partial derivative of f wrt x.
Thanks but I mean, is there any way in simulink to tune a non linear system without losing so much time till you get the right pid values for the plant?
Knowing the plant you're controlling would give you some insights. What plant are you controlling?
A ball&amp;beam system: Sm: futaba s3003, range 0-180 degrees Ditance sensor: sharp GP2Y0A21YK IR, range 10-80cm
If you want to chek it, I can send you the simulink model
The issue with getting the right answer is related to OpenCV because using OpenCV imread (on this image) returns an image with 3 channels. You need to convert this image first to a 1-channel image first: &amp;#x200B; cv::Mat im = cv::imread("input.png"); cv::Mat imConv; cv::cvtColor(im, imConv, cv::COLOR_BGR2GRAY); cv::Mat imDbl; imConv.convertTo(imDbl, CV_64FC1); std::cout &lt;&lt; "Rows: " &lt;&lt; imDbl.rows &lt;&lt; " Cols: " &lt;&lt; imDbl.cols &lt;&lt; std::endl &lt;&lt; std::flush; std::cout &lt;&lt; "Channels: " &lt;&lt; imDbl.channels() &lt;&lt; std::endl; double *imData = imDbl.ptr&lt;double&gt;(); emxArray_real_T *emxIm = emxCreateWrapper_real_T(imData, imDbl.rows, imDbl.cols); emxArray_cell_wrap_0 *emxB = emxCreate_cell_wrap_0(0, 1); double N = 0; run_bwboundaries(emxIm, emxB, &amp;N); std::cout &lt;&lt; "Result: B=" &lt;&lt; emxB-&gt;size[0] &lt;&lt; "x" &lt;&lt; emxB-&gt;size[1] &lt;&lt; " N=" &lt;&lt; N &lt;&lt; std::endl; Will output B=1092x1 N=986 &amp;#x200B; Which is the same in MATLAB. However, I also notice the performance problem. It always easiest to check for issues first using MEX code generation: &amp;#x200B; \&gt;&gt; codegen -args {coder.typeof(0, \[inf inf\])} run\_bwboundaries .... generates run\_bwboundaries\_mex \&gt;&gt; run\_bwboundaries\_mex(double(imread('input.png'))) ... and it also has the same performance problem. &amp;#x200B; But if I compile with 1024x1024 (coder.typeof(0, \[1024 1024\])), then it is lightning fast. So it's definitely related to variable-size arrays. &amp;#x200B; I investigated this further, and it's a combination of row-major code generation and variable-size arrays. So the workaround I could come up with is to let MATLAB Coder remain in column-major mode and then do the row-major to column-major conversion manually before calling the MATLAB generated code. And then it's more or less instant again. &amp;#x200B; Here's my main.cpp file: &amp;#x200B; #include &lt;opencv2/opencv.hpp&gt; #include "codegen/exe/run_bwboundaries/run_bwboundaries_initialize.h" #include "codegen/exe/run_bwboundaries/run_bwboundaries.h" #include "codegen/exe/run_bwboundaries/run_bwboundaries_emxAPI.h" int main(int argc, char *argv[]) { (void)argc; // Silence warning (void)argv; // Silence warning run_bwboundaries_initialize(); cv::Mat im = cv::imread("input.png"); cv::Mat imConv; cv::cvtColor(im, imConv, cv::COLOR_BGR2GRAY); cv::Mat imDbl; imConv.convertTo(imDbl, CV_64FC1); std::cout &lt;&lt; "Rows: " &lt;&lt; imDbl.rows &lt;&lt; " Cols: " &lt;&lt; imDbl.cols &lt;&lt; std::endl &lt;&lt; std::flush; std::cout &lt;&lt; "Channels: " &lt;&lt; imDbl.channels() &lt;&lt; std::endl; // Convert imDbl to column-major form: double *imData = new double[imDbl.rows*imDbl.cols]; for (int i = 0; i &lt; imDbl.rows; i++) { for (int j = 0; j &lt; imDbl.cols; j++) { imData[j*imDbl.rows + i] = imDbl.at&lt;double&gt;(i,j); } } emxArray_real_T *emxIm = emxCreateWrapper_real_T(imData, imDbl.rows, imDbl.cols); emxArray_cell_wrap_0 *emxB = emxCreate_cell_wrap_0(0, 1); double N = 0; run_bwboundaries(emxIm, emxB, &amp;N); std::cout &lt;&lt; "Result: B=" &lt;&lt; emxB-&gt;size[0] &lt;&lt; " x " &lt;&lt; emxB-&gt;size[1] &lt;&lt; " N=" &lt;&lt; N &lt;&lt; std::endl; emxDestroyArray_real_T(emxIm); emxDestroyArray_cell_wrap_0(emxB); delete [] imData; return 0; } The MATLAB file (run\_bwboundaries.m): function [B,N]=run_bwboundaries(im) if coder.target('MATLAB') else [B,~,N]=bwboundaries(im); end And finally the command to compile everything (doit.m): cfg = coder.config('exe'); cfg.TargetLang = 'C++'; codegen -config cfg -I E:/Work/opencv/build/include -args {coder.typeof(0, [inf inf])} run_bwboundaries main.cpp E:/Work/opencv/build/x64/vc15/lib/opencv_world410.lib \&gt;&gt; \[B,\~,N\] = bwboundaries(double(imread('input.png'))); &amp;#x200B; And I get the same results as in MATLAB (B = 1092x1, and N = 986): &amp;#x200B; I hope this helps, Alexander
Okay, suppose that you have placed the servo in the middle and you have the ball going back and forth on the rail, with the right side being +x and an anti-clockwise rotation of the beam being positive with the beam lying flat being zero rotation, the dynamics of the system can be roughly described as &amp;#x200B; ddx \~= -g sin(q) := u, (g positive, := is assignment) &amp;#x200B; assuming that there's no friction, that the ball never takes off, and that actuator dynamics is absent and you have direct control over q (the beam angle). &amp;#x200B; See that we have a second order system so we'll need a PD controller to stabilize x, let me explain. &amp;#x200B; If you have dx = u, you can stabilize x with u = -k x and x would go away exponentially with a time constant of k. &amp;#x200B; If you do the same thing with ddx = u, you'll end up with ddx = -kx and x would keep oscillating unless you damp the system. We damp the damn thing with some -h dx (h being the d gain). &amp;#x200B; We'll then get ddx + h dx + k x = 0, and x may be stabilized depending on the values of h and k. Usually, we'd love to have the system converge in a critically damped manner (repeated negative real pole), so that we should pick h = 2\*p and k = p\^2, then your x would converge to 0 exponentially with a time constant of p. &amp;#x200B; This means that in your system you should pick &amp;#x200B; u = -2\*p dx - p\^2 x &amp;#x200B; with -2\*p being your D gain and -p\^2 being your P gain. To make u happen, how should you pick q?
nah im good
I'd say linearizing is probably the easiest method as long as your assumptions are valid. If the equations of motion aren't too complicated, you could try writing a 'systune' code. But the more complex the equations are, the harder the code is to set up (from my experiences anyway). There should be a systune tutorial on the mathswork website. Maybe give that a look?
Taylor series was suggested in AskMath thread ( [https://www.reddit.com/r/askmath/comments/c0ithy/logarithmic\_question/](https://www.reddit.com/r/askmath/comments/c0ithy/logarithmic_question/) ), that's why I mentioned it. Thenks for the tip, I'll try it and post the results.
I'm not very good at programing so... just manually trying to tune but this is taking forever
No. Again, the addition of a sinusoidal background cannot be represented as a convolution. I don't think Matlab is your problem. You seem to have a fundamental lack of mathematical understanding of the problem you are trying to solve. Matlab cannot understand the math for you. You must understand the math *yourself* before you can use Matlab to do the calculations.